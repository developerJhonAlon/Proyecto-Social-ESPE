<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:pe="http://primefaces.org/ui/extensions"
      >
    <h:body>    
        <ui:composition template="/vista/template-sistema2.xhtml">
            <ui:define name="content">

                <style>
                    .ui-panel .ui-panel-content {
                        padding: 0;
                    }            
                    .col1_datos_generales {
                        width: 100px ;
                    }
                    .col1_adquisicion {
                        width: 95px;
                    }
                    .col1_objetivos {
                        width: 80px;
                    }
                    .col1_presupuesto {
                        width: 140px;
                    }
                    .col1_identificacionPoblacion {
                        width: 100px;
                        text-align: left;
                        border: solid;
                        border-width: 1px;
                    }
                    .col2_identificacionPoblacion {
                        width: 70px;
                        text-align: center;
                        border: solid;
                        border-width: 1px;
                    }
                    .col1_acta_concejo_departamento{
                        width: 200px;
                    }
                    .col1_numerico_beneficiarios {
                        width: 140px;
                    }
                    .col1_presupuesto {
                        width: 140px;
                    }                    
                    .col1_anexo_diagnostico_problema {
                        width: 140px;
                    }                    

                    .hide-column-names table thead tr {
                        display: none;
                    }
                    .button {

                        background-color: Transparent;background-repeat:no-repeat;border: none;cursor:pointer;overflow: hidden;
                    }            
                    .centrado{
                        text-align: center;
                    }                   
                    .inputNumberPorcentaje input
                    {
                        width: 30px !important;
                    }
                    .inputNumberObjetivoEjecutado input
                    {
                        width: 40px !important;
                    }

                </style>                

                <p:panel style="border: hidden;">
                    <h:panelGrid id="panelTitulo" columns="1" width="100%" columnClasses="centrado" style="background: rgb(39, 124, 75) none repeat">
                        <p:outputLabel value="#{proyectoController.nombreProySeleccionado}" style="color: white; font-weight: bold;" ></p:outputLabel>
                        <p:outputLabel value="ESTADO ACTUAL: #{proyectoController.proyectoSelected.estadoStr}" style="color: white; font-weight: bold;" ></p:outputLabel>
                    </h:panelGrid>
                    <h:panelGrid columns="3" columnClasses="menu, alineadoSuperior, alineadoSuperior" style="width: 100%">


                        <h:panelGrid id="panelMenu" columns="1">
                            <p:tree id="treeMenu" value="#{proyectoController.rootMenu}" var="node"
                                    selectionMode="single"
                                    selection="#{proyectoController.selectedNode}"
                                    style="width: 220px"
                                    >
                                <p:ajax event="select" listener="#{proyectoController.onNodeSelect}" update=":formPrincipal:panelMenu, :formPrincipal:panelCentral, :formPrincipal:panelTitulo"
                                        onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()" process=":formPrincipal:panelCentral, :formPrincipal:panelMenu, :formPrincipal:panelTitulo"/>
                                <p:ajax event="expand" listener="#{proyectoController.onNodeExpand}" update=":formPrincipal:panelMenu"/>
                                <p:ajax event="collapse" listener="#{proyectoController.onNodeCollapse}" update=":formPrincipal:panelMenu"/>


                                <p:treeNode styleClass="menuOpciones">
                                    <h:outputText value="#{node.nombre}" title="#{node.nombre}" style="white-space: pre-line"/>
                                </p:treeNode>
                            </p:tree>

                        </h:panelGrid>

                        <p:panel id="panelCentral" style="width: 98%; border: hidden ">
                            <!--tab1: Datos Generales-->
                            <p:panel id="panelDatosGenerales" rendered="#{proyectoController.selectedNodeCode=='1.1.1'}" style="border: hidden; padding-left: 20px; ">
                                <h:panelGrid columns="3" cellpadding="7">
                                    <p:commandButton value="Editar" title="Editar" icon="ui-icon-pencil"
                                                     action="#{proyectoController.seleccionarEdicion}"
                                                     rendered="#{!proyectoController.modoEdicion}"
                                                     disabled="#{!proyectoController.permitirEditarPerfil}"
                                                     update=":formPrincipal:panelDatosGenerales" >
                                    </p:commandButton>

                                    <p:commandButton value="Eliminar" icon="ui-icon-closethick" style="margin: 0; float: left" disabled="#{!proyectoController.permitirEliminarProyecto}"
                                                     rendered="#{proyectoController.proyectoSelected.id!=null and !proyectoController.modoEdicion}"
                                                     action="#{proyectoController.eliminarProyecto()}"
                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                     title="Eliminar Programa" update=":formPrincipal:h1,:formPrincipal:panelCentral,:formPrincipal:pInput1"
                                                     >
                                        <p:confirm header="Confirmación" message="Confirma que desea eliminar el proyecto actual ?" icon="ui-icon-alert" />
                                    </p:commandButton>        
                                    <p:commandButton value="Imprimir" icon="ui-icon-print" style="margin: 0; float: left" disabled="#{proyectoController.proyectoSelected.id==null}"
                                                     rendered="false"
                                                     title="Imprimir Programa" update=":formPrincipal:h1,:formPrincipal:panelCentral,:formPrincipal:pInput1"
                                                     process="@this"
                                                     >
                                    </p:commandButton>


                                </h:panelGrid>
                                <p:fieldset legend="DATOS GENERALES" style="width:100%">
                                    <h:panelGrid columns="3" cellpadding="7" id="h1">
                                        <p:commandButton id="btnGrabarP1" value="Grabar" icon="ui-icon-locked" 
                                                         rendered="#{proyectoController.modoEdicion}"
                                                         title="Graba Información" update=":formPrincipal:panelMenu, :formPrincipal:panelCentral, :formPrincipal:message1" 
                                                         action="#{proyectoController.registraP1()}"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                        </p:commandButton>
                                        <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                         update=":formPrincipal:panelDatosGenerales" 
                                                         rendered="#{proyectoController.modoEdicion and proyectoController.proyectoSelected.id!=null}"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                         action="#{proyectoController.cancelarPerfil}">
                                        </p:commandButton>


                                    </h:panelGrid>
                                    <h:panelGrid columns="2" cellspacing="5" columnClasses="col1_datos_generales">
                                        <p:outputLabel value="Programa:" for="selPrograma" style="font-weight: bold"/>
                                        <h:panelGrid columns="2">
                                            <p:selectOneMenu id="selPrograma" value="#{proyectoController.proyectoSelected.programa}"  
                                                             disabled="#{proyectoController.proyectoSelected.programa.id!=null}"
                                                             required="#{not empty param['formPrincipal:btnGrabarP1']}" 
                                                             converter="omnifaces.SelectItemsConverter"
                                                             >
                                                <f:selectItem itemLabel="[[-Seleccione un item-]]" itemValue="" noSelectionOption="true"/>
                                                <f:selectItems value="#{proyectoController.programaList}" var="prog" itemValue="#{prog}" itemLabel="#{prog.nombre}" />
                                            </p:selectOneMenu>                                                
                                            <p:message for="selPrograma"></p:message>
                                        </h:panelGrid>
                                    </h:panelGrid>

                                    <h:panelGrid columns="3" cellpadding="0" cellspacing="0">
                                        <h:panelGrid columns="1" cellpadding="0" cellspacing="0">



                                            <h:panelGrid id="pInput1" columns="2" cellspacing="5" columnClasses="col1_datos_generales">
                                                <p:outputLabel value="Código:" style="font-weight: bold"/>
                                                <p:outputLabel id="lblCodigo" value="#{proyectoController.proyectoSelected.codigo}"/>

                                                <p:outputLabel value="* Nombre:" for="txtNombreProyecto" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <p:inputTextarea id="txtNombreProyecto" value="#{proyectoController.proyectoSelected.nombre}" maxlength="500" rows="2" cols="50" 
                                                                     disabled="#{!proyectoController.modoEdicion}"
                                                                     required="#{not empty param['formPrincipal:btnGrabarP1']}"></p:inputTextarea>
                                                    <p:message for="txtNombreProyecto"></p:message>
                                                </h:panelGrid>


                                                <p:outputLabel value="* Tipo Proyecto:" for="selTipoProyecto" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <p:selectOneRadio id="selTipoProyecto" value="#{proyectoController.proyectoSelected.tipo}" 
                                                                      required="#{not empty param['formPrincipal:btnGrabarP1']}"
                                                                      disabled="#{!proyectoController.modoEdicion}"
                                                                      style="font-weight: normal"
                                                                      >
                                                        <f:selectItem itemLabel="Gasto Permanente" itemValue="C"/>
                                                        <f:selectItem itemLabel="Gasto No Permanente" itemValue="I"/>

                                                        <p:ajax update=":formPrincipal:pInput1" process=":formPrincipal:pInput1" onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"/>
                                                    </p:selectOneRadio>
                                                    <p:message for="selTipoProyecto"></p:message>
                                                </h:panelGrid>

                                                <p:outputLabel value="* Convocatoria:" for="lblConvocatoria" style="font-weight: bold" rendered="#{proyectoController.proyectoSelected.tipo=='I'}"/>
                                                <h:panelGrid columns="2" rendered="#{proyectoController.proyectoSelected.tipo=='I'}">
                                                    <p:outputLabel id="lblConvocatoria" 
                                                                   value="#{(proyectoController.proyectoSelected.convocatoria==null and proyectoController.proyectoSelected.tipo=='I')?'No existe una convocatoria abierta':proyectoController.proyectoSelected.convocatoria.nombre.concat(' (').concat(proyectoController.proyectoSelected.convocatoria.fechaInicioTexto).concat(' - ').concat(proyectoController.proyectoSelected.convocatoria.fechaFinTexto).concat(')')}" 
                                                                   style="#{(proyectoController.proyectoSelected.convocatoria==null and proyectoController.proyectoSelected.tipo=='I')?'color:red':''}"/>
                                                    <p:message for="lblConvocatoria"></p:message>
                                                </h:panelGrid>

                                                <p:outputLabel value="* Departamento:" for="selDepartamentoProyecto" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <p:selectOneMenu id="selDepartamentoProyecto"
                                                                     required="#{not empty param['formPrincipal:btnGrabarP1']}" 
                                                                     disabled="#{!proyectoController.modoEdicion}"
                                                                     converter="omnifaces.SelectItemsConverter"
                                                                     style="width: 350px"
                                                                     value="#{proyectoController.proyectoSelected.departamento}" 
                                                                     >
                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                        <f:selectItems value="#{proyectoController.departamentoList}" var="depProyecto" itemLabel="#{depProyecto.stvsubjDesc}" itemValue="#{depProyecto}"/>
                                                    </p:selectOneMenu>

                                                    <p:message for="selDepartamentoProyecto"></p:message>
                                                </h:panelGrid>





                                                <p:outputLabel value="* Población Beneficiaria:" for="selTipoPoblacion" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <p:selectManyCheckbox id="selTipoPoblacion" 
                                                                          value="#{proyectoController.tipoPoblacionSelectedList}" 
                                                                          disabled="#{!proyectoController.modoEdicion}"
                                                                          converter="omnifaces.SelectItemsConverter">
                                                        <f:selectItems value="#{proyectoController.tipoPoblacionList}" var="tipoPob" itemLabel="#{tipoPob.prdDescripcion}" itemValue="#{tipoPob}" />
                                                    </p:selectManyCheckbox>
                                                    <p:message for="selTipoPoblacion"></p:message>
                                                </h:panelGrid>

                                            </h:panelGrid>


                                            <p:spacer height="10"></p:spacer>
                                            <h:outputText value="PLAZO DE EJECUCIÓN" style="font-size: 14px; font-weight: bold"/>
                                            <h:panelGrid  columns="3" cellpadding="2" >
                                                <p:outputLabel value="* Fecha de Inicio (dd/mm/aaaa):" for="fechaInicioProyecto" style="font-weight: bold"/>
                                                <p:calendar id="fechaInicioProyecto" navigator="true" value="#{proyectoController.proyectoSelected.fechaInicio}" yearRange="2015:2030" size="10" locale="es" pattern="dd/MM/yyyy"
                                                            disabled="#{!proyectoController.modoEdicion}"
                                                            required="#{not empty param['formPrincipal:btnGrabarP1']}">
                                                    <p:ajax event="dateSelect" update=":formPrincipal:lblDuracionProyecto" />
                                                </p:calendar>
                                                <p:message for="fechaInicioProyecto"></p:message>

                                                <p:outputLabel value="* Fecha de Finalización (dd/mm/aaaa):" for="fechaFinProyecto" style="font-weight: bold"/>
                                                <p:calendar id="fechaFinProyecto" navigator="true" value="#{proyectoController.proyectoSelected.fechaFinalizacion}" yearRange="2015:2030" size="10" locale="es" pattern="dd/MM/yyyy"
                                                            disabled="#{!proyectoController.modoEdicion}"
                                                            required="#{not empty param['formPrincipal:btnGrabarP1']}">
                                                    <p:ajax event="dateSelect" update=":formPrincipal:lblDuracionProyecto" />
                                                </p:calendar>
                                                <p:message for="fechaFinProyecto"></p:message>

                                                <h:outputLabel value="Duración:" style="font-weight: bold"/>
                                                <h:outputLabel id="lblDuracionProyecto" value="#{proyectoController.proyectoSelected.duracion}"/>

                                                <p:spacer height="15"></p:spacer>


                                            </h:panelGrid>


                                        </h:panelGrid>
                                        <p:spacer height="1" width="25"></p:spacer>
                                        <h:panelGrid columns="1">

                                            <h:panelGrid columns="2">
                                                <p:outputLabel value="* DATOS DEL DIRECTOR" style="font-size: 14px; font-weight: bold"/>
                                                <p:message for="lblNombreDirectorProyecto"></p:message> 
                                            </h:panelGrid>
                                            <h:panelGrid columns="1">
                                                <h:outputText value="(Ingrese apellidos y/o nombres a buscar)" style="font-weight: bold"/>
                                                <p:autoComplete minQueryLength="3" value="#{proyectoController.nomDocenteBusqueda}" completeMethod="#{proyectoController.completeText}" size="50" required="true"
                                                                disabled="#{!proyectoController.modoEdicion}">
                                                    <p:ajax event="itemSelect" listener="#{proyectoController.onItemSelect}"  update=":formPrincipal:btnGrabarP1, :formPrincipal:datosResp"
                                                            onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"/>
                                                </p:autoComplete>
                                            </h:panelGrid>
                                            <h:panelGrid id="datosResp"  columns="2" cellpadding="2" > 
                                                <p:outputLabel value="Nombres:" for="lblNombreDirectorProyecto" style="font-weight: bold"/>
                                                <p:outputLabel id="lblNombreDirectorProyecto" value="#{proyectoController.docenteSelected.usuNombres}" style="width:300px;"/>

                                                <h:outputLabel value="Apellidos:" style="text-align: left; font-weight: bold"/>
                                                <p:outputLabel value="#{proyectoController.docenteSelected.usuApellidos}" style="width:300px; "/>

                                                <h:outputLabel value="Cargo:" style="text-align: left; font-weight: bold"/>
                                                <p:outputLabel value="#{proyectoController.docenteSelected.cargo}" style="width:300px;"/>

                                                <h:outputLabel value="Departamento:" style="text-align: left; font-weight: bold"/>
                                                <p:outputLabel value="#{proyectoController.docenteSelected.departamento}" style="width:300px;"/>

                                                <h:outputLabel value="Correo Electrónico:" style="text-align: left; font-weight: bold"/>
                                                <p:inputText value="#{proyectoController.docenteSelected.usuEmail}" maxlength="50" required="false" disabled="#{!proyectoController.modoEdicion}" style="width: 240px"></p:inputText>

                                                <p:outputLabel for="telefUsu" value="Teléfono:" style="white-space: pre-line; font-weight: bold" /> 
                                                <p:inputText id="telefUsu" value="#{proyectoController.docenteSelected.usuTelefonoFijo}" maxlength="10" autocomplete="off" required="false" disabled="#{!proyectoController.modoEdicion}" style="width: 80px"></p:inputText>
                                            </h:panelGrid>                                         

                                        </h:panelGrid>



                                    </h:panelGrid>
                                </p:fieldset>
                            </p:panel>


                            <!--tab3: Cobertura y Localización-->
                            <p:panel id="panel3" rendered="#{proyectoController.selectedNodeCode=='1.1.2'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid columns="1" id="h3" rendered="#{!proyectoController.controlGrabar}">
                                    <p:commandButton id="btnEditarP3" value="Editar" title="Editar Información" icon="ui-icon-pencil" 
                                                     update=":formPrincipal:panel3"
                                                     disabled="#{!proyectoController.permitirEditarPerfil}"
                                                     action="#{proyectoController.editarP3()}" 
                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                     >
                                    </p:commandButton>
                                    <h:panelGrid columns="2">
                                        <p:outputLabel value="* Cobertura:" for="selCobertura" style="font-weight: bold"/>
                                        <h:panelGrid columns="2">
                                            <p:selectOneRadio id="selCobertura" value="#{proyectoController.cobertura}" 
                                                              required="#{not empty param['formPrincipal:btnGrabarP1']}"
                                                              disabled="#{!proyectoController.modoEdicion}"
                                                              style="font-weight: normal"
                                                              >
                                                <f:selectItem itemLabel="Nacional" itemValue="1"/>
                                                <f:selectItem itemLabel="Provincial" itemValue="2"/>
                                                <f:selectItem itemLabel="Cantonal" itemValue="3"/>
                                                <f:selectItem itemLabel="Parroquial" itemValue="4"/>
                                                <p:ajax listener="#{proyectoController.seleccionarCobertura}"
                                                        update=":formPrincipal:vinPCobertura" process=":formPrincipal:vinPCobertura" onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"/>
                                            </p:selectOneRadio>
                                            <p:message for="selCobertura"></p:message>
                                        </h:panelGrid>
                                    </h:panelGrid>


                                    <h:outputLabel value="Cobertura y localización:" style="font-weight: bold" rendered="#{proyectoController.cobertura!=1}"/>
                                    <p:dataTable id="dataTableCobertura" value="#{proyectoController.proyectoSelected.parroquiasCobertura}" var="parroquiaCobertura"
                                                 style="width: 100%" paginator="true" rows="10" rowIndexVar="index"  resizableColumns="true" 
                                                 emptyMessage="No se encontraron resultados"
                                                 rendered="#{proyectoController.cobertura!=1}">

                                        <p:column headerText="Nro." style="width:20px">
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>
                                        <p:column headerText="Provincia" style="width: 250px;white-space:pre-line" sortBy="#{parroquiaCobertura.nomProvincia}">
                                            <h:outputText value="#{parroquiaCobertura.nomProvincia}" style="white-space: pre-line; width: 100%"/>
                                        </p:column>
                                        <p:column headerText="Cantón" style="width: 250px;white-space:pre-line" sortBy="#{parroquiaCobertura.nomCanton}"
                                                  rendered="#{proyectoController.cobertura==3 or proyectoController.cobertura==4}">
                                            <h:outputText value="#{parroquiaCobertura.nomCanton}" style="white-space: pre-line; width: 100%"/>
                                        </p:column>
                                        <p:column headerText="Parroquia" style="white-space:pre-line" sortBy="#{parroquiaCobertura.nomParroquia}"
                                                  rendered="#{proyectoController.cobertura==4}">
                                            <h:outputText value="#{parroquiaCobertura.nomParroquia}" style="white-space: pre-line; width: 100%"/>
                                        </p:column>
                                    </p:dataTable>                                             

                                </h:panelGrid>      
                                <p:panel id="p3" visible="#{proyectoController.controlGrabar}" style="border: hidden; ">
                                    <h:panelGrid columns="2" cellpadding="5">
                                        <p:commandButton id="btnGrabarP3" value="Grabar" icon="ui-icon-locked" style="margin: 0;  float: left " 
                                                         title="Graba Información" action="#{proyectoController.registraP3()}" 
                                                         update=":formPrincipal:panel3, :formPrincipal:message1"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                         >
                                        </p:commandButton>
                                        <p:commandButton id="btnCancelarP3" value="Cancelar" icon="ui-icon-arrowreturnthick-1-w" style="margin: 0;  float: left "
                                                         title="Cancela Información" 
                                                         update=":formPrincipal:panel3"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                         action="#{proyectoController.cancelarP3}">
                                        </p:commandButton>
                                    </h:panelGrid>
                                    <h:panelGrid columns="2">
                                        <p:outputLabel value="* Cobertura:" for="selCobertura2" style="font-weight: bold"/>
                                        <h:panelGrid columns="2">
                                            <p:selectOneRadio id="selCobertura2" value="#{proyectoController.cobertura}" 
                                                              required="#{not empty param['formPrincipal:btnGrabarP1']}"
                                                              style="font-weight: normal"
                                                              >
                                                <f:selectItem itemLabel="Nacional" itemValue="1"/>
                                                <f:selectItem itemLabel="Provincial" itemValue="2"/>
                                                <f:selectItem itemLabel="Cantonal" itemValue="3"/>
                                                <f:selectItem itemLabel="Parroquial" itemValue="4"/>
                                                <p:ajax listener="#{proyectoController.seleccionarCobertura}"
                                                        update=":formPrincipal:vinPCobertura" onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"/>
                                            </p:selectOneRadio>
                                            <p:message for="selCobertura2"></p:message>
                                        </h:panelGrid>
                                    </h:panelGrid>
                                    <p:panel id="vinPCobertura" style="text-align: left; border: hidden;" >
                                        <p:tree id="treeLocalizacion" value="#{proyectoController.root3}" var="doc"
                                                selectionMode="checkbox"
                                                rendered="#{proyectoController.cobertura!=1}"
                                                selection="#{proyectoController.selectedNodes2}">
                                            <p:ajax event="select" update=":formPrincipal:h3" listener="#{proyectoController.validarVaciosP3()}" />
                                            <p:ajax event="unselect" update=":formPrincipal:h3" listener="#{proyectoController.validarVaciosP3()}"/>
                                            <p:treeNode>
                                                <h:outputText value="#{doc.nombre}" />
                                            </p:treeNode>
                                            <p:treeNode>
                                                <h:outputText value="#{doc.nombre}" />
                                            </p:treeNode>
                                        </p:tree>
                                    </p:panel>
                                </p:panel>
                            </p:panel>

                            <!--tab2: Origen de los fondos-->
                            <p:panel rendered="#{proyectoController.selectedNodeCode=='1.1.3x'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid columns="2" cellpadding="7" id="h2">
                                    <p:commandButton id="btnGrabarP2" value="Grabar" title="Graba Información" icon="ui-icon-locked" 
                                                     update=":formPrincipal:h2,:formPrincipal:pInput2,:formPrincipal:message1" 
                                                     action="#{proyectoController.registraP1()}"
                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                    </p:commandButton>
                                    <p:commandButton id="btnCancelarP2" value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                     process="@this"
                                                     update=":formPrincipal:h2,:formPrincipal:pInput2" 
                                                     action="#{proyectoController.cancelarPerfil}">
                                    </p:commandButton>

                                </h:panelGrid>
                                <h:panelGrid columns="3" cellpadding="5" id="pInput2">
                                    <p:outputLabel value="* Presupuesto Aporte Universidad (asignación presupuestaria):" for="txtPresupuestoUniv" style="font-weight: bold"/>
                                    <pe:inputNumber id="txtPresupuestoUniv" value="#{proyectoController.proyectoSelected.presupuestoAporteUniv}" decimalPlaces="2" minValue="0" maxValue="1000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP2']}">
                                        <p:ajax event="change" update="formPrincipal:txtPresupuestoTotal"/>
                                    </pe:inputNumber>
                                    <p:message for="txtPresupuestoUniv"></p:message>

                                    <p:outputLabel value="* Presupuesto Aporte Universidad Valorado (sin asignación presupuestaria):" for="txtPresupuestoUnivValorado" style="font-weight: bold"/>
                                    <pe:inputNumber id="txtPresupuestoUnivValorado" value="#{proyectoController.proyectoSelected.presupuestoAporteUnivValorado}" decimalPlaces="2" minValue="0" maxValue="1000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP2']}">
                                        <p:ajax event="change" update="formPrincipal:txtPresupuestoTotal"/>
                                    </pe:inputNumber>
                                    <p:message for="txtPresupuestoUnivValorado"></p:message>

                                    <p:outputLabel value="* Presupuesto Entidad Auspiciante:" for="txtPresupuestoEntidadAuspiciante" style="font-weight: bold"/>
                                    <pe:inputNumber id="txtPresupuestoEntidadAuspiciante" value="#{proyectoController.proyectoSelected.presupuestoEntidadAuspiciante}" decimalPlaces="2" minValue="0" maxValue="1000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP2']}">
                                        <p:ajax event="change" update="formPrincipal:txtPresupuestoTotal"/>
                                    </pe:inputNumber>
                                    <p:message for="txtPresupuestoEntidadAuspiciante"></p:message>

                                    <p:outputLabel value="* Presupuesto contraparte - Comunidad beneficiaria:" for="txtPresupuestoContraparte" style="font-weight: bold"/>
                                    <pe:inputNumber id="txtPresupuestoContraparte" value="#{proyectoController.proyectoSelected.presupuestoContraparte}" decimalPlaces="2" minValue="0" maxValue="1000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP2']}">
                                        <p:ajax event="change" update="formPrincipal:txtPresupuestoTotal"/>
                                    </pe:inputNumber>
                                    <p:message for="txtPresupuestoContraparte"></p:message>

                                    <p:outputLabel value="* Presupuesto Total:" style="font-weight: bold" />
                                    <p:inputText id="txtPresupuestoTotal" value="#{proyectoController.proyectoSelected.presupuestoTotal}" disabled="true" style="width: 70px;">
                                        <f:convertNumber locale="es"  pattern="#,##0.00" />
                                    </p:inputText>                                        
                                </h:panelGrid> 
                            </p:panel>


                            <!--tab4: Detalle de entregables del proyecto-->
                            <p:panel rendered="#{proyectoController.selectedNodeCode=='1.1.4'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid columns="2" cellpadding="7" id="h4">
                                    <p:commandButton value="Editar" title="Editar" icon="ui-icon-pencil"
                                                     action="#{proyectoController.seleccionarEdicion}"
                                                     rendered="#{!proyectoController.modoEdicion}"
                                                     disabled="#{!proyectoController.permitirEditarPerfil}"
                                                     update=":formPrincipal:h4,:formPrincipal:pInput4" >
                                    </p:commandButton>
                                    <p:commandButton id="btnGrabarP4" value="Grabar" title="Graba Información" icon="ui-icon-locked" 
                                                     update=":formPrincipal:h4,:formPrincipal:pInput4,:formPrincipal:message1" 
                                                     rendered="#{proyectoController.modoEdicion}"
                                                     action="#{proyectoController.registraP4()}"
                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                    </p:commandButton>
                                    <p:commandButton id="btnCancelarP4" value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                     process="@this"
                                                     update=":formPrincipal:h4,:formPrincipal:pInput4" 
                                                     rendered="#{proyectoController.modoEdicion}"
                                                     action="#{proyectoController.cancelarPerfil}">
                                    </p:commandButton>

                                </h:panelGrid>

                                <h:panelGrid columns="1" cellpadding="5" id="pInput4">
                                    <p:message for="lblBienes"></p:message>

                                    <p:outputLabel id="lblBienes" value="Bienes:" for="txtBienes" style="font-weight: bold"/>
                                    <pe:ckEditor id="txtBienes" value="#{proyectoController.proyectoSelected.bienes}" 
                                                 readonly="#{!proyectoController.modoEdicion}"
                                                 width="100%"
                                                 height="100"
                                                 toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                 >  
                                    </pe:ckEditor>
                                    <p:message for="txtBienes"></p:message>

                                    <p:outputLabel value="Servicios:" for="txtServicios" style="font-weight: bold"/>
                                    <pe:ckEditor id="txtServicios" value="#{proyectoController.proyectoSelected.servicios}" 
                                                 readonly="#{!proyectoController.modoEdicion}"
                                                 width="100%"
                                                 height="100"
                                                 toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                 >  
                                    </pe:ckEditor>
                                    <p:message for="txtServicios"></p:message>

                                    <p:outputLabel value="Bienes y Servicios" for="txtBienesServicios" style="font-weight: bold"/>
                                    <pe:ckEditor id="txtBienesServicios" value="#{proyectoController.proyectoSelected.bienesServicios}" 
                                                 readonly="#{!proyectoController.modoEdicion}"
                                                 width="100%"
                                                 height="100"
                                                 toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                 >  
                                    </pe:ckEditor>
                                    <p:message for="txtBienesServicios"></p:message>
                                </h:panelGrid> 
                            </p:panel>


                            <!--tab9: Diagnóstico y Problema-->
                            <p:panel rendered="#{proyectoController.selectedNodeCode=='1.2.1'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid columns="2" cellpadding="7" id="h9"> 
                                    <p:commandButton value="Editar" title="Editar" icon="ui-icon-pencil"
                                                     action="#{proyectoController.seleccionarEdicion}"
                                                     rendered="#{!proyectoController.modoEdicion}"
                                                     disabled="#{!proyectoController.permitirEditarPerfil}"
                                                     update=":formPrincipal:h9,:formPrincipal:pInput9" >
                                    </p:commandButton>
                                    <p:commandButton id="btnGrabarP9" value="Grabar" title="Graba Información" icon="ui-icon-locked" 
                                                     update=":formPrincipal:h9,:formPrincipal:pInput9, :formPrincipal:message1" 
                                                     rendered="#{proyectoController.modoEdicion}"
                                                     action="#{proyectoController.registraP1}"
                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                    </p:commandButton>
                                    <p:commandButton id="btnCancelarP9" value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                     process="@this"
                                                     rendered="#{proyectoController.modoEdicion}"
                                                     update=":formPrincipal:h9,:formPrincipal:pInput9" 
                                                     action="#{proyectoController.cancelarPerfil}">
                                    </p:commandButton>

                                </h:panelGrid>
                                <h:panelGrid columns="1" cellpadding="2" id="pInput9">
                                    <h:panelGrid columns="1" cellpadding="2" >
                                        <h:panelGrid columns="2">
                                            <h:panelGrid columns="2">
                                                <p:outputLabel value="* Descripción de la situación actual del área de intervención del proyecto:" for="txtAreaIntervencion" style="font-weight: bold"/>
                                                <img src="#{request.contextPath}/resources/images/ayuda_rapida.png" style="visibility: hidden; width: 15px; cursor: pointer" title="Si es asi, el campus al cual pertenece el programa (seleccionado en Datos Generales) debería también poder agregarse como entidad ejecutora o validar que pueda seleccionar cualquier otra excepto esta"/>
                                            </h:panelGrid>
                                            <p:message for="txtAreaIntervencion"></p:message>
                                        </h:panelGrid>
                                        <pe:ckEditor id="txtAreaIntervencion" value="#{proyectoController.proyectoSelected.areaIntervencion2}" 
                                                     readonly="#{!proyectoController.modoEdicion}"
                                                     width="100%"
                                                     height="100"
                                                     required="#{not empty param['formPrincipal:btnGrabarP9']}"
                                                     toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                     >  
                                        </pe:ckEditor>

                                        <h:panelGrid columns="2">
                                            <p:outputLabel value="* Identificación, descripción y diagnóstico del problema:" for="txtDiagnosticoProblema" style="font-weight: bold"/>
                                            <p:message for="txtDiagnosticoProblema"></p:message>
                                        </h:panelGrid>
                                        <pe:ckEditor id="txtDiagnosticoProblema" value="#{proyectoController.proyectoSelected.diagnosticoProblema2}" 
                                                     readonly="#{!proyectoController.modoEdicion}"
                                                     width="100%"
                                                     height="100"
                                                     required="#{not empty param['formPrincipal:btnGrabarP9']}"
                                                     toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                     >  
                                        </pe:ckEditor>

                                        <h:panelGrid columns="2">
                                            <p:outputLabel value="* Línea Base del proyecto:" for="txtLineaBase" style="font-weight: bold"/>
                                            <p:message for="txtLineaBase"></p:message>
                                        </h:panelGrid>
                                        <pe:ckEditor id="txtLineaBase" value="#{proyectoController.proyectoSelected.lineaBase}" 
                                                     readonly="#{!proyectoController.modoEdicion}"
                                                     width="100%"
                                                     height="100"
                                                     required="#{not empty param['formPrincipal:btnGrabarP9']}"
                                                     toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                     >  
                                        </pe:ckEditor>

                                        <h:panelGrid columns="2">
                                            <p:outputLabel value="* Factores críticos de éxito:" for="txtFactoresCriticos" style="font-weight: bold"/>
                                            <p:message for="txtFactoresCriticos"></p:message>
                                        </h:panelGrid>
                                        <pe:ckEditor id="txtFactoresCriticos" value="#{proyectoController.proyectoSelected.factoresCriticos}" 
                                                     readonly="#{!proyectoController.modoEdicion}"
                                                     width="100%"
                                                     height="100"
                                                     required="#{not empty param['formPrincipal:btnGrabarP9']}"
                                                     toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                     >  
                                        </pe:ckEditor>

                                        <h:panelGrid columns="2">
                                            <p:outputLabel value="* Restricciones/Supuestos::" for="txtRestricciones" style="font-weight: bold"/>
                                            <p:message for="txtRestricciones"></p:message>
                                        </h:panelGrid>
                                        <pe:ckEditor id="txtRestricciones" value="#{proyectoController.proyectoSelected.restricciones}" 
                                                     readonly="#{!proyectoController.modoEdicion}"
                                                     width="100%"
                                                     height="100"
                                                     required="#{not empty param['formPrincipal:btnGrabarP9']}"
                                                     toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                     >  
                                        </pe:ckEditor>
                                    </h:panelGrid>
                                </h:panelGrid>
                            </p:panel>

                            <!--tab10: Diagnóstico y Diagnóstico y Problema-Identificación de Población-->
                            <p:panel id="panel10" rendered="#{proyectoController.selectedNodeCode=='1.2.2'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid columns="2" cellpadding="7" id="h10"> 
                                    <p:commandButton value="Editar" title="Editar" icon="ui-icon-pencil"
                                                     action="#{proyectoController.seleccionarEdicion}"
                                                     rendered="#{!proyectoController.modoEdicion}"
                                                     disabled="#{!proyectoController.permitirEditarPerfil}"
                                                     update=":formPrincipal:panel10" >
                                    </p:commandButton>
                                    <p:commandButton id="btnGrabarP10" value="Grabar" title="Graba Información" icon="ui-icon-locked" 
                                                     update=":formPrincipal:panel10, :formPrincipal:message1" 
                                                     rendered="#{proyectoController.modoEdicion}"
                                                     action="#{proyectoController.registraP1}"
                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                    </p:commandButton>
                                    <p:commandButton id="btnCancelarP10" value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                     process="@this"
                                                     rendered="#{proyectoController.modoEdicion}"
                                                     update=":formPrincipal:panel10" 
                                                     action="#{proyectoController.cancelarPerfil}">
                                    </p:commandButton>

                                </h:panelGrid>
                                <h:panelGrid columns="1" id="pInput10">
                                    <h:outputLabel value="Identificación y caracterización de la población objetivo (beneficiarios):" style="font-weight: bold"/>
                                    <h:panelGrid columns="6" cellpadding="0" cellspacing="0" columnClasses="col1_identificacionPoblacion,col2_identificacionPoblacion, col2_identificacionPoblacion, col2_identificacionPoblacion, col2_identificacionPoblacion, col2_identificacionPoblacion">

                                        <p:spacer height="1"></p:spacer>
                                        <p:outputLabel value="* Hombres" style="font-weight: bold"/>
                                        <p:outputLabel value="* Mujeres" style="font-weight: bold"/>
                                        <p:outputLabel value="* Niños" style="font-weight: bold"/>
                                        <p:outputLabel value="* Personas con capacidades especiales" style="font-weight: bold"/>
                                        <p:outputLabel value="Total" style="font-weight: bold"/>

                                        <p:outputLabel value="* DIRECTOS" style="font-weight: bold"/>
                                        <h:panelGrid columns="2">
                                            <pe:inputNumber id="txtDirectosHombres" value="#{proyectoController.proyectoSelected.nroBeneficiariosDirectosHombres}" decimalPlaces="0" minValue="0" maxValue="100000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP10']}"
                                                            disabled="#{!proyectoController.modoEdicion}">  
                                                <p:ajax event="change" update="formPrincipal:txtTotalDirectos"/>
                                            </pe:inputNumber>
                                            <p:message for="txtDirectosHombres"></p:message>
                                        </h:panelGrid>
                                        <h:panelGrid columns="2">
                                            <pe:inputNumber id="txtDirectosMujeres" value="#{proyectoController.proyectoSelected.nroBeneficiariosDirectosMujeres}" decimalPlaces="0" minValue="0" maxValue="100000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP10']}"
                                                            disabled="#{!proyectoController.modoEdicion}">  
                                                <p:ajax event="change" update="formPrincipal:txtTotalDirectos"/>
                                            </pe:inputNumber>
                                            <p:message for="txtDirectosMujeres"></p:message>
                                        </h:panelGrid>
                                        <h:panelGrid columns="2">
                                            <pe:inputNumber id="txtDirectosNinios" value="#{proyectoController.proyectoSelected.nroBeneficiariosDirectosNinios}" decimalPlaces="0" minValue="0" maxValue="100000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP10']}"
                                                            disabled="#{!proyectoController.modoEdicion}">  
                                                <p:ajax event="change" update="formPrincipal:txtTotalDirectos"/>
                                            </pe:inputNumber>
                                            <p:message for="txtDirectosNinios"></p:message>
                                        </h:panelGrid>
                                        <h:panelGrid columns="2">
                                            <pe:inputNumber id="txtDirectosDiscapac" value="#{proyectoController.proyectoSelected.nroBeneficiariosDirectosDiscapac}" decimalPlaces="0" minValue="0" maxValue="100000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP10']}"
                                                            disabled="#{!proyectoController.modoEdicion}">  
                                                <p:ajax event="change" update="formPrincipal:txtTotalDirectos"/>
                                            </pe:inputNumber>
                                            <p:message for="txtDirectosDiscapac"></p:message>
                                        </h:panelGrid>
                                        <p:inputText id="txtTotalDirectos" value="#{proyectoController.proyectoSelected.totalDirectos}" disabled="true" style="width: 70px">
                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                        </p:inputText>

                                        <p:outputLabel value="* INDIRECTOS" style="font-weight: bold"/>
                                        <h:panelGrid columns="2">
                                            <pe:inputNumber id="txtIndirectosHombres" value="#{proyectoController.proyectoSelected.nroBeneficiariosIndirectosHombres}" decimalPlaces="0" minValue="0" maxValue="100000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP10']}"
                                                            disabled="#{!proyectoController.modoEdicion}">  
                                                <p:ajax event="change" update="formPrincipal:txtTotalIndirectos"/>
                                            </pe:inputNumber>
                                            <p:message for="txtIndirectosHombres"></p:message>
                                        </h:panelGrid>
                                        <h:panelGrid columns="2">
                                            <pe:inputNumber id="txtIndirectosMujeres" value="#{proyectoController.proyectoSelected.nroBeneficiariosIndirectosMujeres}" decimalPlaces="0" minValue="0" maxValue="100000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP10']}"
                                                            disabled="#{!proyectoController.modoEdicion}">  
                                                <p:ajax event="change" update="formPrincipal:txtTotalIndirectos"/>
                                            </pe:inputNumber>
                                            <p:message for="txtIndirectosMujeres"></p:message>
                                        </h:panelGrid>
                                        <h:panelGrid columns="2">
                                            <pe:inputNumber id="txtIndirectosNinios" value="#{proyectoController.proyectoSelected.nroBeneficiariosIndirectosNinios}" decimalPlaces="0" minValue="0" maxValue="100000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP10']}"
                                                            disabled="#{!proyectoController.modoEdicion}">  
                                                <p:ajax event="change" update="formPrincipal:txtTotalDirectos"/>
                                            </pe:inputNumber>
                                            <p:message for="txtIndirectosNinios"></p:message>
                                        </h:panelGrid>
                                        <h:panelGrid columns="2">
                                            <pe:inputNumber id="txtIndirectosDiscapac" value="#{proyectoController.proyectoSelected.nroBeneficiariosIndirectosDiscapac}" decimalPlaces="0" minValue="0" maxValue="100000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP10']}"
                                                            disabled="#{!proyectoController.modoEdicion}">  
                                                <p:ajax event="change" update="formPrincipal:txtTotalIndirectos"/>
                                            </pe:inputNumber>
                                            <p:message for="txtIndirectosDiscapac"></p:message>
                                        </h:panelGrid>
                                        <p:inputText id="txtTotalIndirectos" value="#{proyectoController.proyectoSelected.totalIndirectos}" disabled="true" style="width: 70px">
                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                        </p:inputText>
                                    </h:panelGrid>
                                </h:panelGrid>
                            </p:panel>

                            <!--tab5: Nro. Docentes participantes Por Departamento-->
                            <p:panel id="panel5" rendered="#{proyectoController.selectedNodeCode=='1.2.3'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid columns="2" cellpadding="7" id="h5">
                                    <p:commandButton id="btnAgregarP5" value="Agregar" title="Agregar Información" icon="ui-icon-plus" 
                                                     update=":formPrincipal:h5,:formPrincipal:p5"
                                                     actionListener="#{proyectoController.agregarP5}" 
                                                     rendered="#{!proyectoController.controlGrabar}" 
                                                     disabled="#{!proyectoController.permitirEditarPerfil}"
                                                     >
                                    </p:commandButton>
                                </h:panelGrid>
                                <p:panel id="p5" visible="#{proyectoController.controlGrabar}" style="border: hidden; padding-left: 30px">
                                    <h:panelGrid columns="2" cellpadding="5" cellspacing="0">
                                        <p:commandButton id="btnGrabarP5" value="Grabar" title="Graba Información" icon="ui-icon-locked" 
                                                         update=":formPrincipal:panel5, :formPrincipal:message1" 
                                                         action ="#{proyectoController.registraP5}"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                        </p:commandButton>
                                        <p:commandButton id="btnCancelarP5" value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                         process="@this"
                                                         update=":formPrincipal:panel5" 
                                                         action="#{proyectoController.cancelarP5}">
                                        </p:commandButton>
                                    </h:panelGrid>  
                                    <h:panelGrid columns="3" cellpadding="5" id="pInput5" >
                                        <p:outputLabel value="* Departamento:" for="selDepartamento" style="font-weight: bold"/>
                                        <p:selectOneMenu id="selDepartamento" 
                                                         required="#{not empty param['formPrincipal:btnGrabarP5']}" 
                                                         style="width:100%;" 
                                                         converter="omnifaces.SelectItemsConverter"
                                                         value="#{proyectoController.departamentoProyectoSelected.departamento}" 
                                                         >
                                            <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                            <f:selectItems value="#{proyectoController.departamentoList}" var="dep" itemLabel="#{dep.stvsubjDesc}" itemValue="#{dep}"  />
                                        </p:selectOneMenu>
                                        <p:message for="selDepartamento"></p:message>


                                        <p:outputLabel value="* Nro. docentes participantes:" for="txtNroDocentesParticipantes" style="font-weight: bold"/>
                                        <pe:inputNumber id="txtNroDocentesParticipantes" value="#{proyectoController.departamentoProyectoSelected.nroDocentes}" decimalPlaces="0" minValue="0" maxValue="100000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP5']}">  </pe:inputNumber>                                          
                                        <p:message for="txtNroDocentesParticipantes"></p:message>

                                    </h:panelGrid>
                                </p:panel>                        
                                <h:outputLabel value="Docentes participantes:" style="font-weight: bold"/>
                                <p:dataTable id="dataTDocentesParticipantes" value="#{proyectoController.departamentoProyectoList}" var="docenteProyecto" paginator="true"
                                             rows="10" rowIndexVar="index" resizableColumns="true"
                                             emptyMessage="No se encontraron Resultados"> 
                                    <p:column headerText="Nro." width="20">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Departamento" sortBy="#{docenteProyecto.departamento.stvsubjDesc}">
                                        <h:outputText value="#{docenteProyecto.departamento.stvsubjDesc}" style="white-space: pre-line"/>                                    
                                    </p:column>
                                    <p:column headerText="Nro. docentes participantes" sortBy="#{docenteProyecto.nroDocentes}" width="100" style="white-space: pre-line; ">
                                        <h:outputText value="#{docenteProyecto.nroDocentes}" style="white-space: pre-line; float:right">  
                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Editar" width="40" style="text-align: center">
                                        <p:commandButton icon="ui-icon-pencil"
                                                         title="Editar el registro" action="#{proyectoController.seleccionarEdicion()}"
                                                         update=":formPrincipal:h5,:formPrincipal:p5"
                                                         disabled="#{!proyectoController.permitirEditarPerfil}"
                                                         oncomplete="document.getElementById('formPrincipal:txtNroDocentesParticipantes').focus();">
                                            <f:setPropertyActionListener value="#{docenteProyecto}" target="#{proyectoController.departamentoProyectoSelected}"/>
                                        </p:commandButton>

                                    </p:column>

                                    <p:column headerText="Eliminar" width="40" style="text-align: center">
                                        <p:commandButton id="btnEliminarP5" title="Eliminar el registro" icon="ui-icon-trash"
                                                         disabled="#{!proyectoController.permitirEditarPerfil}"
                                                         onclick="PF('dialogDeleteDocenteProyecto').show();" process="@this" >
                                            <f:setPropertyActionListener value="#{docenteProyecto}" target="#{proyectoController.departamentoProyectoSelected}"/>
                                        </p:commandButton>
                                    </p:column>

                                    <p:columnGroup type="footer">
                                        <p:row>
                                            <p:column colspan="2" style="text-align:right" footerText="Total:" />
                                            <p:column footerText="#{proyectoController.totalDocentesParticipantesStr}" style="text-align: right" >
                                            </p:column>
                                            <p:column colspan="2"/>
                                        </p:row>
                                    </p:columnGroup>                                        
                                </p:dataTable>                                     
                            </p:panel>

                            <!--tab6: Estudiantes participantes-->
                            <p:panel id="panel6" rendered="#{proyectoController.selectedNodeCode=='1.2.4'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid columns="2" cellpadding="7" id="h6">
                                    <p:commandButton id="btnAgregarP6" value="Agregar" title="Agregar Información" icon="ui-icon-plus" 
                                                     actionListener="#{proyectoController.agregarP6}" 
                                                     rendered="#{!proyectoController.controlGrabar}" 
                                                     disabled="#{!proyectoController.permitirEditarPerfil}"
                                                     update=":formPrincipal:h6,:formPrincipal:p6"
                                                     >
                                    </p:commandButton>
                                </h:panelGrid>
                                <p:panel id="p6" visible="#{proyectoController.controlGrabar}" style="border: hidden; padding-left: 30px">
                                    <h:panelGrid columns="2" cellpadding="5" cellspacing="0">
                                        <p:commandButton id="btnGrabarP6" value="Grabar" title="Graba Información" icon="ui-icon-locked" 
                                                         update=":formPrincipal:panel6, :formPrincipal:message1" 
                                                         action ="#{proyectoController.registraP6}"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                        </p:commandButton>
                                        <p:commandButton id="btnCancelarP6" value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                         process="@this"
                                                         update=":formPrincipal:panel6" 
                                                         action="#{proyectoController.cancelarP6}">
                                        </p:commandButton>
                                    </h:panelGrid>   
                                    <h:panelGrid columns="3" cellpadding="5" id="pInput6">
                                        <p:outputLabel value="* Carrera (digite el nombre a buscar):" for="selCarrera" style="font-weight: bold"/>
                                        <p:autoComplete id="selCarrera" minQueryLength="1"
                                                        required="#{not empty param['formPrincipal:btnGrabarP6']}"
                                                        value="#{proyectoController.nomCarreraSeleccionada}" 
                                                        forceSelection="true"
                                                        dropdown="true"
                                                        completeMethod="#{proyectoController.buscarCarrera}" size="70">
                                        </p:autoComplete>
                                        <p:message for="selCarrera"></p:message>


                                        <p:outputLabel value="* Nro. estudiantes participantes:" for="txtNroEstudiantesParticipantes" style="font-weight: bold"/>
                                        <pe:inputNumber id="txtNroEstudiantesParticipantes" value="#{proyectoController.carreraProyectoSelected.nroEstudiantes}" decimalPlaces="0" minValue="0" maxValue="100000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP6']}">  </pe:inputNumber>                                          
                                        <p:message for="txtNroEstudiantesParticipantes"></p:message>

                                    </h:panelGrid>
                                </p:panel>                        
                                <h:outputLabel value="Estudiantes participantes:" style="font-weight: bold"/>
                                <p:dataTable id="dataTEstudiantesParticipantes" value="#{proyectoController.carreraProyectoList}" var="carreraProyecto" paginator="true"
                                             rows="10" rowIndexVar="index" resizableColumns="true"
                                             emptyMessage="No se encontraron Resultados"> 
                                    <p:column headerText="Nro." width="20">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Carrera" sortBy="#{carreraProyecto.carrera.stvmajrDesc}">
                                        <h:outputText value="#{carreraProyecto.carrera.stvmajrDesc}" style="white-space: pre-line"/>                                    
                                    </p:column>
                                    <p:column headerText="Nro. estudiantes participantes" sortBy="#{carreraProyecto.nroEstudiantes}" width="100" style="white-space: pre-line">
                                        <h:outputText value="#{carreraProyecto.nroEstudiantes}" style="white-space: pre-line; float: right">     
                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Editar" width="40" style="text-align: center">
                                        <p:commandButton icon="ui-icon-pencil"
                                                         title="Editar el registro" action="#{proyectoController.editarP6()}"
                                                         update=":formPrincipal:h6, :formPrincipal:p6"
                                                         disabled="#{!proyectoController.permitirEditarPerfil}"
                                                         oncomplete="document.getElementById('formPrincipal:txtNroEstudiantesParticipantes').focus();">
                                            <f:setPropertyActionListener value="#{carreraProyecto}" target="#{proyectoController.carreraProyectoSelected}"/>
                                        </p:commandButton>

                                    </p:column>

                                    <p:column headerText="Eliminar" width="40" style="text-align: center">
                                        <p:commandButton id="btnEliminarP5" title="Eliminar el registro" icon="ui-icon-trash"
                                                         disabled="#{!proyectoController.permitirEditarPerfil}"
                                                         onclick="PF('dialogDeleteEstudianteProyecto').show();" process="@this" >
                                            <f:setPropertyActionListener value="#{carreraProyecto}" target="#{proyectoController.carreraProyectoSelected}"/>
                                        </p:commandButton>
                                    </p:column>
                                    <p:columnGroup type="footer">
                                        <p:row>
                                            <p:column colspan="2" style="text-align:right" footerText="Total:" />
                                            <p:column footerText="#{proyectoController.totalEstudiantesParticipantesStr}" style="text-align: right" >
                                            </p:column>
                                            <p:column colspan="2"/>
                                        </p:row>
                                    </p:columnGroup>                                        

                                </p:dataTable>                                
                            </p:panel>

                            <!--Tab16: Alineamiento del Proyecto-Objetivos PLNBV-->              
                            <p:panel id="panel16" rendered="#{proyectoController.selectedNodeCode=='1.3.1'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid columns="1" cellspacing="5" id="h16">
                                    <p:commandButton id="btnAgregarP16" value="Agregar" title="Agregar Información" icon="ui-icon-plus" 
                                                     update=":formPrincipal:h16, :formPrincipal:p16" 
                                                     actionListener="#{proyectoController.agregarP16}" 
                                                     rendered="#{!proyectoController.controlGrabar}"
                                                     disabled="#{!proyectoController.permitirEditarPerfil}"
                                                     >
                                    </p:commandButton>
                                </h:panelGrid>
                                <p:panel id="p16" visible="#{proyectoController.controlGrabar}" style="padding-left: 30px; border: hidden; ">
                                    <h:panelGrid columns="2" cellpadding="5" cellspacing="0">
                                        <p:commandButton id="btnGrabarP16" value="Grabar" title="Graba Información" icon="ui-icon-locked" 
                                                         update=":formPrincipal:panel16, :formPrincipal:message1" 
                                                         action="#{proyectoController.registraP16()}" 
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                        </p:commandButton>
                                        <p:commandButton id="btnCancelarP16" value="Cancelar" icon="ui-icon-arrowreturnthick-1-w" style="margin: 0;  float: left "
                                                         title="Cancela Información" update=":formPrincipal:p16,:formPrincipal:h16" 
                                                         action="#{proyectoController.cancelarP16(true, false)}">
                                        </p:commandButton>
                                    </h:panelGrid>  
                                    <h:panelGrid columns="2" cellpadding="5">                                                        
                                        <p:outputLabel for="objPlan" value="* Seleccione el Objetivo del Plan Nacional del Buen Vivir" style="font-weight: bold"/>
                                        <p:spacer width="1" height="1"></p:spacer>
                                        <p:selectOneMenu id="objPlan" value="#{proyectoController.objBVivirPadre}" 
                                                         required="#{not empty param['formPrincipal:btnGrabarP16']}" 
                                                         converter="omnifaces.SelectItemsConverter"
                                                         style="width:460px;">
                                            <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                            <f:selectItems value="#{proyectoController.objBVivirPadreList}" var="objPadre" itemLabel="#{objPadre.ordenDescripcion}" itemValue="#{objPadre}"/>
                                            <p:ajax event="change" update=":formPrincipal:subojPlan1" listener="#{proyectoController.bsqSubObjetivos()}"/>
                                        </p:selectOneMenu>
                                        <p:message for="objPlan"></p:message>

                                        <p:outputLabel for="subojPlan1" value="* Seleccione la Política a agregar" style="font-weight: bold"/>
                                        <p:spacer width="1" height="1"></p:spacer>
                                        <p:selectOneMenu id="subojPlan1" value="#{proyectoController.objetivoBVivirSelected.objetivoBVivir}" 
                                                         required="#{not empty param['formPrincipal:btnGrabarP16']}" 
                                                         converter="omnifaces.SelectItemsConverter"
                                                         style="width:460px; ">
                                            <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                            <f:selectItems value="#{proyectoController.objBVivirHijoList}" var="subObj" itemLabel="#{subObj.ordenDescripcion}" itemValue="#{subObj}"/>
                                        </p:selectOneMenu>
                                        <p:message for="subojPlan1"></p:message>
                                    </h:panelGrid>                             
                                </p:panel>                        

                                <h:outputLabel value="¿A qué objetivos del Plan Nacional del Buen Vivir se respalda el Proyecto?" style="font-weight: bold"/>
                                <p:dataTable id="dataTableObjPlan" value="#{proyectoController.proyectoSelected.objetivoBVivirProyectoPadreList}" var="proObjPlan" paginator="true"
                                             expandedRow="true" rows="10" rowIndexVar="index" resizableColumns="true" emptyMessage="No se encontraron resultados" >
                                    <p:ajax event="rowToggle" listener="#{proyectoController.onRowToggleObjetivoBVivir}"/>

                                    <p:column style="width: 20px">
                                        <p:rowToggler/>
                                    </p:column>
                                    <p:column headerText="Nro." style="width: 20px;">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Objetivos del Plan Nacional del Buen Vivir">
                                        <h:outputText value="#{proObjPlan.objetivoBVivir.ordenDescripcion}" style="white-space: pre-line" />
                                    </p:column>

                                    <p:rowExpansion >
                                        <p:panelGrid columns="1" style="border:hidden;width:95%; "  >
                                            <p:dataTable id="dtSubObj" value="#{proObjPlan.svinProgObjHijos}" var="subObjl"
                                                         rendered="#{not empty proObjPlan.svinProgObjHijos}"
                                                         rowIndexVar="index" style="width: 90%; padding-left: 60px">
                                                <p:column headerText="Nro." style="width:20px">
                                                    <h:outputText value="#{index + 1}" />
                                                </p:column>
                                                <p:column headerText="Políticas" sortBy="#{subObjl.objetivoBVivir.svobviDescripcion}">
                                                    <h:outputText value="#{subObjl.objetivoBVivir.ordenDescripcion}" style="white-space: pre-line;width: 250px"/>
                                                </p:column>

                                                <p:column headerText="Eliminar " style="width: 50px; text-align: center" >
                                                    <p:commandButton id="btnEliminarP4" style="margin: 0" title="Eliminar el registro" icon="ui-icon-trash" 
                                                                     disabled="#{!proyectoController.permitirEditarPerfil}"
                                                                     onclick="PF('dialogDeleteObjetivosPlanBVivir').show();" process="@this">
                                                        <f:setPropertyActionListener value="#{subObjl}" target="#{proyectoController.objetivoBVivirSelected}" />
                                                    </p:commandButton>   
                                                </p:column>
                                            </p:dataTable>
                                        </p:panelGrid>
                                    </p:rowExpansion>
                                </p:dataTable>
                            </p:panel>

                            <!--panelIndicadorEstrategia: Alineamiento del Proyecto-Objetivos Estratégicos Institucionales-->
                            <p:panel id="panelIndicadorEstrategia" rendered="#{proyectoController.selectedNodeCode=='1.3.2'}" style="border: hidden; padding-left: 20px;">

                                <h:panelGrid id="panelEdicionIndicadorEstrategia" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <h:panelGrid columns="2" rendered="#{proyectoController.indicadorEstrategiaProyectoSelected==null}">
                                        <p:commandButton value="Agregar Indicador" title="Agregar Indicador" icon="ui-icon-plus" 
                                                         update=":formPrincipal:panelEdicionIndicadorEstrategia"
                                                         disabled="#{!proyectoController.permitirEditarPerfil}"
                                                         actionListener="#{proyectoController.nuevoIndicador}" 
                                                         >
                                        </p:commandButton>
                                        <p:commandButton value="Agregar Estrategia" title="Agregar Estrategia" icon="ui-icon-plus" 
                                                         update=":formPrincipal:panelEdicionIndicadorEstrategia"
                                                         disabled="#{!proyectoController.permitirEditarPerfil}"
                                                         actionListener="#{proyectoController.nuevoEstrategia}" 
                                                         >
                                        </p:commandButton>

                                    </h:panelGrid>                                    
                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%" 
                                                 rendered="#{proyectoController.indicadorEstrategiaProyectoSelected !=null}">
                                        <p:fieldset legend="#{proyectoController.indicadorEstrategiaProyectoSelected.id==null ? (proyectoController.tipoObjetivoEstrategico ==3?'NUEVO INDICADOR':'NUEVA ESTRATEGIA'):'EDICION DE INDICADOR-ESTRATEGIA'}">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarIndicadorEstrategiaProyecto" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelIndicadorEstrategia, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarIndicadorEstrategia()}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelIndicadorEstrategia" 
                                                                 action="#{proyectoController.cancelarIndicadorEstrategia()}">
                                                </p:commandButton>

                                            </h:panelGrid>



                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px">
                                                <p:outputLabel for="selPerspectivaIndicadorEstrategia" value="Perspectiva:" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <p:selectOneMenu id="selPerspectivaIndicadorEstrategia" value="#{proyectoController.perspectivaSelected}" 
                                                                     required="#{not empty param['formPrincipal:btnGrabarIndicadorEstrategiaProyecto']}" 
                                                                     converter="omnifaces.SelectItemsConverter"
                                                                     style="width:460px">
                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                        <f:selectItems value="#{proyectoController.perspectivasList}" var="perspectiva" itemLabel="#{perspectiva.descripcion}" itemValue="#{perspectiva}"/>
                                                        <p:ajax event="change"
                                                                update=":formPrincipal:selObjetivoIndicadorEstrategia" 
                                                                />
                                                    </p:selectOneMenu>
                                                    <p:message for="selPerspectivaIndicadorEstrategia"></p:message>


                                                </h:panelGrid>


                                                <p:outputLabel for="selObjetivoIndicadorEstrategia" value="Objetivo:" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <p:selectOneMenu id="selObjetivoIndicadorEstrategia" value="#{proyectoController.objetivoEstrategicoSelected}" 
                                                                     required="#{not empty param['formPrincipal:btnGrabarIndicadorEstrategiaProyecto']}" 
                                                                     converter="omnifaces.SelectItemsConverter"
                                                                     style="width:460px">
                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                        <f:selectItems value="#{proyectoController.perspectivaSelected.objetivoEstrategicoHijoList}" var="objetivoEstrategico" itemLabel="#{objetivoEstrategico.descripcion}" itemValue="#{objetivoEstrategico}"/>
                                                        <p:ajax event="change" 
                                                                update=":formPrincipal:selIndicadorEstrategia" 
                                                                />
                                                    </p:selectOneMenu> 
                                                    <p:message for="selObjetivoIndicadorEstrategia"></p:message>                                                

                                                </h:panelGrid>

                                                <p:outputLabel for="selIndicadorEstrategia" value="#{proyectoController.tipoObjetivoEstrategico==3?'Indicador:':'Estrategia:'}" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">

                                                    <p:selectOneMenu id="selIndicadorEstrategia" value="#{proyectoController.indicadorEstrategiaProyectoSelected.objetivoEstrategico}" 
                                                                     required="#{not empty param['formPrincipal:btnGrabarIndicadorEstrategiaProyecto']}" 
                                                                     converter="omnifaces.SelectItemsConverter"
                                                                     style="width:460px">
                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                        <f:selectItems value="#{proyectoController.tipoObjetivoEstrategico==3?proyectoController.objetivoEstrategicoSelected.indicadorList:proyectoController.objetivoEstrategicoSelected.estrategiaList}" var="indicadorEstrategia" itemLabel="#{indicadorEstrategia.descripcion}" itemValue="#{indicadorEstrategia}"/>
                                                    </p:selectOneMenu>
                                                    <p:message for="selIndicadorEstrategia"></p:message>                                                

                                                </h:panelGrid>

                                            </h:panelGrid>                                            
                                        </p:fieldset>

                                    </h:panelGrid>                                    
                                </h:panelGrid>
                                <h:outputLabel value="¿A qué objetivos Estratégicos Institucionales apunta el Proyecto?:" style="font-weight: bold"/>
                                <p:dataTable value="#{proyectoController.proyectoSelected.perspectivaList}" var="perspectivaProyecto"
                                             editable="true" rowIndexVar="index"  resizableColumns="true" expandedRow="true"
                                             emptyMessage="No se encontraron resultados">
                                    <p:column style="width: 20px">
                                        <p:rowToggler/>
                                    </p:column>
                                    <p:column headerText="Nro." style="width:20px">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Perspectiva" style="white-space:pre-line">
                                        <h:outputText value="#{perspectivaProyecto.descripcion}" style="white-space: pre-line; "/>
                                    </p:column>
                                    <p:rowExpansion >
                                        <p:panel style="border:hidden; width:95%; padding-left: 40px">
                                            <h:outputLabel value="Objetivos:" style="font-weight: bold"/>
                                            <p:dataTable value="#{perspectivaProyecto.objetivoEstrategicoHijoList}" var="objetivoProyeto"
                                                         rendered="#{not empty perspectivaProyecto.objetivoEstrategicoHijoList}" expandedRow="true" 
                                                         rowIndexVar="index" style="width: 98%">
                                                <p:column style="width: 20px">
                                                    <p:rowToggler/>
                                                </p:column>
                                                <p:column headerText="Nro." style="width:20px">
                                                    <h:outputText value="#{index + 1}"/>
                                                </p:column>
                                                <p:column headerText="Objetivo" style="white-space:pre-line">
                                                    <h:outputText value="#{objetivoProyeto.descripcion}" style="white-space: pre-line; "/>
                                                </p:column>
                                                <p:rowExpansion >
                                                    <p:panel style="border:hidden; width:95%; padding-left: 40px">
                                                        <h:outputLabel rendered="#{not empty objetivoProyeto.indicadorList}" value="Indicadores:" style="font-weight: bold"/>
                                                        <p:dataTable value="#{objetivoProyeto.indicadorList}" var="indicadorProyeto"
                                                                     rendered="#{not empty objetivoProyeto.indicadorList}"
                                                                     rowIndexVar="index" style="width: 98%">
                                                            <p:column headerText="Nro." style="width:20px">
                                                                <h:outputText value="#{index + 1}"/>
                                                            </p:column>
                                                            <p:column headerText="Indicador" style="white-space:pre-line">
                                                                <h:outputText value="#{indicadorProyeto.descripcion}" style="white-space: pre-line; "/>
                                                            </p:column>
                                                            <p:column headerText="Eliminar" width="50" style ="text-align: center">
                                                                <p:commandButton title="Eliminar el registro" icon="ui-icon-trash" 
                                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                                                 action="#{proyectoController.eliminarIndicadorEstrategia}"
                                                                                 disabled="#{!proyectoController.permitirEditarPerfil}"
                                                                                 update=":formPrincipal:panelIndicadorEstrategia, :formPrincipal:message1 ">
                                                                    <f:setPropertyActionListener value="#{indicadorProyeto}" target="#{proyectoController.objetivoEstrategicoSelected}" />
                                                                    <p:confirm header="Confirmación" message="Confirma que desea eliminar el item seleccionado?" icon="ui-icon-alert" />
                                                                </p:commandButton>  
                                                            </p:column>                                                


                                                        </p:dataTable>
                                                        <h:outputLabel rendered="#{not empty objetivoProyeto.estrategiaList}" value="Estrategias:" style="font-weight: bold"/>
                                                        <p:dataTable value="#{objetivoProyeto.estrategiaList}" var="estrategiaProyeto"
                                                                     rendered="#{not empty objetivoProyeto.estrategiaList}"
                                                                     rowIndexVar="index" style="width: 98%">
                                                            <p:column headerText="Nro." style="width:20px">
                                                                <h:outputText value="#{index + 1}"/>
                                                            </p:column>
                                                            <p:column headerText="Estrategia" style="white-space:pre-line">
                                                                <h:outputText value="#{estrategiaProyeto.descripcion}" style="white-space: pre-line; "/>
                                                            </p:column>
                                                            <p:column headerText="Eliminar" width="50" style ="text-align: center">
                                                                <p:commandButton title="Eliminar el registro" icon="ui-icon-trash" 
                                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                                                 disabled="#{!proyectoController.permitirEditarPerfil}"
                                                                                 action="#{proyectoController.eliminarIndicadorEstrategia}"
                                                                                 update=":formPrincipal:panelIndicadorEstrategia, :formPrincipal:message1 ">
                                                                    <f:setPropertyActionListener value="#{estrategiaProyeto}" target="#{proyectoController.objetivoEstrategicoSelected}" />
                                                                    <p:confirm header="Confirmación" message="Confirma que desea eliminar el item seleccionado?" icon="ui-icon-alert" />
                                                                </p:commandButton>  
                                                            </p:column>                                                


                                                        </p:dataTable>

                                                    </p:panel>
                                                </p:rowExpansion>                                                    

                                            </p:dataTable>
                                        </p:panel>
                                    </p:rowExpansion>

                                </p:dataTable>                      
                            </p:panel>        

                            <!--tab18: Alineamiento del Proyecto-Objetivos Provinciales, Cantonales o Paroquiales-->
                            <p:panel id="panel18" rendered="#{proyectoController.selectedNodeCode=='1.3.3'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid columns="1" cellspacing="0" cellpadding="5" id="h18">
                                    <p:commandButton id="btnEditarP18" value="Editar" title="Editar Información" icon="ui-icon-pencil" 
                                                     update=":formPrincipal:panel18" 
                                                     action="#{proyectoController.editarP18()}" 
                                                     rendered="#{!proyectoController.controlGrabar}" 
                                                     disabled="#{!proyectoController.permitirEditarPerfil}"
                                                     >
                                    </p:commandButton>
                                </h:panelGrid>
                                <p:panel id="p18" visible="#{proyectoController.controlGrabar}" style="border: hidden; ">
                                    <h:panelGrid columns="2" cellpadding="5" cellspacing="0">
                                        <p:commandButton id="btnGrabarP18" value="Grabar" title="Graba Información" icon="ui-icon-locked" 
                                                         action="#{proyectoController.registraP18()}" 
                                                         update=":formPrincipal:panel18,:formPrincipal:message1"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                        </p:commandButton>
                                        <p:commandButton id="btnCancelarP18" value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                         update=":formPrincipal:panel18" 
                                                         action="#{proyectoController.cancelarP18}">
                                        </p:commandButton>
                                    </h:panelGrid>  
                                </p:panel>                                  
                                <h:outputLabel for="dataTableObjParroquiales" value="Objetivos Provinciales, Cantonales y Parroquiales:" style="font-weight: bold"/>
                                <p:dataTable id="dataTableObjParroquiales" value="#{proyectoController.proyectoSelected.objetivosProvCanParrOrdenado}" var="ob"
                                             editable="true" style="width: 100%" paginator="true" rows="10" rowIndexVar="index"  resizableColumns="true" 
                                             emptyMessage="No se encontraron resultados">

                                    <p:column headerText="Nro." style="width:20px">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Provincia" style="width: 100px;white-space:pre-line" sortBy="#{ob.nomProvincia}"
                                              rendered="#{proyectoController.proyectoSelected.cobertura!=1}">
                                        <p:cellEditor> 
                                            <f:facet name="output"><h:outputText value="#{ob.nomProvincia}" style="white-space: pre-line; width: 100%"/></f:facet>
                                            <f:facet name="input"><h:outputText value="#{ob.nomProvincia}" style="white-space: pre-line; width: 100%"/></f:facet>
                                        </p:cellEditor>                              
                                    </p:column>
                                    <p:column headerText="Cantón" style="width: 100px;white-space:pre-line" sortBy="#{ob.nomCanton}"
                                              rendered="#{proyectoController.proyectoSelected.cobertura==3 or proyectoController.proyectoSelected.cobertura==4}">
                                        <p:cellEditor>
                                            <f:facet name="output"><h:outputText value="#{ob.nomCanton}" style="white-space: pre-line; width: 100%"/></f:facet>
                                            <f:facet name="input"><h:outputText value="#{ob.nomCanton}" style="white-space: pre-line; width: 100%"/></f:facet>
                                        </p:cellEditor>                               
                                    </p:column>     
                                    <p:column headerText="Parroquia" style="width: 150px;white-space:pre-line" sortBy="#{ob.nomParroquia}"
                                              rendered="#{proyectoController.proyectoSelected.cobertura==4}">                               
                                        <p:cellEditor>
                                            <f:facet name="output"><h:outputText value="#{ob.nomParroquia}" style="white-space: pre-line; width: 100%"/></f:facet>
                                            <f:facet name="input"><h:outputText value="#{ob.nomParroquia}" style="white-space: pre-line; width: 100%"/></f:facet>
                                        </p:cellEditor> 
                                    </p:column>
                                    <p:column headerText="Objetivo" style="white-space:pre-line" sortBy="#{ob.objetivos}" rendered="#{!proyectoController.controlGrabar}">
                                        <h:outputText value="#{ob.objetivos}" style="white-space: pre-line; width: 100%" />
                                    </p:column>                         
                                    <p:column headerText="Objetivo" style="white-space:pre-line" sortBy="#{ob.objetivos}" rendered="#{proyectoController.controlGrabar}">
                                        <p:inputTextarea rows="2" style="width: 100%" value="#{ob.objetivos}" autoResize="false" maxlength="1000"></p:inputTextarea>  
                                    </p:column>

                                </p:dataTable> 
                            </p:panel>



                            <!--panelLineaInvestigacion-->
                            <p:panel id="panelLineaInvestigacion" rendered="#{proyectoController.selectedNodeCode=='1.3.4'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionLineaInvestigacion" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <h:panelGrid columns="1" rendered="#{proyectoController.lineaInvestigacionProyectoSelected==null}">
                                        <p:commandButton id="btnNuevoLineaInvestigacion" value="Agregar" title="Agregar Línea de Investigación" icon="ui-icon-plus" 
                                                         action ="#{proyectoController.nuevoLineaInvestigacion}"
                                                         disabled="#{!proyectoController.permitirEditarPerfil}"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                         update=":formPrincipal:panelLineaInvestigacion"
                                                         >
                                        </p:commandButton>
                                    </h:panelGrid>
                                    <h:panelGrid cellspacing="5" columns="1" style="width: 98%" rendered="#{proyectoController.lineaInvestigacionProyectoSelected!=null}">
                                        <p:fieldset legend="NUEVA LÍNEA DE INVESTIGACIÓN">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px"
                                                         rendered="#{proyectoController.lineaInvestigacionProyectoSelected.id==null}">
                                                <p:commandButton id="btnGrabarLineaInvestigacion" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelLineaInvestigacion, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarLineaInvestigacion}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelEdicionLineaInvestigacion" 
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                                 action="#{proyectoController.cancelarLineaInvestigacion}">
                                                </p:commandButton>
                                            </h:panelGrid>                                          

                                            <h:panelGrid columns="3" cellpadding="0" cellspacing="0" style="margin-bottom: 10px">
                                                <p:outputLabel for="selLineaInvestigacion" value="* Línea de Investigación:" style="font-weight: bold"/>
                                                <p:selectOneMenu id="selLineaInvestigacion" value="#{proyectoController.lineaInvestigacionSelected}" 
                                                                 required="#{not empty param['formPrincipal:btnGrabarLineaInvestigacion']}" 
                                                                 converter="omnifaces.SelectItemsConverter"
                                                                 style="width:460px">
                                                    <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                    <f:selectItems value="#{proyectoController.lineaInvestigacionList}" var="lineaInvestigacion" itemLabel="#{lineaInvestigacion.lineaDescip}" itemValue="#{lineaInvestigacion}"/>
                                                    <p:ajax event="change"
                                                            update=":formPrincipal:selSubLineaInvestigacion" 
                                                            />
                                                </p:selectOneMenu>
                                                <p:message for="selLineaInvestigacion"></p:message>

                                                <p:outputLabel for=":formPrincipal:selSubLineaInvestigacion" value="* SubLinea de Investigación" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <p:selectOneMenu id="selSubLineaInvestigacion" value="#{proyectoController.lineaInvestigacionProyectoSelected.lineaInvestigacion}" 
                                                                     required="#{not empty param['formPrincipal:btnGrabarLineaInvestigacion']}" 
                                                                     converter="omnifaces.SelectItemsConverter"
                                                                     style="width:460px">
                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                        <f:selectItems value="#{proyectoController.lineaInvestigacionSelected.seaLineainvesList}" var="subLineaInvestigacion" itemLabel="#{subLineaInvestigacion.lineaDescip}" itemValue="#{subLineaInvestigacion}"/>
                                                    </p:selectOneMenu> 
                                                    <p:message for=":formPrincipal:selSubLineaInvestigacion"></p:message>                                                

                                                </h:panelGrid>                                             

                                            </h:panelGrid>

                                        </p:fieldset>



                                    </h:panelGrid>
                                    <p:outputLabel value="A qué lineas y sublineas de investigacion apunta el proyecto:" style="font-weight: bold"/>
                                    <p:dataTable id="dtLineaInvestigacion" value="#{proyectoController.proyectoSelected.lineaInvestigacionList}" var="lineaInvest"
                                                 editable="true" rowIndexVar="index"  resizableColumns="true" style="margin-bottom: 10px" expandedRow="#{lineaInvest.expanded}"
                                                 emptyMessage="No se encontraron resultados">
                                        <p:ajax event="rowToggle" listener="#{proyectoController.onRowToggleLineaInvestigacion}"/> 
                                        <p:column width="40">
                                            <p:rowToggler/>
                                        </p:column>
                                        <p:column headerText="Nro." width="20" >
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>
                                        <p:column headerText="Linea de Investigación" style="white-space:pre-line" sortBy="#{lineaInvest.lineaDescip}">
                                            <h:outputText value="#{lineaInvest.lineaDescip}" style="white-space: pre-line;"/>
                                        </p:column>
                                        <p:rowExpansion >
                                            <p:panel style="border:hidden; width:95%; padding-left: 40px">
                                                <h:outputLabel value="SubLíneas de Investigación:" style="font-weight: bold"/>
                                                <p:dataTable value="#{lineaInvest.seaLineainvesList}" var="subLineaInvest"
                                                             rowIndexVar="index" style="width: 98%">
                                                    <p:column headerText="Nro." style="width:20px">
                                                        <h:outputText value="#{index + 1}"/>
                                                    </p:column>
                                                    <p:column headerText="SubLinea de Investigación" style="white-space:pre-line"  sortBy="#{subLineaInvest.lineaDescip}">
                                                        <h:outputText value="#{subLineaInvest.lineaDescip}" style="white-space: pre-line; "/>
                                                    </p:column>
                                                    <p:column headerText="Eliminar" width="38" style="text-align: center" >
                                                        <p:commandButton title="Eliminar el registro" icon="ui-icon-trash" 
                                                                         action="#{proyectoController.eliminarLineaInvestigacion}"
                                                                         disabled="#{!proyectoController.permitirEditarPerfil}"
                                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                                         update=":formPrincipal:panelLineaInvestigacion, :formPrincipal:message1"
                                                                         >
                                                            <f:setPropertyActionListener value="#{subLineaInvest}" target="#{proyectoController.lineaInvestigacionSelected}" />
                                                            <p:confirm header="Confirmación" message="Confirma que desea eliminar el item seleccionado?" icon="ui-icon-alert" />
                                                        </p:commandButton>   
                                                    </p:column>


                                                </p:dataTable>
                                            </p:panel>
                                        </p:rowExpansion>
                                    </p:dataTable>     

                                </h:panelGrid>


                            </p:panel>        


                            <!--tab15: Matriz del Marco Lógico-->
                            <p:panel id="panel15" rendered="#{proyectoController.selectedNodeCode=='1.4'}" style="border: hidden; padding-left: 20px;">
                                <p:focus context="panel15"/>
                                <h:panelGrid id="p15" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <h:panelGrid rendered="#{proyectoController.controlGrabar}"  columns="1" style="width: 100%; ">
                                        <h:panelGrid columns="2" cellpadding="5" cellspacing="0">
                                            <p:commandButton id="btnGrabarP15" value="Grabar" title="Graba Información" icon="ui-icon-locked" 
                                                             update=":formPrincipal:panel15, :formPrincipal:message1" 
                                                             action="#{proyectoController.registraP15}"
                                                             onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                            </p:commandButton>
                                            <p:commandButton id="btnCancelarP15" value="Cancelar" icon="ui-icon-arrowreturnthick-1-w" process="@this"
                                                             title="Cancela Información" update=":formPrincipal:p15" action="#{proyectoController.cancelarP15(false)}">
                                            </p:commandButton>
                                        </h:panelGrid>  
                                        <h:panelGrid  columns="3" cellpadding="5" columnClasses="col1_objetivos">
                                            <p:outputLabel value="#{proyectoController.objetivoProyectoSelected.svopTipo==1 ? '* Fin:':(proyectoController.objetivoProyectoSelected.svopTipo==2?'* Objetivo General:':(proyectoController.objetivoProyectoSelected.svopTipo==3?'* Objetivo Específico:':'* Actividad:'))}" for="txtObjetivo15" style="font-weight: bold"/>
                                            <p:inputTextarea id="txtObjetivo15" cols="150" rows="3" value="#{proyectoController.objetivoProyectoSelected.svopObjetivoProy}" maxlength="1000" required="#{not empty param['formPrincipal:btnGrabarP15']}"></p:inputTextarea>
                                            <p:message for="txtObjetivo15"></p:message>
                                        </h:panelGrid>

                                        <h:panelGrid columns="9" cellpadding="5" columnClasses="col1_objetivos">

                                            <p:outputLabel for="selIndicadorTipo" value="* Tipo Indicador:" style="font-weight: bold"/>
                                            <p:selectOneMenu id="selIndicadorTipo" 
                                                             required="#{not empty param['formPrincipal:btnGrabarP15']}" 
                                                             style="width:70px;" 
                                                             value="#{proyectoController.objetivoProyectoSelected.indicadorTipo}" 
                                                             >
                                                <f:selectItem itemLabel="Valor" itemValue="1"/>
                                                <f:selectItem itemLabel="Porcentaje" itemValue="2"/>
                                            </p:selectOneMenu>
                                            <p:message for="selIndicadorTipo"></p:message>

                                            <p:outputLabel for="txtIndicadorValor" value="* Valor Indicador:" style="font-weight: bold"/>
                                            <pe:inputNumber id="txtIndicadorValor" value="#{proyectoController.objetivoProyectoSelected.indicadorValor}" decimalPlaces="0" minValue="0" maxValue="1000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarP15']}"
                                                            >  
                                            </pe:inputNumber>
                                            <p:message for="txtIndicadorValor"></p:message>

                                            <p:outputLabel for="txtIndicador15" value="* Descripción Indicador:" style="font-weight: bold"/>
                                            <p:inputTextarea id="txtIndicador15" cols="60" rows="3" value="#{proyectoController.objetivoProyectoSelected.svopIndicador}" maxlength="1000" required="#{not empty param['formPrincipal:btnGrabarP15']}"></p:inputTextarea>                             
                                            <p:message for="txtIndicador15"></p:message>
                                        </h:panelGrid>

                                        <h:panelGrid columns="3" cellpadding="5" columnClasses="col1_objetivos">
                                            <p:outputLabel value="* Medio de verificación:" for="txtIndicador15" style="font-weight: bold"/>
                                            <p:inputTextarea id="txtMedioVerificacion15" cols="150" rows="3" value="#{proyectoController.objetivoProyectoSelected.svopMverifica}" maxlength="1000" required="#{not empty param['formPrincipal:btnGrabarP15']}"></p:inputTextarea>                             
                                            <p:message for="txtMedioVerificacion15"></p:message>

                                            <p:outputLabel for="txtSupuestos15" value="* Supuestos:" style="font-weight: bold"/>
                                            <p:inputTextarea id="txtSupuestos15" cols="150" rows="3" value="#{proyectoController.objetivoProyectoSelected.svopSupuestos}" maxlength="1000" required="#{not empty param['formPrincipal:btnGrabarP15']}"></p:inputTextarea>                             
                                            <p:message for="txtSupuestos15"></p:message>

                                        </h:panelGrid>
                                    </h:panelGrid>

                                </h:panelGrid>
                                <h:outputLabel for="dataTObjetivos" value="Matriz del Marco Lógico:" style="font-weight: bold"/>
                                <p:dataTable id="dataTObjetivos" value="#{proyectoController.proyectoSelected.objetivoProyectoPadreList}" var="objetivoProyecto" paginator="false"
                                             expandedRow="#{objetivoProyecto.expanded}" rows="10" rowIndexVar="index" resizableColumns="false"
                                             emptyMessage="No se encontraron Resultados"> 
                                    <p:ajax event="rowToggle" listener="#{proyectoController.onRowToggleObjetivoProyecto}"/> 
                                    <p:column style="width: 20px" rendered="false">
                                        <p:rowToggler rendered="#{objetivoProyecto.svopTipo!=1}"/>
                                    </p:column>
                                    <p:column headerText="Nro." width="20" rendered="false" >
                                        <h:outputText value="#{objetivoProyecto.svopOrden}"/>
                                    </p:column>
                                    <p:column headerText="" width="70">
                                        <h:outputText value="#{objetivoProyecto.tipoStr}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Descripción" width="140"> 
                                        <h:outputText value="#{objetivoProyecto.svopObjetivoProy}" style="white-space: pre-line;"/>
                                    </p:column>
                                    <p:column headerText="Tipo Indicador" width="50">
                                        <h:outputText value="#{objetivoProyecto.indicadorTipo==1?'Valor':(objetivoProyecto.indicadorTipo==2?'Porcentaje':'')}" style="white-space: pre-line;"/>
                                    </p:column>
                                    <p:column headerText="Valor Indicador" width="50">
                                        <h:outputText value="#{objetivoProyecto.indicadorValor}" style="white-space: pre-line;">
                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Descripción Indicador" width="140">
                                        <h:outputText value="#{objetivoProyecto.svopIndicador}" style="white-space: pre-line;"/>
                                    </p:column>
                                    <p:column headerText="Medio de verificación" width="140">
                                        <h:outputText value="#{objetivoProyecto.svopMverifica}" style="white-space: pre-line;"/>
                                    </p:column>
                                    <p:column headerText="Supuestos">
                                        <h:outputText value="#{objetivoProyecto.svopSupuestos}" style="white-space: pre-line;"/>
                                    </p:column>
                                    <p:column headerText="Editar" width="35" style ="text-align: center">
                                        <p:commandButton icon="ui-icon-pencil"
                                                         title="Editar el registro" action="#{proyectoController.seleccionarEdicion()}"
                                                         disabled="#{!proyectoController.permitirEditarPerfil}"
                                                         update=":formPrincipal:panel15">
                                            <f:setPropertyActionListener value="#{objetivoProyecto}" target="#{proyectoController.objetivoProyectoSelected}"/>
                                        </p:commandButton>

                                    </p:column> 
                                    <p:column headerText="Eliminar" width="38" style="text-align: center" >
                                        <p:commandButton title="Eliminar el registro" icon="ui-icon-trash" 
                                                         disabled="true"
                                                         action="#{proyectoController.eliminarP15()}"
                                                         update=":formPrincipal:panel15"
                                                         >
                                            <f:setPropertyActionListener value="#{componente}" target="#{proyectoController.objetivoProyectoSelected}" />
                                            <p:confirm header="Confirmación" message="Confirma que desea eliminar el objetivo seleccionado?" icon="ui-icon-alert" />
                                        </p:commandButton>   
                                    </p:column>

                                    <p:rowExpansion  >
                                        <p:panel style="border:hidden; width:95%; padding-left: 40px">
                                            <h:outputLabel value="Componentes (objetivos específicos):" style="font-weight: bold"/>
                                            <p:commandButton value="" title="Agregar Componente (Objetivo Específico)" icon="ui-icon-plus"
                                                             style="width: 30px; height: 20px"
                                                             action="#{proyectoController.agregarP15}"
                                                             disabled="#{!proyectoController.permitirEditarPerfil}"
                                                             update=":formPrincipal:panel15"
                                                             >
                                                <f:setPropertyActionListener value="#{objetivoProyecto}" target="#{proyectoController.objetivoProyectoPadreSelected}"/>
                                            </p:commandButton>
                                            <p:dataTable id="dataTComponentes" value="#{objetivoProyecto.svinObjetivoHijoList}" var="componente"
                                                         expandedRow="#{componente.expanded}" rowIndexVar="index" styleClass="hide-column-names"
                                                         emptyMessage="No existen registros"> 
                                                <p:ajax event="rowToggle" listener="#{proyectoController.onRowToggleObjetivoProyecto}"/>
                                                <p:column style="width: 20px" rendered="false">
                                                    <p:rowToggler/> 
                                                </p:column>
                                                <p:column headerText="Nro." style="width: 20px">
                                                    <h:outputText value="#{componente.svopOrden}" />
                                                </p:column>
                                                <p:column headerText="Descripción" style="width: 150px"> 
                                                    <h:outputText value="#{componente.svopObjetivoProy}" style="white-space: pre-line;"/>
                                                </p:column>
                                                <p:column headerText="Tipo Indicador" style="width: 50px">
                                                    <h:outputText value="#{componente.indicadorTipo==1?'Valor':'Porcentaje'}" style="white-space: pre-line;"/>
                                                </p:column>
                                                <p:column headerText="Valor Indicador" style="width: 50px">
                                                    <h:outputText value="#{componente.indicadorValor}" style="white-space: pre-line;">
                                                        <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Descripción Indicador" style="width: 140px">
                                                    <h:outputText value="#{componente.svopIndicador}" style="white-space: pre-line;"/>
                                                </p:column>
                                                <p:column headerText="Medio de verificación" style="width: 140px">
                                                    <h:outputText value="#{componente.svopMverifica}" style="white-space: pre-line;"/>
                                                </p:column>
                                                <p:column headerText="Supuestos">
                                                    <h:outputText value="#{componente.svopSupuestos}" style="white-space: pre-line;"/>
                                                </p:column>
                                                <p:column headerText="Editar" style ="width: 30px; text-align: center">
                                                    <p:commandButton icon="ui-icon-pencil"
                                                                     title="Editar el registro" action="#{proyectoController.seleccionarEdicion()}"
                                                                     disabled="#{!proyectoController.permitirEditarPerfil}"
                                                                     update=":formPrincipal:panel15"
                                                                     >
                                                        <f:setPropertyActionListener value="#{componente}" target="#{proyectoController.objetivoProyectoSelected}"/>
                                                    </p:commandButton>

                                                </p:column>                                                    
                                                <p:column headerText="Eliminar"  style ="width: 30px; text-align: center">
                                                    <p:commandButton title="Eliminar el registro" icon="ui-icon-trash" 
                                                                     disabled="#{!proyectoController.permitirEditarPerfil}"
                                                                     update=":formPrincipal:panel15"
                                                                     action="#{proyectoController.eliminarP15()}">
                                                        <f:setPropertyActionListener value="#{componente}" target="#{proyectoController.objetivoProyectoSelected}" />
                                                        <p:confirm header="Confirmación" message="Confirma que desea eliminar el objetivo seleccionado?" icon="ui-icon-alert" />
                                                    </p:commandButton>   
                                                </p:column>
                                                <p:rowExpansion >
                                                    <p:panel style="border:hidden;width:98%; padding-left: 30px"  >
                                                        <h:outputLabel value="Actividades:" style="font-weight: bold"/>
                                                        <p:commandButton value="" title="Agregar Actividad" icon="ui-icon-plus"
                                                                         style="width: 30px; height: 20px"
                                                                         action="#{proyectoController.agregarP15}"
                                                                         disabled="#{!proyectoController.permitirEditarPerfil}"
                                                                         update=":formPrincipal:panel15"
                                                                         >
                                                            <f:setPropertyActionListener value="#{componente}" target="#{proyectoController.objetivoProyectoPadreSelected}"/>
                                                        </p:commandButton>

                                                        <p:dataTable id="dataTActividades" value="#{componente.svinObjetivoHijoList}" var="actividad"
                                                                     emptyMessage="No existen registros"
                                                                     rowIndexVar="index">
                                                            <p:ajax event="rowToggle" listener="#{proyectoController.onRowToggleObjetivoProyecto}"/>
                                                            <p:column headerText="Nro." style ="width: 40px;">
                                                                <table style="width: 40px">
                                                                    <tr>
                                                                        <td style="padding: 0px; text-align: center; border: hidden">
                                                                            <h:outputText value="#{actividad.svopOrden}" />
                                                                        </td>
                                                                        <td style="padding: 0px; border: hidden">
                                                                            <table style="width: 20px">
                                                                                <tr>
                                                                                    <td style="padding: 0px; border: hidden">
                                                                                        <p:commandButton icon="ui-icon-triangle-1-n"
                                                                                                         disabled="#{actividad.svopOrden==1}"
                                                                                                         style="width: 20px; height: 15px"
                                                                                                         title="Cambiar orden(Subir)" action="#{proyectoController.cambiarOrdenActividad(-1)}" 
                                                                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                                                                         update=":formPrincipal:dataTObjetivos, :formPrincipal:message1"
                                                                                                         >
                                                                                            <f:setPropertyActionListener value="#{actividad}" target="#{proyectoController.objetivoProyectoSelected}"/>
                                                                                        </p:commandButton>                         
                                                                                    </td>
                                                                                </tr>
                                                                                <tr>
                                                                                    <td style="padding: 0px; border: hidden">
                                                                                        <p:commandButton icon="ui-icon-triangle-1-s"
                                                                                                         disabled="#{actividad.svopOrden==componente.nroHijos}"
                                                                                                         style="width: 20px; height: 15px"
                                                                                                         title="Cambiar orden(Bajar)" action="#{proyectoController.cambiarOrdenActividad(1)}"
                                                                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                                                                         update=":formPrincipal:dataTObjetivos, :formPrincipal:message1"
                                                                                                         >
                                                                                            <f:setPropertyActionListener value="#{actividad}" target="#{proyectoController.objetivoProyectoSelected}"/>
                                                                                        </p:commandButton>                                                        
                                                                                    </td>
                                                                                </tr>
                                                                            </table>
                                                                        </td>
                                                                    </tr>
                                                                </table>                                                                    
                                                            </p:column>
                                                            <p:column headerText="Descripción" style ="width: 90px;"> 
                                                                <h:outputText value="#{actividad.svopObjetivoProy}" style="white-space: pre-line;"/>
                                                            </p:column>
                                                            <p:column headerText="Tipo Indicador" style ="width: 50px;">
                                                                <h:outputText value="#{actividad.indicadorTipo==1?'Valor':'Porcentaje'}" style="white-space: pre-line;"/>
                                                            </p:column>
                                                            <p:column headerText="Valor Indicador" style ="width: 50px;">
                                                                <h:outputText value="#{actividad.indicadorValor}" style="white-space: pre-line;">
                                                                    <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                                                </h:outputText>
                                                            </p:column>
                                                            <p:column headerText="Descripción Indicador" style ="width: 140px;">
                                                                <h:outputText value="#{actividad.svopIndicador}" style="white-space: pre-line;"/>
                                                            </p:column>
                                                            <p:column headerText="Medio de verificación" style ="width: 140px;">
                                                                <h:outputText value="#{actividad.svopMverifica}" style="white-space: pre-line;"/>
                                                            </p:column>
                                                            <p:column headerText="Supuestos">
                                                                <h:outputText value="#{actividad.svopSupuestos}" style="white-space: pre-line;"/>
                                                            </p:column>
                                                            <p:column headerText="Editar" style ="width: 30px; text-align: center">
                                                                <p:commandButton icon="ui-icon-pencil"
                                                                                 title="Editar el registro" action="#{proyectoController.seleccionarEdicion()}"
                                                                                 disabled="#{!proyectoController.permitirEditarPerfil}"
                                                                                 update=":formPrincipal:panel15"
                                                                                 >
                                                                    <f:setPropertyActionListener value="#{actividad}"  target="#{proyectoController.objetivoProyectoSelected}"/>
                                                                </p:commandButton>

                                                            </p:column>     
                                                            <p:column headerText="Eliminar" style="width: 30px;text-align: center" >
                                                                <p:commandButton title="Eliminar el registro" icon="ui-icon-trash" 
                                                                                 disabled="#{!proyectoController.permitirEditarPerfil}"
                                                                                 update=":formPrincipal:panel15"
                                                                                 action="#{proyectoController.eliminarP15()}">
                                                                    <f:setPropertyActionListener value="#{actividad}" target="#{proyectoController.objetivoProyectoSelected}" />
                                                                    <p:confirm header="Confirmación" message="Confirma que desea eliminar la actividad seleccionada?" icon="ui-icon-alert" />
                                                                </p:commandButton>    
                                                            </p:column>
                                                        </p:dataTable>
                                                    </p:panel>
                                                </p:rowExpansion>                                                        
                                            </p:dataTable>
                                        </p:panel>
                                    </p:rowExpansion>                                        
                                </p:dataTable>
                            </p:panel>

                            <!--tab13: Viabilidad y Plan de Sostenibilidad-->
                            <p:panel rendered="#{proyectoController.selectedNodeCode=='1.5'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid columns="2" cellpadding="7" id="h13">
                                    <p:commandButton value="Editar" title="Editar" icon="ui-icon-pencil"
                                                     action="#{proyectoController.seleccionarEdicion}"
                                                     rendered="#{!proyectoController.modoEdicion}"
                                                     disabled="#{!proyectoController.permitirEditarPerfil}"
                                                     update=":formPrincipal:h13,:formPrincipal:pInput13" >
                                    </p:commandButton>
                                    <p:commandButton id="btnGrabarP13" value="Grabar" title="Graba Información" icon="ui-icon-locked" 
                                                     update=":formPrincipal:h13,:formPrincipal:pInput13,:formPrincipal:message1" 
                                                     rendered="#{proyectoController.modoEdicion}"
                                                     action="#{proyectoController.registraP1()}"
                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                    </p:commandButton>
                                    <p:commandButton id="btnCancelarP13" value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                     process="@this"
                                                     update=":formPrincipal:h13,:formPrincipal:pInput13" 
                                                     rendered="#{proyectoController.modoEdicion}"
                                                     action="#{proyectoController.cancelarPerfil}"
                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                    </p:commandButton>

                                </h:panelGrid>
                                <h:panelGrid columns="1" cellpadding="1" id="pInput13">
                                    <h:panelGrid columns="2">
                                        <p:outputLabel  for="viaTecnica" value="* Viabilidad Técnica:" style="font-weight: bold"/>
                                        <p:message for="viaTecnica"></p:message>
                                    </h:panelGrid>
                                    <pe:ckEditor id="viaTecnica" value="#{proyectoController.proyectoSelected.viabilidadTecnica}" 
                                                 readonly="#{!proyectoController.modoEdicion}"
                                                 width="100%"
                                                 height="100"
                                                 required="#{not empty param['formPrincipal:btnGrabarP13']}"
                                                 toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                 >  
                                    </pe:ckEditor>

                                    <h:panelGrid columns="2">
                                        <p:outputLabel for="perdPais" value="* ¿Qué perdería el país si el proyecto no se ejecuta en este periodo?:" style="font-weight: bold"/>
                                        <p:message for="perdPais"></p:message>
                                    </h:panelGrid>
                                    <pe:ckEditor id="perdPais" value="#{proyectoController.proyectoSelected.perderiaPais}" 
                                                 readonly="#{!proyectoController.modoEdicion}"
                                                 width="100%"
                                                 height="100"
                                                 required="#{not empty param['formPrincipal:btnGrabarP13']}"
                                                 toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                 >  
                                    </pe:ckEditor>

                                    <h:panelGrid columns="2">
                                        <p:outputLabel for="resulImp" value="* ¿Cuáles son los resultados o impactos esperados del proyecto?:" style="font-weight: bold"/>
                                        <p:message for="resulImp"></p:message>
                                    </h:panelGrid>
                                    <pe:ckEditor id="resulImp" value="#{proyectoController.proyectoSelected.resultadosEsperados}" 
                                                 readonly="#{!proyectoController.modoEdicion}"
                                                 width="100%"
                                                 height="100"
                                                 required="#{not empty param['formPrincipal:btnGrabarP13']}"
                                                 toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                 >  
                                    </pe:ckEditor>

                                    <h:panelGrid columns="2">
                                        <p:outputLabel for="impactoAmb" value="* ¿Análisis de impacto ambiental?:" style="font-weight: bold"/>
                                        <p:message for="impactoAmb"></p:message>
                                    </h:panelGrid>
                                    <pe:ckEditor id="impactoAmb" value="#{proyectoController.proyectoSelected.impactoAmbiental}" 
                                                 readonly="#{!proyectoController.modoEdicion}"
                                                 width="100%"
                                                 height="100"
                                                 required="#{not empty param['formPrincipal:btnGrabarP13']}"
                                                 toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                 >  
                                    </pe:ckEditor>


                                    <h:panelGrid columns="2">
                                        <p:outputLabel for="sostenibilidadSocial" value="* Sostenibilidad social: equidad, género, participación ciudadana:" style="font-weight: bold"/>
                                        <p:message for="sostenibilidadSocial"></p:message>
                                    </h:panelGrid>
                                    <pe:ckEditor id="sostenibilidadSocial" value="#{proyectoController.proyectoSelected.sostenibilidadSocial}" 
                                                 readonly="#{!proyectoController.modoEdicion}"
                                                 width="100%"
                                                 height="100"
                                                 required="#{not empty param['formPrincipal:btnGrabarP13']}"
                                                 toolbar="[['SelectAll','-', 'Table' , 'HorizontalRule','-' ,'Cut','Copy','Paste','-', 'Bold','Underline','Italic','-','JustifyLeft','JustifyCenter','JustifyRight','JustifyBlock' , '-' , 'NumberedList', 'BulletedList', 'Outdent' , 'Indent', '-', 'Styles', 'Format','Font','FontSize','TextColor','BGColor']]"
                                                 >  
                                    </pe:ckEditor>

                                </h:panelGrid> 
                            </p:panel>


                            <!--panelPresupuestoDetallado-->
                            <p:panel id="panelPresupuestoDetallado" rendered="#{proyectoController.selectedNodeCode=='1.6'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionPresupuestoDetallado" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <h:panelGrid columns="2" rendered="#{proyectoController.presupuestoProyectoSelected==null}">
                                        <p:commandButton value="Agregar" title="Agregar detalle de presupuesto" icon="ui-icon-plus" 
                                                         update=":formPrincipal:panelEdicionPresupuestoDetallado"
                                                         actionListener="#{proyectoController.nuevoPresupuestoProyecto}" 
                                                         disabled="#{!proyectoController.permitirEditarPerfil}"
                                                         >
                                        </p:commandButton>
                                    </h:panelGrid>
                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%" 
                                                 rendered="#{proyectoController.presupuestoProyectoSelected !=null}">
                                        <p:fieldset legend="#{proyectoController.presupuestoProyectoSelected.id==null ? 'NUEVO DETALLE DE PRESUPUESTO':'EDICION DE DETALLE DE PRESUPUESTO'}">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarPresupuestoDetallado" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelPresupuestoDetallado, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarPresupuestoProyecto()}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelPresupuestoDetallado" 
                                                                 action="#{proyectoController.cancelarPresupuestoProyecto()}">
                                                </p:commandButton>
                                            </h:panelGrid>                                          

                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px" columnClasses="col1_presupuesto">

                                                <p:outputLabel value="* Tipo Aporte:" for="txtTipoAportePresupuestoDetallado" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <p:selectOneMenu id="txtTipoAportePresupuestoDetallado"
                                                                     required="#{not empty param['formPrincipal:btnGrabarPresupuestoDetallado']}" 
                                                                     style="width:160px;" 
                                                                     value="#{proyectoController.presupuestoProyectoSelected.tipo}" 
                                                                     disabled="#{proyectoController.presupuestoProyectoSelected.id!=null}" 
                                                                     >
                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                        <f:selectItem itemLabel="Universidad" itemValue="1"/>
                                                        <f:selectItem itemLabel="Entidad Auspiciante" itemValue="2"/>
                                                        <f:selectItem itemLabel="Comunidad Beneficiaria" itemValue="3"/>
                                                        <p:ajax event="change" update=":formPrincipal:panelDatos"  listener="#{proyectoController.onchangeTipoAporte}" />
                                                    </p:selectOneMenu>
                                                    <p:message for="txtTipoAportePresupuestoDetallado"></p:message>
                                                </h:panelGrid>
                                            </h:panelGrid>
                                            <h:panelGrid id="panelDatos" columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px" columnClasses="col1_presupuesto">

                                                <p:outputLabel for="selTipoGastoPresupuestoDetallado" value="* Tipo de Gasto:" style="font-weight: bold"
                                                               rendered="#{proyectoController.presupuestoProyectoSelected.tipo==1 and proyectoController.proyectoSelected.tipo=='C'}"/>
                                                <p:outputLabel for="selTipoGastoPresupuestoDetallado2" value="* Tipo de Gasto:" style="font-weight: bold"
                                                               rendered="#{proyectoController.presupuestoProyectoSelected.tipo==1 and proyectoController.proyectoSelected.tipo=='I'}"/>
                                                <h:panelGrid columns="2" rendered="#{proyectoController.presupuestoProyectoSelected.tipo==1}">
                                                    <p:selectOneMenu id="selTipoGastoPresupuestoDetallado" value="#{proyectoController.presupuestoProyectoSelected.tipoGasto}" 
                                                                     required="#{not empty param['formPrincipal:btnGrabarPresupuestoDetallado']}"
                                                                     rendered="#{proyectoController.proyectoSelected.tipo=='C'}"
                                                                     converter="omnifaces.SelectItemsConverter"
                                                                     style="width:160px"
                                                                     >
                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                        <f:selectItem itemLabel="Permanente" itemValue="C"/>
                                                        <p:ajax event="change" update=":formPrincipal:panelDatos2" listener="#{proyectoController.onchangeTipoGasto}" />
                                                    </p:selectOneMenu>
                                                    <p:selectOneMenu id="selTipoGastoPresupuestoDetallado2" value="#{proyectoController.presupuestoProyectoSelected.tipoGasto}" 
                                                                     required="#{not empty param['formPrincipal:btnGrabarPresupuestoDetallado']}"
                                                                     rendered="#{proyectoController.proyectoSelected.tipo=='I'}"
                                                                     converter="omnifaces.SelectItemsConverter"
                                                                     style="width:160px"
                                                                     >
                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                        <f:selectItem itemLabel="Permanente" itemValue="C"/>
                                                        <f:selectItem itemLabel="No Permanente" itemValue="I"/>
                                                        <p:ajax event="change" update=":formPrincipal:panelDatos" listener="#{proyectoController.onchangeTipoGasto}" />
                                                    </p:selectOneMenu>                                                    
                                                    <p:message for="selTipoGastoPresupuestoDetallado2"></p:message>
                                                </h:panelGrid>                                                    

                                                <p:outputLabel id="lblBienServicioPresupuestoDetallado" value="#{proyectoController.presupuestoProyectoSelected.tipo==1?'* Partida Presupuestaria:':'* Bien y/o Servicio:'}" for="txtBienServicioPresupuestoDetallado" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid id="panelDatos2" columns="3" >
                                                    <p:commandButton title="Seleccionar Partida Presupuestaria(Permanente)" icon="ui-icon-search"
                                                                     onclick="PF('dlgPartidaPresupuestaria').show();" process="@this" 
                                                                     update=":formPrincipal:formModal"
                                                                     rendered="#{proyectoController.presupuestoProyectoSelected.tipo==1 and proyectoController.presupuestoProyectoSelected.tipoGasto!='I'}"
                                                                     disabled="#{proyectoController.presupuestoProyectoSelected.tipoGasto==null}"
                                                                     >
                                                    </p:commandButton>
                                                    <p:commandButton title="Seleccionar Partida Presupuestaria(No Permanente)" icon="ui-icon-search"
                                                                     onclick="PF('dlgPartidaPresupuestaria').show();" process="@this" 
                                                                     update=":formPrincipal:formModal"
                                                                     rendered="#{proyectoController.presupuestoProyectoSelected.tipo==1 and proyectoController.presupuestoProyectoSelected.tipoGasto=='I'}"
                                                                     >
                                                    </p:commandButton>
                                                    <p:inputTextarea id="txtBienServicioPresupuestoDetallado" value="#{proyectoController.presupuestoProyectoSelected.tipo==1?proyectoController.presupuestoProyectoSelected.nombreCompleto:proyectoController.presupuestoProyectoSelected.bienServicio}"
                                                                     cols="80" rows="3" maxlength="150"
                                                                     disabled="#{proyectoController.presupuestoProyectoSelected.tipo==1}"
                                                                     required="#{not empty param['formPrincipal:btnGrabarPresupuestoDetallado']}">
                                                    </p:inputTextarea>
                                                    <p:message for="txtBienServicioPresupuestoDetallado"></p:message>
                                                </h:panelGrid> 

                                                <p:outputLabel value="* Descripción:" for="txtDescripcionPresupuestoDetallado" style="font-weight: bold"
                                                               rendered="#{proyectoController.presupuestoProyectoSelected.tipo==1 and proyectoController.presupuestoProyectoSelected.tipoGasto=='I'}"></p:outputLabel>
                                                <h:panelGrid columns="2" rendered="#{proyectoController.presupuestoProyectoSelected.tipo==1  and proyectoController.presupuestoProyectoSelected.tipoGasto=='I'}">
                                                    <p:inputTextarea id="txtDescripcionPresupuestoDetallado" value="#{proyectoController.presupuestoProyectoSelected.especificacionesTecnicas}"
                                                                     cols="80" rows="3" maxlength="150"
                                                                     required="#{not empty param['formPrincipal:btnGrabarPresupuestoDetallado']}">
                                                    </p:inputTextarea>
                                                    <p:message for="txtDescripcionPresupuestoDetallado"></p:message>
                                                </h:panelGrid> 

                                                <p:outputLabel value="* Cantidad:" for="txtCantidadPresupuestoDetallado" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <pe:inputNumber id="txtCantidadPresupuestoDetallado" value="#{proyectoController.presupuestoProyectoSelected.cantidad}" decimalPlaces="0" minValue="0" maxValue="1000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarPresupuestoDetallado']}">  
                                                        <p:ajax event="change" update="formPrincipal:txtTotalPresupuestoDetallado"/>
                                                    </pe:inputNumber>
                                                    <p:message for="txtCantidadPresupuestoDetallado"></p:message>
                                                </h:panelGrid>

                                                <p:outputLabel value="* Valor Unitario (USD):" for="txtValorPresupuestoDetallado" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <pe:inputNumber id="txtValorPresupuestoDetallado" value="#{proyectoController.presupuestoProyectoSelected.valor}" decimalPlaces="2" minValue="0" maxValue="1000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarPresupuestoDetallado']}">  
                                                        <p:ajax event="change" update="formPrincipal:txtTotalPresupuestoDetallado"/>
                                                    </pe:inputNumber>
                                                    <p:message for="txtValorPresupuestoDetallado"></p:message>
                                                </h:panelGrid>
                                                <p:outputLabel value="Total (USD):" for="txtTotalPresupuestoDetallado" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <p:inputText id="txtTotalPresupuestoDetallado" value="#{proyectoController.presupuestoProyectoSelected.total}" disabled="true" style="width: 70px;">
                                                        <f:convertNumber locale="es"  pattern="#,###,##0.00" />
                                                    </p:inputText>                                        
                                                    <p:message for="txtTotalPresupuestoDetallado"></p:message>
                                                </h:panelGrid>
                                            </h:panelGrid>
                                        </p:fieldset>
                                    </h:panelGrid>
                                </h:panelGrid>

                                <h:panelGrid columns="1">
                                    <h:outputLabel value="Aporte de la Universidad:" style="font-weight: bold"/>
                                    <p:dataTable value="#{proyectoController.proyectoSelected.detallePresupuestoUniversidad}" var="presupuestoUniv" 
                                                 rowIndexVar="index" resizableColumns="true"
                                                 style="width: 95%"
                                                 emptyMessage="No se encontraron Resultados"> 
                                        <p:column headerText="Nro." width="20">
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>
                                        <p:column headerText="Partida Presupuestaria" sortBy="#{presupuestoUniv.nombreCompleto}">
                                            <h:outputText value="#{presupuestoUniv.nombreCompleto}" style="white-space: pre-line"/>                                    
                                        </p:column>
                                        <p:column headerText="Descripción" width="150" sortBy="#{presupuestoUniv.especificacionesTecnicas}">
                                            <h:outputText value="#{presupuestoUniv.especificacionesTecnicas}" style="white-space: pre-line"/>                                    
                                        </p:column>
                                        <p:column headerText="Tipo Gasto" sortBy="#{presupuestoUniv.tipoGastoStr}" width="80">
                                            <h:outputText value="#{presupuestoUniv.tipoGastoStr}" style="white-space: pre-line"/>     
                                        </p:column>

                                        <p:column rendered="false" headerText="Especificaciones Técnicas" sortBy="#{presupuestoUniv.especificacionesTecnicas}">
                                            <h:outputText value="#{presupuestoUniv.especificacionesTecnicas}" style="white-space: pre-line"/>     
                                        </p:column>
                                        <p:column headerText="Cantidad" width="60" sortBy="#{presupuestoUniv.cantidad}">
                                            <h:outputText value="#{presupuestoUniv.cantidad}" style="white-space: pre-line; float:right">  
                                                <f:convertNumber locale="es_ES"  pattern="#,###,##0" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Valor Unitario (USD)" width="100" sortBy="#{presupuestoUniv.valor}">
                                            <h:outputText value="#{presupuestoUniv.valor}" style="white-space: pre-line; float:right">  
                                                <f:convertNumber locale="es_ES"  pattern="#,###,##0.00" />
                                            </h:outputText>
                                        </p:column>                                        
                                        <p:column headerText="Total (USD)" width="100" sortBy="#{presupuestoUniv.total}">
                                            <h:outputText value="#{presupuestoUniv.total}" style="white-space: pre-line; float:right">  
                                                <f:convertNumber locale="es_ES"  pattern="#,###,##0.00" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Editar" width="50" style ="text-align: center">
                                            <p:commandButton icon="ui-icon-pencil"
                                                             title="Editar el registro"
                                                             disabled="#{!proyectoController.permitirEditarPerfil}"
                                                             update=":formPrincipal:panelEdicionPresupuestoDetallado"
                                                             >
                                                <f:setPropertyActionListener value="#{presupuestoUniv}" target="#{proyectoController.presupuestoProyectoSelected}"/>
                                            </p:commandButton>
                                        </p:column>                                         
                                        <p:column headerText="Eliminar" width="50" style ="text-align: center">
                                            <p:commandButton title="Eliminar el registro" icon="ui-icon-trash" 
                                                             onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                             action="#{proyectoController.eliminarPresupuestoProyecto()}"
                                                             disabled="#{!proyectoController.permitirEditarPerfil}"
                                                             update=":formPrincipal:panelPresupuestoDetallado, :formPrincipal:message1 ">
                                                <f:setPropertyActionListener value="#{presupuestoUniv}" target="#{proyectoController.presupuestoProyectoSelected}" />
                                                <p:confirm header="Confirmación" message="Confirma que desea eliminar el item seleccionado?" icon="ui-icon-alert" />
                                            </p:commandButton>  
                                        </p:column>
                                        <p:columnGroup type="footer">
                                            <p:row>
                                                <p:column colspan="6" style="text-align:right" footerText="Total (Permanente):" />
                                                <p:column footerText="#{proyectoController.proyectoSelected.totalPresupuestoUniversidadGastoPermanenteStr}" style="text-align: right" >
                                                </p:column>
                                                <p:column colspan="2"/>
                                            </p:row>
                                            <p:row>
                                                <p:column colspan="6" style="text-align:right" footerText="Total (No Permanente):" />
                                                <p:column footerText="#{proyectoController.proyectoSelected.totalPresupuestoUniversidadGastoNoPermanenteStr}" style="text-align: right" >
                                                </p:column>
                                                <p:column colspan="2"/>
                                            </p:row>
                                            <p:row>
                                                <p:column colspan="6" style="text-align:right" footerText="Total:" />
                                                <p:column footerText="#{proyectoController.proyectoSelected.totalPresupuestoUniversidadStr}" style="text-align: right" >
                                                </p:column>
                                                <p:column colspan="2"/>
                                            </p:row>

                                        </p:columnGroup>                                               

                                    </p:dataTable>

                                    <h:outputLabel value="Aporte de la Entidad Auspiciante:" style="font-weight: bold"/>
                                    <p:dataTable value="#{proyectoController.proyectoSelected.detallePresupuestoEntidadAuspiciante}" var="presupuestoEnt"
                                                 rowIndexVar="index"  
                                                 style="width: 95%"
                                                 resizableColumns="true"
                                                 emptyMessage="No se encontraron Resultados"> 
                                        <p:column headerText="Nro." width="20" >
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>
                                        <p:column headerText="Bien y/o Servicio" sortBy="#{presupuestoEnt.bienServicio}">
                                            <h:outputText value="#{presupuestoEnt.bienServicio}" style="white-space: pre-line"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Cantidad" width="60" sortBy="#{presupuestoEnt.cantidad}">
                                            <h:outputText value="#{presupuestoEnt.cantidad}" style="white-space: pre-line; float:right">  
                                                <f:convertNumber locale="es_ES"  pattern="#,###,##0" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Valor Unitario (USD)" width="100" sortBy="#{presupuestoEnt.valor}">
                                            <h:outputText value="#{presupuestoEnt.valor}" style="white-space: pre-line; float:right">  
                                                <f:convertNumber locale="es_ES"  pattern="#,###,##0.00" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Total (USD)" width="100" sortBy="#{presupuestoEnt.total}">
                                            <h:outputText value="#{presupuestoEnt.total}" style="white-space: pre-line; float:right">  
                                                <f:convertNumber locale="es_ES"  pattern="#,###,##0.00" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Editar" width="50" style ="text-align: center">
                                            <p:commandButton icon="ui-icon-pencil"
                                                             title="Editar el registro"
                                                             disabled="#{!proyectoController.permitirEditarPerfil}"
                                                             update=":formPrincipal:panelEdicionPresupuestoDetallado"
                                                             >
                                                <f:setPropertyActionListener value="#{presupuestoEnt}" target="#{proyectoController.presupuestoProyectoSelected}"/>
                                            </p:commandButton>
                                        </p:column>                                         
                                        <p:column headerText="Eliminar" width="50" style ="text-align: center">
                                            <p:commandButton title="Eliminar el registro" icon="ui-icon-trash" 
                                                             onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                             action="#{proyectoController.eliminarPresupuestoProyecto()}"
                                                             disabled="#{!proyectoController.permitirEditarPerfil}"
                                                             update=":formPrincipal:panelPresupuestoDetallado, :formPrincipal:message1 ">
                                                <f:setPropertyActionListener value="#{presupuestoEnt}" target="#{proyectoController.presupuestoProyectoSelected}" />
                                                <p:confirm header="Confirmación" message="Confirma que desea eliminar el item seleccionado?" icon="ui-icon-alert" />
                                            </p:commandButton>  
                                        </p:column>
                                        <p:columnGroup type="footer">
                                            <p:row>
                                                <p:column colspan="4" style="text-align:right" footerText="Total:" />
                                                <p:column footerText="#{proyectoController.proyectoSelected.totalPresupuestoEntidadAuspicianteStr}" style="text-align: right" >
                                                    <h:outputLabel value=""></h:outputLabel>
                                                </p:column>
                                                <p:column colspan="2"/>
                                            </p:row>
                                        </p:columnGroup>                                        
                                    </p:dataTable>                                  


                                    <h:outputLabel value="Aporte de la Comunidad Beneficiaria:" style="font-weight: bold"/>
                                    <p:dataTable value="#{proyectoController.proyectoSelected.detallePresupuestoComunidadBeneficiaria}" var="presupuestoCom"
                                                 rowIndexVar="index"  
                                                 style="width: 95%"
                                                 resizableColumns="true"
                                                 emptyMessage="No se encontraron Resultados"> 
                                        <p:column headerText="Nro." width="20" >
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>
                                        <p:column headerText="Bien y/o Servicio" sortBy="#{presupuestoCom.bienServicio}">
                                            <h:outputText value="#{presupuestoCom.bienServicio}" style="white-space: pre-line"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Cantidad" width="60" sortBy="#{presupuestoCom.cantidad}">
                                            <h:outputText value="#{presupuestoCom.cantidad}" style="white-space: pre-line; float:right">  
                                                <f:convertNumber locale="es_ES"  pattern="#,###,##0" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Valor Unitario (USD)" width="100" sortBy="#{presupuestoCom.valor}">
                                            <h:outputText value="#{presupuestoCom.valor}" style="white-space: pre-line; float:right">  
                                                <f:convertNumber locale="es_ES"  pattern="#,###,##0.00" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Total (USD)" width="100" sortBy="#{presupuestoCom.total}">
                                            <h:outputText value="#{presupuestoCom.total}" style="white-space: pre-line; float:right">  
                                                <f:convertNumber locale="es_ES"  pattern="#,###,##0.00" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Editar" width="50" style ="text-align: center">
                                            <p:commandButton icon="ui-icon-pencil"
                                                             title="Editar el registro"
                                                             disabled="#{!proyectoController.permitirEditarPerfil}"
                                                             update=":formPrincipal:panelEdicionPresupuestoDetallado"
                                                             >
                                                <f:setPropertyActionListener value="#{presupuestoCom}" target="#{proyectoController.presupuestoProyectoSelected}"/>
                                            </p:commandButton>
                                        </p:column>                                         
                                        <p:column headerText="Eliminar" width="50" style ="text-align: center">
                                            <p:commandButton title="Eliminar el registro" icon="ui-icon-trash" 
                                                             onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                             action="#{proyectoController.eliminarPresupuestoProyecto()}"
                                                             disabled="#{!proyectoController.permitirEditarPerfil}"
                                                             update=":formPrincipal:panelPresupuestoDetallado, :formPrincipal:message1 ">
                                                <f:setPropertyActionListener value="#{presupuestoCom}" target="#{proyectoController.presupuestoProyectoSelected}" />
                                                <p:confirm header="Confirmación" message="Confirma que desea eliminar el item seleccionado?" icon="ui-icon-alert" />
                                            </p:commandButton>  
                                        </p:column>
                                        <p:columnGroup type="footer">
                                            <p:row>
                                                <p:column colspan="4" style="text-align:right" footerText="Total:" />
                                                <p:column footerText="#{proyectoController.proyectoSelected.totalPresupuestoComunidadBeneficiariaStr}" style="text-align: right" >
                                                    <h:outputLabel value=""></h:outputLabel>
                                                </p:column>
                                                <p:column colspan="2"/>
                                            </p:row>
                                        </p:columnGroup>                                        



                                    </p:dataTable>                                                                             
                                </h:panelGrid>                              


                            </p:panel>


                            <!--tab8: Estrategia de Ejecución-Cronograma-->
                            <p:panel id="panel8" rendered="#{proyectoController.selectedNodeCode=='1.7'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid columns="2">
                                    <p:commandButton value="Editar" title="Editar" icon="ui-icon-pencil"
                                                     action="#{proyectoController.seleccionarEdicion}"
                                                     rendered="#{!proyectoController.modoEdicion}"
                                                     disabled="#{!proyectoController.permitirEditarPerfil}"
                                                     update=":formPrincipal:panel8" >
                                    </p:commandButton>
                                    <p:commandButton id="btnGrabarP8" value="Grabar" title="Graba Información" icon="ui-icon-locked" 
                                                     update=":formPrincipal:timelineHitos, :formPrincipal:timelineActividades, :formPrincipal:message1" 
                                                     rendered="#{proyectoController.modoEdicion}"
                                                     action ="#{proyectoController.registraP8}"
                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                    </p:commandButton>   
                                    <p:commandButton id="btnCancelarP8" value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                     process="@this"
                                                     rendered="#{proyectoController.modoEdicion}"
                                                     update=":formPrincipal:panel8" 
                                                     action="#{proyectoController.cancelarP8(true)}">
                                    </p:commandButton>
                                </h:panelGrid>

                                <h:panelGrid columns="1" style="width: 100%">
                                    <h:panelGrid columns="3">
                                        <p:outputLabel value="Seleccione el Componente:" for="selComponenteHito" style="font-weight: bold"/>  
                                        <p:selectOneMenu id="selComponenteHito"
                                                         value="#{proyectoController.objetivoProyectoSelected}"
                                                         converter="omnifaces.SelectItemsConverter"
                                                         >
                                            <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                            <f:selectItems value="#{proyectoController.proyectoSelected.componentes}" var="comp" itemLabel="#{comp.svopObjetivoProy}" itemValue="#{comp}"/>
                                            <p:ajax event="change" update=":formPrincipal:timelineHitos, :formPrincipal:timelineActividades" 
                                                    listener="#{proyectoController.cancelarP8(true)}" 
                                                    onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                    />                                                    
                                        </p:selectOneMenu>  
                                        <p:message for="selComponenteHito"></p:message>


                                    </h:panelGrid>
                                    <p:outputLabel value="Hitos:" style="font-weight: bold"></p:outputLabel>
                                    <pe:timeline id="timelineHitos"
                                                 value="#{proyectoController.modelHitos}"  
                                                 var="hitoCronograma"
                                                 varGroup="hitoCronogramaGrupo"
                                                 zoomMin="518400000"
                                                 zoomMax="378432000000"
                                                 editable="#{proyectoController.modoEdicion and proyectoController.objetivoProyectoSelected!=null}"  
                                                 zoomable="#{proyectoController.objetivoProyectoSelected!=null}"
                                                 moveable="#{proyectoController.modoEdicion and proyectoController.objetivoProyectoSelected!=null}"
                                                 timeChangeable="#{proyectoController.modoEdicion}"
                                                 groupsChangeable="false"
                                                 widgetVar="timelineHitos"
                                                 eventMargin="10" 
                                                 eventMarginAxis="0"  
                                                 locale="es"
                                                 showNavigation="#{proyectoController.objetivoProyectoSelected!=null}"  
                                                 showButtonNew="#{proyectoController.modoEdicion and proyectoController.objetivoProyectoSelected!=null}"  
                                                 axisOnTop="true" 
                                                 stackEvents="true"
                                                 height="140px"
                                                 width="100%"
                                                 start="#{proyectoController.start}"
                                                 end="#{proyectoController.end}"

                                                 > 
                                        <p:ajax event="changed" update="@none" listener="#{proyectoController.onChange2}"/>
                                        <p:ajax event="add" update=":formPrincipal:detalleHitoProyectoDlg"
                                                listener="#{proyectoController.onAdd}"
                                                oncomplete="PF('detalleHitoProyectoWdgt').show()"/>
                                        <p:ajax event="edit" update=":formPrincipal:detalleHitoProyectoDlg"
                                                listener="#{proyectoController.onEdit}"
                                                oncomplete="PF('detalleHitoProyectoWdgt').show()"/>
                                        <p:ajax event="delete" update=":formPrincipal:detalleHitoProyectoDlg"  
                                                listener="#{proyectoController.onDelete}"  
                                                />  
                                        <p:ajax event="rangechanged" listener="#{proyectoController.onRangeChanged}"/>


                                        <pe:javascript event="rangechange" execute="onrangechange1()"/>
                                        <f:facet name="group" rendered="false">
                                            <h:panelGrid columns="1" style="width: 100px" rendered="false">
                                                <h:outputText value="Hitos" rendered="false"/>
                                            </h:panelGrid>
                                        </f:facet> 
                                        <h:panelGrid columns="1">
                                            <p:outputLabel value="#{hitoCronograma.descripcion}"></p:outputLabel>
                                        </h:panelGrid>        
                                    </pe:timeline>   


                                    <p:outputLabel value="Actividades:" style="font-weight: bold"></p:outputLabel>
                                    <pe:timeline id="timelineActividades"
                                                 value="#{proyectoController.modelActividades}"  
                                                 var="actividadCronograma"
                                                 varGroup="actividadCronogramaGrupo"
                                                 zoomMin="518400000"
                                                 zoomMax="378432000000"
                                                 editable="#{proyectoController.modoEdicion and proyectoController.objetivoProyectoSelected!=null}"  
                                                 zoomable="#{proyectoController.objetivoProyectoSelected!=null}"
                                                 moveable="#{proyectoController.modoEdicion and proyectoController.objetivoProyectoSelected!=null}"
                                                 timeChangeable="#{proyectoController.modoEdicion}"
                                                 groupsChangeable="false"                                                         
                                                 widgetVar="timelineActividades"
                                                 eventMargin="10" 
                                                 eventMarginAxis="0"  
                                                 locale="es"
                                                 showNavigation="#{proyectoController.objetivoProyectoSelected!=null}"  
                                                 showButtonNew="#{proyectoController.modoEdicion and proyectoController.objetivoProyectoSelected!=null}"  
                                                 axisOnTop="true" 
                                                 stackEvents="true"
                                                 width="100%"
                                                 start="#{proyectoController.start}"
                                                 end="#{proyectoController.end}"

                                                 > 
                                        <p:ajax event="changed" update="@none" listener="#{proyectoController.onChange}"/>  
                                        <pe:javascript event="rangechange" execute="onrangechange2()"/> 
                                        <p:ajax event="delete" update="@none" onstart="PF('timelineActividades').cancelDelete()"/>
                                        <p:ajax event="add" update="@none" onstart="PF('timelineActividades').cancelAdd()"/>
                                        <p:ajax event="edit" update=":formPrincipal:detalleActividadProyectoDlg"
                                                listener="#{proyectoController.onEdit}"
                                                oncomplete="PF('detalleActividadProyectoWdgt').show()"/>
                                        <p:ajax event="rangechanged" listener="#{proyectoController.onRangeChanged}"/>
                                        <f:facet name="group" rendered="false"> 
                                            <h:panelGrid columns="1" style="width: 100px" rendered="false">  
                                                <h:outputText value="Actividad: #{actividadCronogramaGrupo.svopObjetivoProy}" rendered="false"/>
                                            </h:panelGrid>                                                            
                                        </f:facet>  
                                        <h:panelGrid columns="1">   
                                            <h:outputText value="#{actividadCronograma.svopOrden}. #{actividadCronograma.svopObjetivoProy}" style="white-space: pre-line"/>
                                        </h:panelGrid>        
                                    </pe:timeline>
                                </h:panelGrid>

                            </p:panel>

                            <!--tab11: Acta de Concejo de Departamento-->
                            <p:panel id="panel11" rendered="#{proyectoController.selectedNodeCode=='1.8'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid columns="2">
                                    <p:commandButton value="Editar" title="Editar" icon="ui-icon-pencil"
                                                     action="#{proyectoController.seleccionarEdicion}"
                                                     rendered="#{!proyectoController.modoEdicion}"
                                                     disabled="#{!proyectoController.permitirEditarPerfil}"
                                                     update=":formPrincipal:panel11" >
                                    </p:commandButton>
                                    <p:commandButton id="btnGrabarP11" value="Grabar" title="Graba Información" icon="ui-icon-locked" 
                                                     rendered="#{proyectoController.modoEdicion}"
                                                     update=":formPrincipal:message1" 
                                                     action ="#{proyectoController.registraP11}"
                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                    </p:commandButton>   
                                    <p:commandButton id="btnCancelarP11" value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                     process="@this"
                                                     rendered="#{proyectoController.modoEdicion}"
                                                     update=":formPrincipal:panel11" 
                                                     action="#{proyectoController.cancelarP11}">
                                    </p:commandButton>
                                </h:panelGrid>
                                <h:panelGrid columns="2" cellpadding="0" cellspacing="0">

                                    <p:outputLabel value="Acta aprobación Consejo Departamento (.pdf):" style="font-weight: bold"/>
                                    <h:panelGrid columns="2">
                                        <h:panelGrid columns="1" cellpadding="0" cellspacing="0">
                                            <p:outputLabel id="lblNombreDocumento" value="#{proyectoController.proyectoSelected.nombreDocAprobacionConcejoDep}"/>
                                            <p:fileUpload id="fileDocumento" fileUploadListener="#{proyectoController.subirDocAprobacionConcejoDep}" 
                                                          disabled="#{!proyectoController.modoEdicion}"
                                                          mode="advanced"
                                                          label="Seleccionar"
                                                          invalidFileMessage="Tipo de archivo incorrecto: "
                                                          invalidSizeMessage="Tamaño del archivo seleccionado excede el límite permitido (10MB): "
                                                          update=":formPrincipal:lblNombreDocumento, :formPrincipal:docvAprobacionConcejoDep, :formPrincipal:message1" auto="true" sizeLimit="10240000" allowTypes="/(\.|\/)(pdf)$/" />

                                        </h:panelGrid>
                                        <p:message for="fileDocumento"></p:message>
                                    </h:panelGrid>
                                </h:panelGrid>
                                <pe:documentViewer id="docvAprobacionConcejoDep" height="500" url="#{proyectoController.proyectoSelected.urlFinalDocAprobacionConcejoDep}"
                                                   style="width: 100%"/>                      
                            </p:panel>



                            <!--panelFinalizarPerfil-->
                            <p:panel id="panelFinalizarPerfil" rendered="#{proyectoController.selectedNodeCode=='1.9'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionFinalizarPerfil" cellspacing="5" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:fieldset 
                                        legend="FINALIZAR PROCESO DE REGISTRO DE PERFIL">
                                        <h:panelGrid columns="1" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                            <p:outputLabel value="#{(proyectoController.proyectoSelected.estado=='CRE' or proyectoController.proyectoSelected.estado=='REV')?'Una vez finalizado el proceso, no se podrá modificar la información registrada del perfil de proyecto...':'Proceso de ingreso de perfil Finalizado.'}" style="font-weight: bold"></p:outputLabel>
                                            <p:spacer height="20"></p:spacer>
                                            <p:outputLabel value="- Debe especificar la cobertura y localización (punto 1.2)" style="color:red"
                                                           rendered="#{proyectoController.msgCoberturaLocalizacion}"></p:outputLabel>
                                            <p:outputLabel value="- Debe ingresar por lo menos un bien o servicio en detalle de entregables del producto (punto 1.3)" style="color:red"
                                                           rendered="#{proyectoController.msgEntregablesProducto}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar el diagnóstico y problema (punto 2.1)" style="color:red"
                                                           rendered="#{proyectoController.msgDiagnosticoProblema}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar la identificación de población  (punto 2.2)" style="color:red"
                                                           rendered="#{proyectoController.msgIdentificacionPoblacion}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar el número de docentes participantes (punto 2.3)" style="color:red"
                                                           rendered="#{proyectoController.msgDocentesParticipantes}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar el número de estudiantes participantes (punto 2.4)" style="color:red"
                                                           rendered="#{proyectoController.msgEstudiantesParticipantes}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar al menos un objetivo del Plan Nacional del Buen Vivir (punto 3.1)" style="color:red"
                                                           rendered="#{proyectoController.msgObjetivosBuenVivir}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar al menos un objetivo provincial, cantonal o parroquial (punto 3.2)" style="color:red"
                                                           rendered="#{proyectoController.msgObjetivosProvCantParr}"></p:outputLabel>
                                            <p:outputLabel value="- Debe especificar al menos un objetivo estratégico institucional (punto 3.3)" style="color:red"
                                                           rendered="#{proyectoController.msgObjetivosEstrategicos}"></p:outputLabel>
                                            <p:outputLabel value="- Debe ingresar la información del Fin de la Matriz del Marco Lógico (punto 4)" style="color:red"
                                                           rendered="#{proyectoController.msgMatrizMarcoLogicoFin}"></p:outputLabel>
                                            <p:outputLabel value="- Debe ingresar la información del Objetivo General de la Matriz del Marco Lógico (punto 4)" style="color:red"
                                                           rendered="#{proyectoController.msgMatrizMarcoLogicoProposito}"></p:outputLabel>
                                            <p:outputLabel value="- Debe ingresar al menos un componente (objetivo específico) en la Matriz del Marco Lógico (punto 4)" style="color:red"
                                                           rendered="#{proyectoController.msgMatrizMarcoLogicoComponente}"></p:outputLabel>
                                            <p:outputLabel value="- Debe ingresar al menos una actividad por cada componente (objetivo específico) en la Matriz del Marco Lógico (punto 4)" style="color:red"
                                                           rendered="#{proyectoController.msgMatrizMarcoLogicoActividad}"></p:outputLabel>
                                            <p:outputLabel value="- Debe ingresar la viabilidad y plan de sostenibilidad (punto 5)" style="color:red"
                                                           rendered="#{proyectoController.msgViabilidad}"></p:outputLabel>
                                            <p:outputLabel value="- Debe ingresar el presupuesto detallado y fuentes de financiamiento (punto 6)" style="color:red"
                                                           rendered="#{proyectoController.msgPresupuestoDetallado}"></p:outputLabel>
                                            <p:outputLabel value="- Debe ingresar el acta de aprobación del consejo de departamento (punto 8)" style="color:red"
                                                           rendered="#{proyectoController.msgActaConsejoDepartamento}"></p:outputLabel>

                                            <p:commandButton id="btnFinalizarPerfil" value="Finalizar" title="Grabar Información" icon="ui-icon-check" 
                                                             disabled="#{!proyectoController.permitirEditarPerfil}"
                                                             update=":formPrincipal:panelMenu, :formPrincipal:panelCentral, :formPrincipal:panelTitulo,   :formPrincipal:message1"
                                                             action ="#{proyectoController.finalizarPerfil}"
                                                             onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                <p:confirm header="Confirmación" message="Confirma que desea finalizar el ingreso de perfil del proyecto?" icon="ui-icon-alert" />
                                            </p:commandButton>
                                        </h:panelGrid>                                          

                                    </p:fieldset>
                                </h:panelGrid>
                            </p:panel>                   


                            <!--tabP201: Asignación de Docentes-->
                            <p:panel id="panelDocenteParticipante" rendered="#{proyectoController.selectedNodeCode=='4.1'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid id="panelEdicionDocenteParticipante" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <h:panelGrid columns="1" rendered="#{proyectoController.responsableProyectoSelected==null}">
                                        <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirEjecucion}" style="color:red"></p:outputLabel>                                        
                                        <p:commandButton value="Agregar" title="Agregar Docente" icon="ui-icon-plus" 
                                                         update=":formPrincipal:panelEdicionDocenteParticipante"
                                                         disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                         actionListener="#{proyectoController.nuevoDocenteParticipante}" 
                                                         >
                                        </p:commandButton>
                                    </h:panelGrid>
                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%" 
                                                 rendered="#{proyectoController.responsableProyectoSelected !=null}">

                                        <p:fieldset legend="#{proyectoController.responsableProyectoSelected.id==null ? 'NUEVO DOCENTE PARTICIPANTE':'EDICION DE DOCENTE PARTICIPANTE'}">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarDocenteParticipante" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelDocenteParticipante, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarDocenteParticipante()}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelDocenteParticipante" 
                                                                 action="#{proyectoController.cancelarDocenteProyecto()}">
                                                </p:commandButton>
                                            </h:panelGrid>    

                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px" columnClasses="col1_presupuesto">

                                                <p:outputLabel value="* Docente:" for="hidNombreDocenteParticipante" style="font-weight: bold"/>
                                                <h:panelGrid columns="4" >
                                                    <p:commandButton  title="Buscar Docente" icon="ui-icon-search"
                                                                      rendered="#{proyectoController.responsableProyectoSelected.tipoResponsable.id!=1}"
                                                                      actionListener="#{proyectoController.abrirBusquedaDocente}">
                                                        <p:ajax event="dialogReturn" listener="#{proyectoController.seleccionarDocente}" update=":formPrincipal:panelEdicionDocenteParticipante, :formPrincipal:message1"
                                                                onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"/>
                                                    </p:commandButton>
                                                    <p:inputText id="txtNombreDocenteParticipante" style="width: 300px"
                                                                 value="#{proyectoController.responsableProyectoSelected.usuario!=null?(proyectoController.responsableProyectoSelected.usuario.usuCc.concat('-').concat(proyectoController.responsableProyectoSelected.usuario.usuNombres.concat(' ').concat(proyectoController.responsableProyectoSelected.usuario.usuApellidos))):''}"
                                                                 maxlength="150" disabled ="true" required="#{not empty param['formPrincipal:btnGrabarDocenteParticipante']}">
                                                    </p:inputText>
                                                    <h:inputHidden id="hidNombreDocenteParticipante" value="#{proyectoController.responsableProyectoSelected.cedula}"
                                                                   required="#{not empty param['formPrincipal:btnGrabarDocenteParticipante']}"></h:inputHidden>
                                                    <p:message for="hidNombreDocenteParticipante"></p:message>
                                                </h:panelGrid> 

                                                <p:outputLabel value="* Función:" for="selFuncionDocenteResponsable" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <p:selectOneMenu id="selFuncionDocenteResponsable"
                                                                     required="#{not empty param['formPrincipal:btnGrabarDocenteParticipante']}" 
                                                                     style="width:160px;" 
                                                                     disabled="true"
                                                                     converter="omnifaces.SelectItemsConverter"
                                                                     value="#{proyectoController.responsableProyectoSelected.tipoResponsable}" 
                                                                     >
                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                        <f:selectItems value="#{proyectoController.tipoResponsableList}" var="tipoResponsable" itemLabel="#{tipoResponsable.descripcion}" itemValue="#{tipoResponsable}"/>
                                                    </p:selectOneMenu>
                                                    <p:message for="selFuncionDocenteResponsable"></p:message>
                                                </h:panelGrid>          

                                                <p:outputLabel value="* Nro. Horas planificadas para participar en el proyecto:" for="txtHorasDocenteResponsable" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <pe:inputNumber id="txtHorasDocenteResponsable" value="#{proyectoController.responsableProyectoSelected.horasPlanificadas}" decimalPlaces="0" minValue="0" maxValue="1000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarDocenteParticipante']}">  
                                                    </pe:inputNumber>
                                                    <p:message for="txtHorasDocenteResponsable"></p:message>
                                                </h:panelGrid>


                                            </h:panelGrid>                                            
                                        </p:fieldset>


                                    </h:panelGrid>

                                </h:panelGrid>

                                <h:outputLabel value="Docentes participantes:" style="font-weight: bold"/>
                                <p:dataTable id="dtDocentesParticipantes" value="#{proyectoController.proyectoSelected.participanteDocenteList}" var="docentePar" paginator="true"
                                             rows="10" rowIndexVar="index" resizableColumns="true" style="width: 99%"
                                             emptyMessage="No se encontraron Resultados"> 
                                    <p:column headerText="Nro." width="20">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Cédula" width="100">
                                        <h:outputText value="#{docentePar.usuario.usuCc}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Apellidos">
                                        <h:outputText value="#{docentePar.usuario.usuApellidos}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Nombres" width="200">
                                        <h:outputText value="#{docentePar.usuario.usuNombres}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Función" width="80">
                                        <h:outputText value="#{docentePar.tipoResponsable.descripcion}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Nro. Horas planificadas para participar en el proyecto" width="80" style="text-align: center; white-space: pre-line">
                                        <h:outputText value="#{docentePar.horasPlanificadas}" style="white-space: pre-line">
                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Editar" width="50" style ="text-align: center">
                                        <p:commandButton icon="ui-icon-pencil"
                                                         title="Editar el registro"
                                                         disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                         update=":formPrincipal:panelEdicionDocenteParticipante"
                                                         >
                                            <f:setPropertyActionListener value="#{docentePar}" target="#{proyectoController.responsableProyectoSelected}"/>
                                        </p:commandButton>
                                    </p:column>                                         
                                    <p:column headerText="Eliminar" width="50" style ="text-align: center">
                                        <p:commandButton title="Eliminar el registro" icon="ui-icon-trash" 
                                                         process="@this"
                                                         rendered="#{docentePar.tipoResponsable.id!=1}"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                         disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                         action="#{proyectoController.eliminarDocenteParticipante()}"
                                                         update=":formPrincipal:panelDocenteParticipante, :formPrincipal:message1 ">
                                            <f:setPropertyActionListener value="#{docentePar}" target="#{proyectoController.responsableProyectoSelected}" />
                                            <p:confirm header="Confirmación" message="Confirma que desea eliminar el item seleccionado?" icon="ui-icon-alert" />
                                        </p:commandButton>  
                                    </p:column>

                                </p:dataTable>
                            </p:panel>



                            <!--panelEstudianteParticipante-->
                            <p:panel id="panelEstudianteParticipante" rendered="#{proyectoController.selectedNodeCode=='4.2'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid id="panelEdicionEstudianteParticipante" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirEjecucion}" style="color:red"></p:outputLabel>
                                    <h:panelGrid columns="1" rendered="#{proyectoController.responsableProyectoSelected==null}">
                                        <p:commandButton value="Agregar" title="Agregar Estudiante" icon="ui-icon-plus"
                                                         update=":formPrincipal:panelEdicionEstudianteParticipante"
                                                         disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                         action="#{proyectoController.nuevoEstudianteParticipante}"
                                                         >
                                        </p:commandButton>
                                    </h:panelGrid>
                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%" 
                                                 rendered="#{proyectoController.responsableProyectoSelected !=null}">

                                        <p:fieldset legend="#{proyectoController.responsableProyectoSelected.id==null ? 'NUEVA DESIGNACION DE ESTUDIANTE':'EDICION DE DESIGNACION DE ESTUDIANTE'}">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarEstudianteParticipante" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelEstudianteParticipante, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarEstudianteParticipante()}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelEstudianteParticipante" 
                                                                 action="#{proyectoController.cancelarEstudianteParticipante()}">
                                                </p:commandButton>
                                            </h:panelGrid>    

                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px" columnClasses="col1_presupuesto">

                                                <p:outputLabel value="* Estudiante:" for="hidNombreEstudianteParticipante" style="font-weight: bold"/>
                                                <h:panelGrid columns="4" >
                                                    <p:commandButton  title="Buscar Estudiante" icon="ui-icon-search"
                                                                      actionListener="#{proyectoController.abrirBusquedaEstudiante}">
                                                        <p:ajax event="dialogReturn" listener="#{proyectoController.seleccionarEstudiante}" update=":formPrincipal:panelEdicionEstudianteParticipante, :formPrincipal:message1"
                                                                onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"/>
                                                    </p:commandButton>
                                                    <p:inputText id="txtNombreEstudianteParticipante" style="width: 300px"
                                                                 value="#{proyectoController.responsableProyectoSelected.usuario!=null?(proyectoController.responsableProyectoSelected.usuario.usuCc.concat('-').concat(proyectoController.responsableProyectoSelected.usuario.usuNombres.concat(' ').concat(proyectoController.responsableProyectoSelected.usuario.usuApellidos))):''}"
                                                                 maxlength="150" disabled ="true" required="#{not empty param['formPrincipal:btnGrabarEstudianteParticipante']}">
                                                    </p:inputText>
                                                    <h:inputHidden id="hidNombreEstudianteParticipante" value="#{proyectoController.responsableProyectoSelected.cedula}"
                                                                   required="#{not empty param['formPrincipal:btnGrabarEstudianteParticipante']}"></h:inputHidden>
                                                    <p:message for="hidNombreEstudianteParticipante"></p:message>
                                                </h:panelGrid> 

                                                <p:outputLabel value="* Carrera:" for="txtCarreraEstudianteParticipante" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <p:inputText id="txtCarreraEstudianteParticipante" style="width: 300px"
                                                                 value="#{proyectoController.responsableProyectoSelected.carrera.stvmajrDesc}"
                                                                 disabled ="true">
                                                    </p:inputText>
                                                    <p:message for="txtCarreraEstudianteParticipante"></p:message>
                                                </h:panelGrid>          

                                                <p:outputLabel value="* Departamento:" for="txtDepartamentoEstudianteParticipante" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <p:inputText id="txtDepartamentoEstudianteParticipante" style="width: 300px"
                                                                 value="#{proyectoController.responsableProyectoSelected.departamento.stvsubjDesc}"
                                                                 disabled ="true">
                                                    </p:inputText>
                                                    <p:message for="txtDepartamentoEstudianteParticipante"></p:message>
                                                </h:panelGrid>          

                                                <p:outputLabel value="* Nro. Horas planificadas para realizar servicio comunitario:" for="txtHorasEstudianteParticipante" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <pe:inputNumber id="txtHorasEstudianteParticipante" value="#{proyectoController.responsableProyectoSelected.horasPlanificadas}" decimalPlaces="0" minValue="0" maxValue="1000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarEstudianteParticipante']}">  
                                                    </pe:inputNumber>
                                                    <p:message for="txtHorasEstudianteParticipante"></p:message>
                                                </h:panelGrid>


                                            </h:panelGrid>                                            
                                        </p:fieldset>


                                    </h:panelGrid>

                                </h:panelGrid>

                                <h:outputLabel value="Estudiantes participantes:" style="font-weight: bold"/>
                                <p:dataTable id="dtEstudiantesParticipantes" value="#{proyectoController.proyectoSelected.participanteEstudianteList}" var="estudiantePar" paginator="true"
                                             rows="10" rowIndexVar="index" resizableColumns="true" style="width: 99%"
                                             emptyMessage="No se encontraron Resultados"> 
                                    <p:column headerText="Nro." width="20">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Cédula" width="100">
                                        <h:outputText value="#{estudiantePar.usuario.usuCc}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Apellidos">
                                        <h:outputText value="#{estudiantePar.usuario.usuApellidos}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Nombres" width="200">
                                        <h:outputText value="#{estudiantePar.usuario.usuNombres}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Carrera" width="120">
                                        <h:outputText value="#{estudiantePar.carrera.stvmajrDesc}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Departaento" width="120">
                                        <h:outputText value="#{estudiantePar.departamento.stvsubjDesc}" style="white-space: pre-line"/>
                                    </p:column>

                                    <p:column headerText="Nro. Horas planificadas para participar en el proyecto" width="80" style="text-align: center; white-space: pre-line">
                                        <h:outputText value="#{estudiantePar.horasPlanificadas}" style="white-space: pre-line">
                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Editar" width="50" style ="text-align: center">
                                        <p:commandButton icon="ui-icon-pencil"
                                                         title="Editar el registro"
                                                         disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                         update=":formPrincipal:panelEdicionEstudianteParticipante"
                                                         >
                                            <f:setPropertyActionListener value="#{estudiantePar}" target="#{proyectoController.responsableProyectoSelected}"/>
                                        </p:commandButton>
                                    </p:column>                                         
                                    <p:column headerText="Eliminar" width="50" style ="text-align: center">
                                        <p:commandButton title="Eliminar el registro" icon="ui-icon-trash" 
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                         disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                         action="#{proyectoController.eliminarEstudianteParticipante()}"
                                                         update=":formPrincipal:panelEstudianteParticipante, :formPrincipal:message1 ">
                                            <f:setPropertyActionListener value="#{estudiantePar}" target="#{proyectoController.responsableProyectoSelected}" />
                                            <p:confirm header="Confirmación" message="Confirma que desea eliminar el item seleccionado?" icon="ui-icon-alert" />
                                        </p:commandButton>  
                                    </p:column>

                                </p:dataTable>
                            </p:panel>


                            <!--panelNumericoBeneficiarios-->
                            <p:panel id="panelNumericoBeneficiarios" rendered="#{proyectoController.selectedNodeCode=='7.1'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid id="panelEdicionNumericoBeneficiarios" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:focus context="panelEdicionNumericoBeneficiarios"/>
                                    <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirCierre}" style="color:red"></p:outputLabel>
                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%" 
                                                 rendered="#{proyectoController.compromisoParticipacionProyectoSelected !=null}">

                                        <p:fieldset legend="INGRESO DE NUMERICO DE BENEFICIARIOS">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarNumericoBeneficiarios" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelNumericoBeneficiarios, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarCompromisoParticipacionProyecto()}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelNumericoBeneficiarios" 
                                                                 action="#{proyectoController.cancelarCompromisoParticipacionProyecto()}">
                                                </p:commandButton>
                                            </h:panelGrid>    

                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px" columnClasses="col1_numerico_beneficiarios">
                                                <p:outputLabel value="#{proyectoController.proyectoSelected.existeParticipacionComunidad?'Comunidad Beneficiaria':'Entidad Auspiciante'}" style="font-weight: bold"/>
                                                <h:panelGrid columns="1" >
                                                    <p:inputTextarea id="txtNombreInstitucionNumericoBenef" cols="43" rows="2" value="#{proyectoController.compromisoParticipacionProyectoSelected.institucion.nombre}" disabled="true" maxlength="150" required="#{not empty param['formPrincipal:btnGrabarNumericoBeneficiarios']}"></p:inputTextarea>
                                                </h:panelGrid> 

                                                <p:outputLabel for="txtDescBenefNumericoBenef" value="* Descripción de Beneficiarios:" style="font-weight: bold"
                                                               rendered="#{proyectoController.compromisoParticipacionProyectoSelected.tipoParticipacion.prdId==316}">
                                                </p:outputLabel>
                                                <h:panelGrid columns="2" rendered="#{proyectoController.compromisoParticipacionProyectoSelected.tipoParticipacion.prdId==316}">
                                                    <p:inputTextarea id="txtDescBenefNumericoBenef" cols="51" rows="2" value="#{proyectoController.compromisoParticipacionProyectoSelected.descripcionBeneficiarios}" maxlength="150" required="#{not empty param['formPrincipal:btnGrabarNumericoBeneficiarios']}"></p:inputTextarea>
                                                    <p:message for="txtDescBenefNumericoBenef"></p:message>
                                                </h:panelGrid>

                                                <p:outputLabel value="* Directos Hombres" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <pe:inputNumber id="txtDirectosHombresNumericoBenef" value="#{proyectoController.compromisoParticipacionProyectoSelected.nroBeneficiariosDirectosHombres}" decimalPlaces="0" minValue="0" maxValue="100000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarNumericoBeneficiarios']}">  
                                                        <p:ajax event="change" update="formPrincipal:txtTotalDirectosNumericoBenef, formPrincipal:txtTotalNumericoBenef"/>
                                                    </pe:inputNumber>
                                                    <p:message for="txtDirectosHombresNumericoBenef"></p:message>
                                                </h:panelGrid>

                                                <p:outputLabel value="* Directos Mujeres" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <pe:inputNumber id="txtDirectosMujeresNumericoBenef" value="#{proyectoController.compromisoParticipacionProyectoSelected.nroBeneficiariosDirectosMujeres}" decimalPlaces="0" minValue="0" maxValue="100000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarNumericoBeneficiarios']}">  
                                                        <p:ajax event="change" update="formPrincipal:txtTotalDirectosNumericoBenef, formPrincipal:txtTotalNumericoBenef"/>
                                                    </pe:inputNumber>
                                                    <p:message for="txtDirectosMujeresNumericoBenef"></p:message>
                                                </h:panelGrid>

                                                <p:outputLabel value="* Directos Niños" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <pe:inputNumber id="txtDirectosNiniosNumericoBenef" value="#{proyectoController.compromisoParticipacionProyectoSelected.nroBeneficiariosDirectosNinios}" decimalPlaces="0" minValue="0" maxValue="100000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarNumericoBeneficiarios']}">  
                                                        <p:ajax event="change" update="formPrincipal:txtTotalDirectosNumericoBenef, formPrincipal:txtTotalNumericoBenef"/>
                                                    </pe:inputNumber>
                                                    <p:message for="txtDirectosNiniosNumericoBenef"></p:message>
                                                </h:panelGrid>

                                                <p:outputLabel value="* Directos Personas con capacidades especiales" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <pe:inputNumber id="txtDirectosDiscapacNumericoBenef" value="#{proyectoController.compromisoParticipacionProyectoSelected.nroBeneficiariosDirectosDiscapacidad}" decimalPlaces="0" minValue="0" maxValue="100000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarNumericoBeneficiarios']}">  
                                                        <p:ajax event="change" update="formPrincipal:txtTotalDirectosNumericoBenef, formPrincipal:txtTotalNumericoBenef"/>
                                                    </pe:inputNumber>
                                                    <p:message for="txtDirectosDiscapacNumericoBenef"></p:message>
                                                </h:panelGrid>

                                                <p:outputLabel value="Total Directos" style="font-weight: bold"/>
                                                <p:inputText id="txtTotalDirectosNumericoBenef" value="#{proyectoController.compromisoParticipacionProyectoSelected.totalBeneficiariosDirectos}" disabled="true" style="width: 70px">
                                                    <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                                </p:inputText>

                                                <p:outputLabel value="* Total Indirectos" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <pe:inputNumber id="txtTotalIndirectosNumericoBenef" value="#{proyectoController.compromisoParticipacionProyectoSelected.nroBeneficiariosIndirectos}" decimalPlaces="0" minValue="0" maxValue="100000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarNumericoBeneficiarios']}">  
                                                        <p:ajax event="change" update="formPrincipal:txtTotalNumericoBenef"/>
                                                    </pe:inputNumber>
                                                    <p:message for="txtTotalIndirectosNumericoBenef"></p:message>
                                                </h:panelGrid>

                                                <p:outputLabel value="TOTAL" style="font-weight: bold"/>
                                                <p:inputText id="txtTotalNumericoBenef" value="#{proyectoController.compromisoParticipacionProyectoSelected.totalBeneficiarios}" disabled="true" style="width: 70px">
                                                    <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                                </p:inputText>
                                            </h:panelGrid>                                            

                                        </p:fieldset>


                                    </h:panelGrid>

                                </h:panelGrid>

                                <h:outputLabel value="Numérico de Beneficiarios:" style="font-weight: bold"/>
                                <p:dataTable id="dtNumericoBeneficiarios" value="#{proyectoController.proyectoSelected.numericoBeneficiarioList}" var="numericoBenef" paginator="true"
                                             rows="10" rowIndexVar="index" resizableColumns="true" style="width: 99%"
                                             emptyMessage="No se encontraron Resultados"> 
                                    <p:column headerText="Nro." width="20">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="#{proyectoController.proyectoSelected.existeParticipacionComunidad?'Comunidad Beneficiaria':'Entidad Auspiciante'}" style="white-space: pre-line">
                                        <h:outputText value="#{numericoBenef.institucion.nombre}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Descripción Beneficiarios" style="white-space: pre-line"  rendered="#{!proyectoController.proyectoSelected.existeParticipacionComunidad}">
                                        <h:outputText value="#{numericoBenef.descripcionBeneficiarios}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Directos Hombres" width="70" style="white-space: pre-line">
                                        <h:outputText value="#{numericoBenef.nroBeneficiariosDirectosHombres}" style="white-space: pre-line; float:right">  
                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Directos Mujeres" width="70" style="white-space: pre-line">
                                        <h:outputText value="#{numericoBenef.nroBeneficiariosDirectosMujeres}" style="white-space: pre-line; float:right">  
                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Directos Niños" width="70" style="white-space: pre-line">
                                        <h:outputText value="#{numericoBenef.nroBeneficiariosDirectosNinios}" style="white-space: pre-line; float:right">  
                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Directos Personas con Capacidades Especiales" width="70" style="white-space: pre-line">
                                        <h:outputText value="#{numericoBenef.nroBeneficiariosDirectosDiscapacidad}" style="white-space: pre-line; float:right">  
                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Total Directos" width="60" style="white-space: pre-line">
                                        <h:outputText value="#{numericoBenef.totalBeneficiariosDirectos}" style="white-space: pre-line; float:right">  
                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Total Indirectos" width="70" style="white-space: pre-line">
                                        <h:outputText value="#{numericoBenef.nroBeneficiariosIndirectos}" style="white-space: pre-line; float:right">  
                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Total" width="70">
                                        <h:outputText value="#{numericoBenef.totalBeneficiarios}" style="white-space: pre-line; float:right">  
                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                        </h:outputText>
                                    </p:column>

                                    <p:column headerText="Editar" width="50" style ="text-align: center">
                                        <p:commandButton icon="ui-icon-pencil"
                                                         title="Editar el registro"
                                                         disabled="#{proyectoController.proyectoSelected.estado!='CEE'}"
                                                         update=":formPrincipal:panelEdicionNumericoBeneficiarios"
                                                         >
                                            <f:setPropertyActionListener value="#{numericoBenef}" target="#{proyectoController.compromisoParticipacionProyectoSelected}"/>
                                        </p:commandButton>
                                    </p:column>                                         


                                </p:dataTable>
                            </p:panel>

                            <!--panelPresupuestoEjecutado-->
                            <p:panel id="panelPresupuestoEjecutado" rendered="#{proyectoController.selectedNodeCode=='7.3'}" style="border: hidden; padding-left: 20px;">

                                <h:panelGrid columns="1" id="panelEdicionPresupuestoEjecutado">
                                    <p:focus context="panelEdicionPresupuestoEjecutado"/>
                                    <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirCierre}" style="color:red"></p:outputLabel>


                                    <h:panelGrid columns="2" rendered="#{!proyectoController.modoEdicion}">
                                        <p:commandButton value="Editar" title="Editar presupuesto ejecutado" icon="ui-icon-plus" 
                                                         update=":formPrincipal:panelPresupuestoEjecutado"
                                                         disabled="#{proyectoController.proyectoSelected.estado!='CEE'}"
                                                         action="#{proyectoController.seleccionarEdicion}" 
                                                         >
                                        </p:commandButton>
                                    </h:panelGrid>

                                    <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px"
                                                 rendered="#{proyectoController.modoEdicion}">
                                        <p:commandButton id="btnGrabarPresupuestoEjecutado" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                         update=":formPrincipal:panelPresupuestoEjecutado, :formPrincipal:message1" 
                                                         action ="#{proyectoController.grabarPresupuestoEjecutado()}"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                        </p:commandButton>
                                        <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                         update=":formPrincipal:panelPresupuestoEjecutado" 
                                                         action="#{proyectoController.cancelarPresupuestoEjecutado()}">
                                        </p:commandButton>
                                    </h:panelGrid> 
                                    <h:outputLabel value="Aporte de la Universidad (asignación presupuestaria – Gasto No Permanente):" style="font-weight: bold"/>
                                    <p:dataTable id="dtPresupuestoEjecutado1" value="#{proyectoController.proyectoSelected.detallePresupuestoUniversidadGastoNoPermanente}" var="presupuestoUnivNoPerEje" 
                                                 rowIndexVar="index" resizableColumns="true"
                                                 style="width: 95%"
                                                 emptyMessage="No se encontraron Resultados"> 
                                        <p:column headerText="Nro." width="20">
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>
                                        <p:column headerText="Partida Presupuestaria" sortBy="#{presupuestoUnivNoPerEje.nombreCompleto}">
                                            <h:outputText value="#{presupuestoUnivNoPerEje.nombreCompleto}" style="white-space: pre-line"/>                                    
                                        </p:column>
                                        <p:column headerText="Valor Planificado (USD)" width="130" sortBy="#{presupuestoUnivNoPerEje.total}">
                                            <h:outputText value="#{presupuestoUnivNoPerEje.total}" style="white-space: pre-line; float:right">  
                                                <f:convertNumber locale="es_ES"  pattern="#,###,##0.00" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Valor Ejecutado (USD)" width="130" sortBy="#{presupuestoUnivNoPerEje.totalEjecutado}"
                                                  rendered="#{!proyectoController.modoEdicion}">
                                            <h:outputText value="#{presupuestoUnivNoPerEje.totalEjecutado}" style="white-space: pre-line; float:right">  
                                                <f:convertNumber locale="es_ES"  pattern="#,###,##0.00" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Valor Ejecutado (USD)" width="130" sortBy="#{presupuestoUnivNoPerEje.totalEjecutado}"
                                                  rendered="#{proyectoController.modoEdicion}">
                                            <pe:inputNumber value="#{presupuestoUnivNoPerEje.totalEjecutado}" decimalPlaces="2" minValue="0" maxValue="1000000" styleClass="inputNumber">  
                                                <p:ajax event="change" update=":formPrincipal:dtPresupuestoEjecutado1, :formPrincipal:panelTotalPresupuesto"/>
                                            </pe:inputNumber>
                                        </p:column>
                                        <p:columnGroup type="footer">
                                            <p:row>
                                                <p:column colspan="2" style="text-align:right" footerText="Total:" />
                                                <p:column footerText="#{proyectoController.proyectoSelected.totalPresupuestoUniversidadGastoNoPermanenteStr}" style="text-align: right" ></p:column>
                                                <p:column footerText="#{proyectoController.proyectoSelected.totalPresupuestoEjecutadoUniversidadGastoNoPermanenteStr}" style="text-align: right" ></p:column>
                                            </p:row>
                                        </p:columnGroup>    

                                    </p:dataTable>

                                    <h:outputLabel value="Aporte de la Universidad (sin asignación presupuestaria – Gasto Permanente):" style="font-weight: bold"/>
                                    <p:dataTable id="dtPresupuestoEjecutado2" value="#{proyectoController.proyectoSelected.detallePresupuestoUniversidadGastoPermanente}" var="presupuestoUnivPerEje" 
                                                 rowIndexVar="index" resizableColumns="true"
                                                 style="width: 95%"
                                                 emptyMessage="No se encontraron Resultados"> 
                                        <p:column headerText="Nro." width="20">
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>
                                        <p:column headerText="Partida Presupuestaria" sortBy="#{presupuestoUnivPerEje.nombreCompleto}">
                                            <h:outputText value="#{presupuestoUnivPerEje.nombreCompleto}" style="white-space: pre-line"/>                                    
                                        </p:column>
                                        <p:column headerText="Valor Planificado (USD)" width="130" sortBy="#{presupuestoUnivPerEje.total}">
                                            <h:outputText value="#{presupuestoUnivPerEje.total}" style="white-space: pre-line; float:right">  
                                                <f:convertNumber locale="es_ES"  pattern="#,###,##0.00" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Valor Ejecutado (USD)" width="130" sortBy="#{presupuestoUnivPerEje.totalEjecutado}"
                                                  rendered="#{!proyectoController.modoEdicion}">
                                            <h:outputText value="#{presupuestoUnivPerEje.totalEjecutado}" style="white-space: pre-line; float:right">  
                                                <f:convertNumber locale="es_ES"  pattern="#,###,##0.00" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Valor Ejecutado (USD)" width="130" sortBy="#{presupuestoUnivPerEje.totalEjecutado}"
                                                  rendered="#{proyectoController.modoEdicion}">
                                            <pe:inputNumber value="#{presupuestoUnivPerEje.totalEjecutado}" decimalPlaces="2" minValue="0" maxValue="1000000" styleClass="inputNumber">  
                                                <p:ajax event="change" update=":formPrincipal:dtPresupuestoEjecutado2, :formPrincipal:panelTotalPresupuesto"/>
                                            </pe:inputNumber>
                                        </p:column>
                                        <p:columnGroup type="footer">
                                            <p:row>
                                                <p:column colspan="2" style="text-align:right" footerText="Total:" />
                                                <p:column footerText="#{proyectoController.proyectoSelected.totalPresupuestoUniversidadGastoPermanente}" style="text-align: right" ></p:column>
                                                <p:column footerText="#{proyectoController.proyectoSelected.totalPresupuestoEjecutadoUniversidadGastoPermanenteStr}" style="text-align: right" ></p:column>
                                            </p:row>
                                        </p:columnGroup>    
                                    </p:dataTable>


                                    <h:outputLabel value="Aporte de la Entidad Auspiciante:" style="font-weight: bold"/>
                                    <p:dataTable id="dtPresupuestoEjecutado3" value="#{proyectoController.proyectoSelected.detallePresupuestoEntidadAuspiciante}" var="presupuestoEntEje"
                                                 rowIndexVar="index"  
                                                 style="width: 95%"
                                                 resizableColumns="true"
                                                 emptyMessage="No se encontraron Resultados"> 
                                        <p:column headerText="Nro." width="20" >
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>
                                        <p:column headerText="Bien y/o Servicio" sortBy="#{presupuestoEntEje.bienServicio}">
                                            <h:outputText value="#{presupuestoEntEje.bienServicio}" style="white-space: pre-line"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Valor Planificado (USD)" width="130" sortBy="#{presupuestoEntEje.total}">
                                            <h:outputText value="#{presupuestoEntEje.total}" style="white-space: pre-line; float:right">  
                                                <f:convertNumber locale="es_ES"  pattern="#,###,##0.00" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Valor Ejecutado (USD)" width="130" sortBy="#{presupuestoEntEje.totalEjecutado}"
                                                  rendered="#{!proyectoController.modoEdicion}">
                                            <h:outputText value="#{presupuestoEntEje.totalEjecutado}" style="white-space: pre-line; float:right">  
                                                <f:convertNumber locale="es_ES"  pattern="#,###,##0.00" />
                                            </h:outputText>
                                        </p:column>                                        
                                        <p:column headerText="Valor Ejecutado (USD)" width="130" sortBy="#{presupuestoEntEje.totalEjecutado}"
                                                  rendered="#{proyectoController.modoEdicion}">
                                            <pe:inputNumber value="#{presupuestoEntEje.totalEjecutado}" decimalPlaces="2" minValue="0" maxValue="1000000" styleClass="inputNumber">  
                                                <p:ajax event="change" update=":formPrincipal:dtPresupuestoEjecutado3, :formPrincipal:panelTotalPresupuesto"/>
                                            </pe:inputNumber>
                                        </p:column>
                                        <p:columnGroup type="footer">
                                            <p:row>
                                                <p:column colspan="2" style="text-align:right" footerText="Total:" />
                                                <p:column footerText="#{proyectoController.proyectoSelected.totalPresupuestoEntidadAuspicianteStr}" style="text-align: right" ></p:column>
                                                <p:column footerText="#{proyectoController.proyectoSelected.totalPresupuestoEjecutadoEntidadAuspicianteStr}" style="text-align: right" ></p:column>
                                            </p:row>
                                        </p:columnGroup>    
                                    </p:dataTable>                                  


                                    <h:outputLabel value="Aporte de la Comunidad Beneficiaria:" style="font-weight: bold"/>
                                    <p:dataTable id="dtPresupuestoEjecutado4" value="#{proyectoController.proyectoSelected.detallePresupuestoComunidadBeneficiaria}" var="presupuestoComEje"
                                                 rowIndexVar="index"  
                                                 style="width: 95%"
                                                 resizableColumns="true"
                                                 emptyMessage="No se encontraron Resultados"> 
                                        <p:column headerText="Nro." width="20" >
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>
                                        <p:column headerText="Bien y/o Servicio" sortBy="#{presupuestoComEje.bienServicio}">
                                            <h:outputText value="#{presupuestoComEje.bienServicio}" style="white-space: pre-line"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Valor Planificado (USD)" width="130" sortBy="#{presupuestoComEje.total}">
                                            <h:outputText value="#{presupuestoComEje.total}" style="white-space: pre-line; float:right">  
                                                <f:convertNumber locale="es_ES"  pattern="#,###,##0.00" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Valor Ejecutado (USD)" width="130" sortBy="#{presupuestoComEje.totalEjecutado}"
                                                  rendered="#{!proyectoController.modoEdicion}">
                                            <h:outputText value="#{presupuestoComEje.totalEjecutado}" style="white-space: pre-line; float:right">  
                                                <f:convertNumber locale="es_ES"  pattern="#,###,##0.00" />
                                            </h:outputText>
                                        </p:column>                                        

                                        <p:column headerText="Valor Ejecutado (USD)" width="130" sortBy="#{presupuestoComEje.totalEjecutado}"
                                                  rendered="#{proyectoController.modoEdicion}">
                                            <pe:inputNumber value="#{presupuestoComEje.totalEjecutado}" decimalPlaces="2" minValue="0" maxValue="1000000" styleClass="inputNumber" >  
                                                <p:ajax event="change" update=":formPrincipal:dtPresupuestoEjecutado4, :formPrincipal:panelTotalPresupuesto"/>
                                            </pe:inputNumber>
                                        </p:column>
                                        <p:columnGroup type="footer">
                                            <p:row>
                                                <p:column colspan="2" style="text-align:right" footerText="Total:" />
                                                <p:column footerText="#{proyectoController.proyectoSelected.totalPresupuestoComunidadBeneficiariaStr}" style="text-align: right" ></p:column>
                                                <p:column footerText="#{proyectoController.proyectoSelected.totalPresupuestoEjecutadoComunidadBeneficiariaStr}" style="text-align: right" ></p:column>
                                            </p:row>
                                        </p:columnGroup>    

                                    </p:dataTable>    

                                    <h:panelGrid id="panelTotalPresupuesto" columns="3">
                                        <p:outputLabel value="TOTAL PLANIFICADO PROYECTO (USD):" style="font-weight: bold"/>
                                        <p:spacer width="20" height="1"/>
                                        <p:outputLabel value="#{proyectoController.proyectoSelected.totalPresupuestoStr}" style="font-weight: bold"/>
                                        <p:outputLabel value="TOTAL EJECUTADO PROYECTO (USD):" style="font-weight: bold"/>
                                        <p:spacer width="20" height="1"/>
                                        <p:outputLabel value="#{proyectoController.proyectoSelected.totalPresupuestoEjecutadoStr}" style="font-weight: bold"/>
                                    </h:panelGrid>

                                </h:panelGrid>                              

                            </p:panel>



                            <!--panelObjetivosEjecutados-->
                            <p:panel id="panelObjetivosEjecutados" rendered="#{proyectoController.selectedNodeCode=='7.2'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid columns="1" id="panelEdicionObjetivosEjecutados">
                                    <p:focus context="panelEdicionObjetivosEjecutados"/>
                                    <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirCierre}" style="color:red"></p:outputLabel>                                    
                                    <h:panelGrid columns="2" rendered="#{!proyectoController.modoEdicion}">
                                        <p:commandButton value="Editar" title="Editar objetivos ejecutados" icon="ui-icon-plus" 
                                                         update=":formPrincipal:panelObjetivosEjecutados"
                                                         disabled="#{proyectoController.proyectoSelected.estado!='CEE'}"
                                                         action="#{proyectoController.seleccionarEdicion}" 
                                                         >
                                        </p:commandButton>
                                    </h:panelGrid>

                                    <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px"
                                                 rendered="#{proyectoController.modoEdicion}">
                                        <p:commandButton id="btnGrabarObjetivosEjecutados" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                         update=":formPrincipal:panelObjetivosEjecutados, :formPrincipal:message1" 
                                                         action ="#{proyectoController.grabarObjetivosEjecutados()}"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                        </p:commandButton>
                                        <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                         update=":formPrincipal:panelObjetivosEjecutados" 
                                                         action="#{proyectoController.cancelarObjetivosEjecutados()}">
                                        </p:commandButton>
                                    </h:panelGrid>                                     
                                    <p:dataTable id="dataTObjetivosEje" value="#{proyectoController.proyectoSelected.objetivoProyectoPadreList}" var="objetivoProyectoEje" paginator="false"
                                                 expandedRow="#{objetivoProyectoEje.expanded}" rows="10" rowIndexVar="index" resizableColumns="false"
                                                 emptyMessage="No se encontraron Resultados"> 
                                        <p:ajax event="rowToggle" listener="#{proyectoController.onRowToggleObjetivoProyecto}"/> 
                                        <p:column style="width: 20px" rendered="false">
                                            <p:rowToggler rendered="#{objetivoProyectoEje.svopTipo!=1}"/>
                                        </p:column>
                                        <p:column headerText="Nro." width="20" rendered="false" >
                                            <h:outputText value="#{objetivoProyectoEje.svopOrden}"/>
                                        </p:column>
                                        <p:column headerText="" width="50">
                                            <h:outputText value="#{objetivoProyectoEje.tipoStr}" style="white-space: pre-line"/>
                                        </p:column>
                                        <p:column headerText="Descripción" width="270"> 
                                            <h:outputText value="#{objetivoProyectoEje.svopObjetivoProy}" style="white-space: pre-line;"/>
                                        </p:column>
                                        <p:column headerText="Medio de verificación" width="240">
                                            <h:outputText value="#{objetivoProyectoEje.svopMverifica}" style="white-space: pre-line;"/>
                                        </p:column>

                                        <p:column headerText="Tipo Indicador" width="60">
                                            <h:outputText value="#{objetivoProyectoEje.indicadorTipo==1?'Valor':'Porcentaje'}" style="white-space: pre-line;"/>
                                        </p:column>
                                        <p:column headerText="Descripción Indicador">
                                            <h:outputText value="#{objetivoProyectoEje.svopIndicador}" style="white-space: pre-line;"/>
                                        </p:column>
                                        <p:column headerText="Valor Indicador Planificado" width="55">
                                            <h:outputText value="#{objetivoProyectoEje.indicadorValor}" style="white-space: pre-line;">
                                                <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Valor Indicador Ejecutado" width="55" rendered="#{!proyectoController.modoEdicion}">
                                            <h:outputText value="#{objetivoProyectoEje.indicadorValorEjecutado}" style="white-space: pre-line;">
                                                <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Valor Indicador Ejecutado" width="55" rendered="#{proyectoController.modoEdicion}">
                                            <pe:inputNumber value="#{objetivoProyectoEje.indicadorValorEjecutado}" decimalPlaces="0" minValue="0" maxValue="1000000" styleClass="inputNumberObjetivoEjecutado">  
                                            </pe:inputNumber>
                                        </p:column>

                                        <p:rowExpansion  >
                                            <p:panel style="border:hidden; width:98%; padding-left: 20px">
                                                <h:outputLabel value="Componentes (objetivos específicos):" style="font-weight: bold"/>
                                                <p:dataTable id="dataTComponentesEje" value="#{objetivoProyectoEje.svinObjetivoHijoList}" var="componenteEje"
                                                             expandedRow="#{componenteEje.expanded}" rowIndexVar="index" styleClass="hide-column-names"
                                                             emptyMessage="No existen registros"> 
                                                    <p:ajax event="rowToggle" listener="#{proyectoController.onRowToggleObjetivoProyecto}"/>
                                                    <p:column style="width: 20px" rendered="false">
                                                        <p:rowToggler/> 
                                                    </p:column>
                                                    <p:column headerText="Nro." style="width: 10px">
                                                        <h:outputText value="#{componenteEje.svopOrden}" />
                                                    </p:column>
                                                    <p:column headerText="Descripción" style="width: 280px"> 
                                                        <h:outputText value="#{componenteEje.svopObjetivoProy}" style="white-space: pre-line;"/>
                                                    </p:column>
                                                    <p:column headerText="Medio de verificación" style="width: 240px">
                                                        <h:outputText value="#{componenteEje.svopMverifica}" style="white-space: pre-line;"/>
                                                    </p:column>
                                                    <p:column headerText="Tipo Indicador" style="width: 60px">
                                                        <h:outputText value="#{componenteEje.indicadorTipo==1?'Valor':'Porcentaje'}" style="white-space: pre-line;"/>
                                                    </p:column>
                                                    <p:column headerText="Descripción Indicador">
                                                        <h:outputText value="#{componenteEje.svopIndicador}" style="white-space: pre-line;"/>
                                                    </p:column>
                                                    <p:column headerText="Valor Indicador" style="width: 50px">
                                                        <h:outputText value="#{componenteEje.indicadorValor}" style="white-space: pre-line;">
                                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Valor Indicador Ejecutado" style="width: 50px" rendered="#{!proyectoController.modoEdicion}">
                                                        <h:outputText value="#{componenteEje.indicadorValorEjecutado}" style="white-space: pre-line;">
                                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Valor Indicador Ejecutado" style="width: 50px" rendered="#{proyectoController.modoEdicion}">
                                                        <pe:inputNumber value="#{componenteEje.indicadorValorEjecutado}" decimalPlaces="0" minValue="0" maxValue="1000000" styleClass="inputNumberObjetivoEjecutado">  
                                                        </pe:inputNumber>
                                                    </p:column>

                                                    <p:rowExpansion >
                                                        <p:panel style="border:hidden;width:98%; padding-left: 30px"  >
                                                            <h:outputLabel value="Actividades:" style="font-weight: bold"/>
                                                            <p:dataTable id="dataTActividadesEje" value="#{componenteEje.svinObjetivoHijoList}" var="actividadEje"
                                                                         emptyMessage="No existen registros"
                                                                         rowIndexVar="index">
                                                                <p:ajax event="rowToggle" listener="#{proyectoController.onRowToggleObjetivoProyecto}"/>
                                                                <p:column headerText="Nro." style ="width: 10px;">
                                                                    <h:outputText value="#{actividadEje.svopOrden}" />
                                                                </p:column>
                                                                <p:column headerText="Descripción" style ="width: 240px;"> 
                                                                    <h:outputText value="#{actividadEje.svopObjetivoProy}" style="white-space: pre-line;"/>
                                                                </p:column>
                                                                <p:column headerText="Medio de verificación" style ="width: 240px;">
                                                                    <h:outputText value="#{actividadEje.svopMverifica}" style="white-space: pre-line;"/>
                                                                </p:column>
                                                                <p:column headerText="Tipo Indicador" style ="width: 60px;">
                                                                    <h:outputText value="#{actividadEje.indicadorTipo==1?'Valor':'Porcentaje'}" style="white-space: pre-line;"/>
                                                                </p:column>
                                                                <p:column headerText="Descripción Indicador" >
                                                                    <h:outputText value="#{actividadEje.svopIndicador}" style="white-space: pre-line;"/>
                                                                </p:column>
                                                                <p:column headerText="Valor Indicador" style ="width: 50px;">
                                                                    <h:outputText value="#{actividadEje.indicadorValor}" style="white-space: pre-line;">
                                                                        <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                                                    </h:outputText>
                                                                </p:column>
                                                                <p:column headerText="Valor Indicador Ejecutado" style="width: 50px" rendered="#{!proyectoController.modoEdicion}">
                                                                    <h:outputText value="#{actividadEje.indicadorValorEjecutado}" style="white-space: pre-line;">
                                                                        <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                                                    </h:outputText>
                                                                </p:column>
                                                                <p:column headerText="Valor Indicador Ejecutado" style="width: 50px" rendered="#{proyectoController.modoEdicion}">
                                                                    <pe:inputNumber value="#{actividadEje.indicadorValorEjecutado}" decimalPlaces="0" minValue="0" maxValue="1000000" styleClass="inputNumberObjetivoEjecutado">  
                                                                    </pe:inputNumber>
                                                                </p:column>

                                                            </p:dataTable>
                                                        </p:panel>
                                                    </p:rowExpansion>                                                        
                                                </p:dataTable>
                                            </p:panel>
                                        </p:rowExpansion>                                        
                                    </p:dataTable>
                                </h:panelGrid>
                            </p:panel>


                            <!--panelResultadosProyecto-->
                            <p:panel id="panelResultadosProyecto" rendered="#{proyectoController.selectedNodeCode=='7.4'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid columns="1" id="panelEdicionResultadosProyecto">
                                    <p:focus context="panelEdicionResultadosProyecto"/>
                                    <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirCierre}" style="color:red"></p:outputLabel>
                                    <h:panelGrid columns="2" rendered="#{!proyectoController.modoEdicion}">
                                        <p:commandButton value="Editar" title="Editar los resultados del proyecto" icon="ui-icon-plus" 
                                                         update=":formPrincipal:panelResultadosProyecto"
                                                         disabled="#{proyectoController.proyectoSelected.estado!='CEE'}"
                                                         action="#{proyectoController.seleccionarEdicion}" 
                                                         >
                                        </p:commandButton>
                                    </h:panelGrid>

                                    <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px"
                                                 rendered="#{proyectoController.modoEdicion}">
                                        <p:commandButton id="btnGrabarResultadosProyecto" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                         update=":formPrincipal:panelResultadosProyecto, :formPrincipal:message1" 
                                                         action ="#{proyectoController.grabarProyecto()}"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                        </p:commandButton>
                                        <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                         update=":formPrincipal:panelResultadosProyecto" 
                                                         action="#{proyectoController.cancelarEdicionProyecto()}">
                                        </p:commandButton>
                                    </h:panelGrid>                                     

                                    <h:panelGrid columns="1" cellpadding="0" cellspacing="0" style="margin-bottom: 10px">
                                        <h:panelGrid columns="2">
                                            <p:outputLabel for="txtCierreProductos" value="* Productos y/o servicios generados por el proyecto:" style="font-weight: bold"></p:outputLabel>
                                            <p:message for="txtCierreProductos"></p:message>
                                        </h:panelGrid>
                                        <p:inputTextarea id="txtCierreProductos" value="#{proyectoController.proyectoSelected.cierreProductos}"
                                                         disabled="#{!proyectoController.modoEdicion}"
                                                         cols="150" rows="3" maxlength="500"
                                                         required="#{not empty param['formPrincipal:btnGrabarResultadosProyecto']}">
                                        </p:inputTextarea>


                                        <h:panelGrid columns="2">
                                            <p:outputLabel for="txtCierreBienes" value="* Bienes a favor de la ESPE:" style="font-weight: bold"></p:outputLabel>
                                            <p:message for="txtCierreBienes"></p:message>
                                        </h:panelGrid>
                                        <p:inputTextarea id="txtCierreBienes" value="#{proyectoController.proyectoSelected.cierreBienes}"
                                                         disabled="#{!proyectoController.modoEdicion}"
                                                         cols="150" rows="3" maxlength="500"
                                                         required="#{not empty param['formPrincipal:btnGrabarResultadosProyecto']}">
                                        </p:inputTextarea>

                                        <h:panelGrid columns="2">
                                            <p:outputLabel for="txtCierreResultados" value="* Resultados del proyecto:" style="font-weight: bold"></p:outputLabel>
                                            <p:message for="txtCierreResultados"></p:message>
                                        </h:panelGrid>
                                        <p:inputTextarea id="txtCierreResultados" value="#{proyectoController.proyectoSelected.cierreResultados}"
                                                         disabled="#{!proyectoController.modoEdicion}"
                                                         cols="150" rows="3" maxlength="500"
                                                         required="#{not empty param['formPrincipal:btnGrabarResultadosProyecto']}">
                                        </p:inputTextarea>


                                        <h:panelGrid columns="2">
                                            <p:outputLabel for="txtCierreOtrasAplicaciones" value="* Otras aplicaciones del producto y/o servicios:" style="font-weight: bold"></p:outputLabel>
                                            <p:message for="txtCierreOtrasAplicaciones"></p:message>
                                        </h:panelGrid>
                                        <p:inputTextarea id="txtCierreOtrasAplicaciones" value="#{proyectoController.proyectoSelected.cierreOtrasAplicaciones}"
                                                         disabled="#{!proyectoController.modoEdicion}"
                                                         cols="150" rows="3" maxlength="500"
                                                         required="#{not empty param['formPrincipal:btnGrabarResultadosProyecto']}">
                                        </p:inputTextarea>


                                        <h:panelGrid columns="2">
                                            <p:outputLabel for="txtCierreImpactoFuturo" value="* Impacto futuro del proyecto:" style="font-weight: bold"></p:outputLabel>
                                            <p:message for="txtCierreImpactoFuturo"></p:message>
                                        </h:panelGrid>
                                        <p:inputTextarea id="txtCierreImpactoFuturo" value="#{proyectoController.proyectoSelected.cierreImpactoFuturo}"
                                                         disabled="#{!proyectoController.modoEdicion}"
                                                         cols="150" rows="3" maxlength="500"
                                                         required="#{not empty param['formPrincipal:btnGrabarResultadosProyecto']}">
                                        </p:inputTextarea>


                                        <h:panelGrid columns="2">
                                            <p:outputLabel for="txtCierreRestricciones" value="* Restricciones que limitan el impacto del proyecto:" style="font-weight: bold"></p:outputLabel>
                                            <p:message for="txtCierreRestricciones"></p:message>
                                        </h:panelGrid>
                                        <p:inputTextarea id="txtCierreRestricciones" value="#{proyectoController.proyectoSelected.cierreRestricciones}"
                                                         disabled="#{!proyectoController.modoEdicion}"
                                                         cols="150" rows="3" maxlength="500"
                                                         required="#{not empty param['formPrincipal:btnGrabarResultadosProyecto']}">
                                        </p:inputTextarea>


                                        <h:panelGrid columns="2">
                                            <p:outputLabel for="txtCierreComentarios" value="* Comentarios Generales:" style="font-weight: bold"></p:outputLabel>
                                            <p:message for="txtCierreComentarios"></p:message>
                                        </h:panelGrid>
                                        <p:inputTextarea id="txtCierreComentarios" value="#{proyectoController.proyectoSelected.cierreComentarios}"
                                                         disabled="#{!proyectoController.modoEdicion}"
                                                         cols="150" rows="3" maxlength="500"
                                                         required="#{not empty param['formPrincipal:btnGrabarResultadosProyecto']}">
                                        </p:inputTextarea>


                                    </h:panelGrid>                                    

                                </h:panelGrid>
                            </p:panel>


                            <!--panelFinalizarCierre-->
                            <p:panel id="panelFinalizarCierre" rendered="#{proyectoController.selectedNodeCode=='7.5'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionFinalizarCierre" cellspacing="5" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:fieldset 
                                        legend="FINALIZAR PROCESO DE CIERRE">
                                        <h:panelGrid columns="1" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                            <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirCierre}" style="color:red"></p:outputLabel>
                                            <p:outputLabel rendered="#{proyectoController.proyectoSelected.estado=='CEE'}" value="Una vez finalizado el proceso, no se podrá modificar la información registrada del cierre de proyecto..." style="font-weight: bold"></p:outputLabel>
                                            <p:outputLabel rendered="#{proyectoController.proyectoSelected.estado=='CER' or proyectoController.proyectoSelected.estado=='EVA'}" value="Proceso de cierre Finalizado" style="font-weight: bold"></p:outputLabel>
                                            <p:spacer height="20"></p:spacer>
                                            <h:panelGrid columns="2">
                                                <p:outputLabel for="txtFechaCierre" value="* Fecha Cierre:" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <p:calendar id="txtFechaCierre" navigator="true" value="#{proyectoController.proyectoSelected.fechaCierre}" yearRange="2015:2030" size="10" locale="es" pattern="dd/MM/yyyy"
                                                                disabled="#{proyectoController.proyectoSelected.estado!='CEE'}"
                                                                required="#{not empty param['formPrincipal:btnFinalizarCierre']}">
                                                    </p:calendar>
                                                    <p:message for="txtFechaCierre"></p:message>
                                                </h:panelGrid>
                                            </h:panelGrid>


                                            <p:commandButton id="btnFinalizarCierre" value="Finalizar" title="Grabar Información" icon="ui-icon-check" 
                                                             disabled="#{proyectoController.proyectoSelected.estado!='CEE'}"
                                                             update=":formPrincipal:panelFinalizarCierre, :formPrincipal:panelTitulo,  :formPrincipal:message1" 
                                                             action ="#{proyectoController.finalizarCierre}"
                                                             onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                <p:confirm header="Confirmación" message="Confirma que desea finalizar el proceso de cierre del proyecto ?" icon="ui-icon-alert" />
                                            </p:commandButton>
                                        </h:panelGrid>                                          

                                    </p:fieldset>
                                </h:panelGrid>
                            </p:panel>         


                            <!--panelFinalizarEjecucion-->
                            <p:panel id="panelFinalizarEjecucion" rendered="#{proyectoController.selectedNodeCode=='5.4'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionFinalizarEjecucion" cellspacing="5" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:fieldset 
                                        legend="FINALIZAR PROCESO DE EJECUCION">
                                        <h:panelGrid columns="1" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                            <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirEjecucion}" style="color:red"></p:outputLabel>
                                            <p:outputLabel rendered="#{proyectoController.proyectoSelected.estado=='APR2'}" value="Una vez finalizado el proceso, no se podrá modificar la información de ejecución del proyecto..." style="font-weight: bold"></p:outputLabel>
                                            <p:outputLabel rendered="#{proyectoController.proyectoSelected.estado=='CEE' or proyectoController.proyectoSelected.estado=='CER' or proyectoController.proyectoSelected.estado=='EVA'}" value="Proceso de ejecución Finalizado" style="font-weight: bold"></p:outputLabel>
                                            <p:spacer height="20"></p:spacer>

                                            <p:commandButton id="btnFinalizarEjecucion" value="Finalizar" title="Grabar Información" icon="ui-icon-check" 
                                                             disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                             update=":formPrincipal:panelFinalizarEjecucion,  :formPrincipal:panelTitulo,  :formPrincipal:message1"
                                                             action ="#{proyectoController.finalizarEjecucion}"
                                                             onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                <p:confirm header="Confirmación" message="Confirma que desea finalizar el proceso de ejecución del proyecto ?" icon="ui-icon-alert" />
                                            </p:commandButton>
                                        </h:panelGrid>                                          

                                    </p:fieldset>
                                </h:panelGrid>
                            </p:panel>                                


                            <!--Horas Dedicacion Docentes-->
                            <p:panel id="panelHorasDedicacionDocente" rendered="#{proyectoController.selectedNodeCode=='5.2'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid id="panelEdicionHorasDedicacionDocente" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirEjecucion}" style="color:red"></p:outputLabel>
                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%" 
                                                 rendered="#{proyectoController.horasResponsableProyectoSelected !=null}">
                                        <p:fieldset legend="#{proyectoController.horasResponsableProyectoSelected.id==null ? 'NUEVO REGISTRO DE HORAS DE DEDICACION DE DOCENTE':'EDICION DE REGISTRO DE HORAS DE DEDICACION DE DOCENTE'}">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarHorasDedicacionDocente" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelHorasDedicacionDocente, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarHorasDedicacionDocente()}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelHorasDedicacionDocente" 
                                                                 action="#{proyectoController.cancelarHorasDedicacionDocente()}">
                                                </p:commandButton>
                                            </h:panelGrid>    

                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px">

                                                <p:outputLabel value="* Docente:" for="txtNombreHorasDedicacionDocente" style="font-weight: bold"/>
                                                <h:panelGrid columns="2" >
                                                    <p:inputText id="txtNombreHorasDedicacionDocente" style="width: 300px"
                                                                 value="#{proyectoController.horasResponsableProyectoSelected.responsableProyecto.usuario.usuCc.concat('-').concat(proyectoController.horasResponsableProyectoSelected.responsableProyecto.usuario.usuNombres).concat(' ').concat(proyectoController.horasResponsableProyectoSelected.responsableProyecto.usuario.usuApellidos)}"
                                                                 maxlength="150" disabled ="true" required="#{not empty param['formPrincipal:btnGrabarHorasDedicacionDocente']}">
                                                    </p:inputText>
                                                    <p:message for="txtNombreHorasDedicacionDocente"></p:message>
                                                </h:panelGrid> 

                                                <p:outputLabel value="* Fecha desde (dd/mm/aaaa):" for="calFechaDesdeHorasDedicacionDocente" style="font-weight: bold"/>
                                                <h:panelGrid columns="2" >
                                                    <p:calendar id="calFechaDesdeHorasDedicacionDocente" navigator="true" value="#{proyectoController.horasResponsableProyectoSelected.fechaDesde}" yearRange="2015:2030" size="10" locale="es" pattern="dd/MM/yyyy"
                                                                required="#{not empty param['formPrincipal:btnGrabarHorasDedicacionDocente']}">
                                                    </p:calendar>
                                                    <p:message for="calFechaDesdeHorasDedicacionDocente"></p:message>
                                                </h:panelGrid>

                                                <p:outputLabel value="* Fecha hasta (dd/mm/aaaa):" for="calFechaHastaHorasDedicacionDocente" style="font-weight: bold"/>
                                                <h:panelGrid columns="2" >
                                                    <p:calendar id="calFechaHastaHorasDedicacionDocente" navigator="true" value="#{proyectoController.horasResponsableProyectoSelected.fechaHasta}" yearRange="2015:2030" size="10" locale="es" pattern="dd/MM/yyyy"
                                                                required="#{not empty param['formPrincipal:btnGrabarHorasDedicacionDocente']}">
                                                    </p:calendar>
                                                    <p:message for="calFechaHastaHorasDedicacionDocente"></p:message>
                                                </h:panelGrid>

                                                <p:outputLabel value="* Horas dedicadas:" for="txtNroHorasDedicacionDocente" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <pe:inputNumber id="txtNroHorasDedicacionDocente" value="#{proyectoController.horasResponsableProyectoSelected.cantidadHoras}" decimalPlaces="0" minValue="0" maxValue="1000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarHorasDedicacionDocente']}">  
                                                    </pe:inputNumber>
                                                    <p:message for="txtNroHorasDedicacionDocente"></p:message>
                                                </h:panelGrid>


                                            </h:panelGrid>                                            
                                        </p:fieldset>


                                    </h:panelGrid>

                                </h:panelGrid>
                                <h:outputLabel value="Horas dedicadas por docente participante:" style="font-weight: bold"/>

                                <p:dataTable id="dtDocentesParticipante2" value="#{proyectoController.proyectoSelected.participanteDocenteList}" var="docentePar2" paginator="true"
                                             rows="10" rowIndexVar="index" resizableColumns="true" style="width: 99%" expandedRow="true"
                                             emptyMessage="No se encontraron Resultados"> 
                                    <p:column style="width: 20px">
                                        <p:rowToggler/>
                                    </p:column>
                                    <p:column headerText="Nro." width="20">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Cédula" width="80">
                                        <h:outputText value="#{docentePar2.usuario.usuCc}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Apellidos">
                                        <h:outputText value="#{docentePar2.usuario.usuApellidos}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Nombres" width="200">
                                        <h:outputText value="#{docentePar2.usuario.usuNombres}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Correo Electrónico" width="180">
                                        <h:outputText value="#{docentePar2.usuario.usuEmail}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Departamento" width="120">
                                        <h:outputText value="#{docentePar2.departamento.stvsubjDesc}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Nro. Horas dedicadas al proyecto" width="80" style="white-space: pre-line; text-align: center">
                                        <h:outputText value="#{docentePar2.totalHorasDedicadas}" style="white-space: pre-line">
                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                        </h:outputText>
                                    </p:column>

                                    <p:rowExpansion >
                                        <p:panel style="border:hidden; width:95%; padding-left: 40px">
                                            <h:outputLabel value="Detalle de horas dedicadas:" style="font-weight: bold"/>
                                            <p:commandButton value="" title="Agregar Horas Dedicadas" icon="ui-icon-plus"
                                                             style="width: 30px; height: 20px"
                                                             disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                             action="#{proyectoController.nuevoHorasDedicacionDocente}"
                                                             update=":formPrincipal:panelEdicionHorasDedicacionDocente"
                                                             >
                                                <f:setPropertyActionListener value="#{docentePar2}" target="#{proyectoController.responsableProyectoSelected}"/>
                                            </p:commandButton>

                                            <p:dataTable value="#{docentePar2.horasDedicadasList}" var="horasDocente"
                                                         rendered="#{not empty docentePar2.horasDedicadasList}"
                                                         rowIndexVar="index" style="width: 440px">
                                                <p:column headerText="Nro." width="20">
                                                    <h:outputText value="#{index + 1}" />
                                                </p:column>
                                                <p:column headerText="Fecha Desde" width="60">
                                                    <h:outputText value="#{horasDocente.fechaDesde}">
                                                        <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Fecha Hasta" width="60">
                                                    <h:outputText value="#{horasDocente.fechaHasta}">
                                                        <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Nro. Horas dedicadas" style="white-space: pre-line; text-align: center">
                                                    <h:outputText value="#{horasDocente.cantidadHoras}">
                                                        <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Editar" width="50" style ="text-align: center">
                                                    <p:commandButton icon="ui-icon-pencil"
                                                                     title="Editar el registro"
                                                                     disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                                     update=":formPrincipal:panelEdicionHorasDedicacionDocente"
                                                                     >
                                                        <f:setPropertyActionListener value="#{horasDocente}" target="#{proyectoController.horasResponsableProyectoSelected}"/>
                                                    </p:commandButton>
                                                </p:column>                                         
                                                <p:column headerText="Eliminar" width="50" style ="text-align: center">
                                                    <p:commandButton title="Eliminar el registro" icon="ui-icon-trash" 
                                                                     process="@this"
                                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                                     disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                                     action="#{proyectoController.eliminarHorasDedicacionDocente()}"
                                                                     update=":formPrincipal:panelHorasDedicacionDocente, :formPrincipal:message1 ">
                                                        <f:setPropertyActionListener value="#{horasDocente}" target="#{proyectoController.horasResponsableProyectoSelected}" />
                                                        <p:confirm header="Confirmación" message="Confirma que desea eliminar el item seleccionado?" icon="ui-icon-alert" />
                                                    </p:commandButton>  
                                                </p:column>                                                
                                            </p:dataTable>                                            
                                        </p:panel>
                                    </p:rowExpansion>
                                </p:dataTable>
                            </p:panel>                            


                            <!--panelHorasDedicacionEstudiante-->
                            <p:panel id="panelHorasDedicacionEstudiante" rendered="#{proyectoController.selectedNodeCode=='5.3'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid id="panelEdicionHorasDedicacionEstudiante" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirEjecucion}" style="color:red"></p:outputLabel>                                    
                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%" 
                                                 rendered="#{proyectoController.horasResponsableProyectoSelected !=null}">
                                        <p:fieldset legend="#{proyectoController.horasResponsableProyectoSelected.id==null ? 'NUEVO REGISTRO DE HORAS DE DEDICACION DE ESTUDIANTE':'EDICION DE REGISTRO DE HORAS DE DEDICACION DE ESTUDIANTE'}">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarHorasDedicacionEstudiante" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelHorasDedicacionEstudiante, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarHorasDedicacionDocente()}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelHorasDedicacionEstudiante" 
                                                                 action="#{proyectoController.cancelarHorasDedicacionDocente()}">
                                                </p:commandButton>
                                            </h:panelGrid>    

                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px">

                                                <p:outputLabel value="* Estudiante:" for="txtNombreHorasDedicacionEstudiante" style="font-weight: bold"/>
                                                <h:panelGrid columns="2" >
                                                    <p:inputText id="txtNombreHorasDedicacionEstudiante" style="width: 300px"
                                                                 value="#{proyectoController.horasResponsableProyectoSelected.responsableProyecto.usuario.usuCc.concat('-').concat(proyectoController.horasResponsableProyectoSelected.responsableProyecto.usuario.usuNombres).concat(' ').concat(proyectoController.horasResponsableProyectoSelected.responsableProyecto.usuario.usuApellidos)}"
                                                                 maxlength="150" disabled ="true" required="#{not empty param['formPrincipal:btnGrabarHorasDedicacionEstudiante']}">
                                                    </p:inputText>
                                                    <p:message for="txtNombreHorasDedicacionEstudiante"></p:message>
                                                </h:panelGrid> 

                                                <p:outputLabel value="* Fecha desde (dd/mm/aaaa):" for="calFechaDesdeHorasDedicacionEstudiante" style="font-weight: bold"/>
                                                <h:panelGrid columns="2" >
                                                    <p:calendar id="calFechaDesdeHorasDedicacionEstudiante" navigator="true" value="#{proyectoController.horasResponsableProyectoSelected.fechaDesde}" yearRange="2015:2030" size="10" locale="es" pattern="dd/MM/yyyy"
                                                                required="#{not empty param['formPrincipal:btnGrabarHorasDedicacionEstudiante']}">
                                                    </p:calendar>
                                                    <p:message for="calFechaDesdeHorasDedicacionEstudiante"></p:message>
                                                </h:panelGrid>

                                                <p:outputLabel value="* Fecha hasta (dd/mm/aaaa):" for="calFechaHastaHorasDedicacionEstudiante" style="font-weight: bold"/>
                                                <h:panelGrid columns="2" >
                                                    <p:calendar id="calFechaHastaHorasDedicacionEstudiante" navigator="true" value="#{proyectoController.horasResponsableProyectoSelected.fechaHasta}" yearRange="2015:2030" size="10" locale="es" pattern="dd/MM/yyyy"
                                                                required="#{not empty param['formPrincipal:btnGrabarHorasDedicacionEstudiante']}">
                                                    </p:calendar>
                                                    <p:message for="calFechaHastaHorasDedicacionEstudiante"></p:message>
                                                </h:panelGrid>

                                                <p:outputLabel value="* Horas dedicadas:" for="txtNroHorasDedicacionEstudiante" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <pe:inputNumber id="txtNroHorasDedicacionEstudiante" value="#{proyectoController.horasResponsableProyectoSelected.cantidadHoras}" decimalPlaces="0" minValue="0" maxValue="1000000" styleClass="inputNumber" required="#{not empty param['formPrincipal:btnGrabarHorasDedicacionEstudiante']}">  
                                                    </pe:inputNumber>
                                                    <p:message for="txtNroHorasDedicacionEstudiante"></p:message>
                                                </h:panelGrid>


                                            </h:panelGrid>                                            
                                        </p:fieldset>


                                    </h:panelGrid>

                                </h:panelGrid>
                                <h:outputLabel value="Horas dedicadas por estudiante:" style="font-weight: bold"/>

                                <p:dataTable id="dtEstudianteProyecto2" value="#{proyectoController.proyectoSelected.participanteEstudianteList}" var="estudiantePar2" paginator="true"
                                             rows="10" rowIndexVar="index" resizableColumns="true" style="width: 99%" expandedRow="true"
                                             emptyMessage="No se encontraron Resultados"> 
                                    <p:column width="20">
                                        <p:rowToggler/>
                                    </p:column>
                                    <p:column headerText="Nro." width="20">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Cédula" width="80">
                                        <h:outputText value="#{estudiantePar2.usuario.usuCc}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Apellidos">
                                        <h:outputText value="#{estudiantePar2.usuario.usuApellidos}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Nombres" width="100">
                                        <h:outputText value="#{estudiantePar2.usuario.usuNombres}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Correo Electrónico" width="180">
                                        <h:outputText value="#{estudiantePar2.usuario.usuEmail}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Carrera" width="120">
                                        <h:outputText value="#{estudiantePar2.carrera.stvmajrDesc}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Departamento" width="120">
                                        <h:outputText value="#{estudiantePar2.departamento.stvsubjDesc}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="Nro. Horas dedicadas al proyecto" width="70" style="white-space: pre-line; text-align: center">
                                        <h:outputText value="#{estudiantePar2.totalHorasDedicadas}" style="white-space: pre-line">
                                            <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                        </h:outputText>
                                    </p:column>

                                    <p:rowExpansion >
                                        <p:panel style="border:hidden; width:95%; padding-left: 40px">
                                            <h:outputLabel value="Detalle de horas dedicadas:" style="font-weight: bold"/>
                                            <p:commandButton value="" title="Agregar Horas Dedicadas" icon="ui-icon-plus"
                                                             style="width: 30px; height: 20px"
                                                             disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                             action="#{proyectoController.nuevoHorasDedicacionDocente}"
                                                             update=":formPrincipal:panelEdicionHorasDedicacionEstudiante"
                                                             >
                                                <f:setPropertyActionListener value="#{estudiantePar2}" target="#{proyectoController.responsableProyectoSelected}"/>
                                            </p:commandButton>

                                            <p:dataTable value="#{estudiantePar2.horasDedicadasList}" var="horasEstudiante"
                                                         rendered="#{not empty estudiantePar2.horasDedicadasList}"
                                                         rowIndexVar="index" style="width: 440px">
                                                <p:column headerText="Nro." width="20">
                                                    <h:outputText value="#{index + 1}" />
                                                </p:column>
                                                <p:column headerText="Fecha Desde" width="60">
                                                    <h:outputText value="#{horasEstudiante.fechaDesde}">
                                                        <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Fecha Hasta" width="60">
                                                    <h:outputText value="#{horasEstudiante.fechaHasta}">
                                                        <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Nro. Horas dedicadas" style="white-space: pre-line; text-align: center">
                                                    <h:outputText value="#{horasEstudiante.cantidadHoras}">
                                                        <f:convertNumber locale="es_ES"  pattern="#,##0" />
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Editar" width="50" style ="text-align: center">
                                                    <p:commandButton icon="ui-icon-pencil"
                                                                     title="Editar el registro"
                                                                     disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                                     update=":formPrincipal:panelEdicionHorasDedicacionEstudiante"
                                                                     >
                                                        <f:setPropertyActionListener value="#{horasEstudiante}" target="#{proyectoController.horasResponsableProyectoSelected}"/>
                                                    </p:commandButton>
                                                </p:column>                                         
                                                <p:column headerText="Eliminar" width="50" style ="text-align: center">
                                                    <p:commandButton title="Eliminar el registro" icon="ui-icon-trash" 
                                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                                     disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                                     action="#{proyectoController.eliminarHorasDedicacionDocente()}"
                                                                     update=":formPrincipal:panelHorasDedicacionEstudiante, :formPrincipal:message1 ">
                                                        <f:setPropertyActionListener value="#{horasEstudiante}" target="#{proyectoController.horasResponsableProyectoSelected}" />
                                                        <p:confirm header="Confirmación" message="Confirma que desea eliminar el item seleccionado?" icon="ui-icon-alert" />
                                                    </p:commandButton>  
                                                </p:column>                                                
                                            </p:dataTable>                                            
                                        </p:panel>
                                    </p:rowExpansion>
                                </p:dataTable>
                            </p:panel>     


                            <!--tabP203: Informes de Avance-->
                            <p:panel id="panelAvance" rendered="#{proyectoController.selectedNodeCode=='5.1'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid id="pEdicionAvance" columns="1" >
                                    <h:panelGrid columns="3">
                                        <p:outputLabel value="Seleccione el Componente:" for="selComponenteAvance" style="font-weight: bold"/>  
                                        <p:selectOneMenu id="selComponenteAvance"
                                                         value="#{proyectoController.objetivoProyectoSelected}"
                                                         converter="omnifaces.SelectItemsConverter"
                                                         required="#{not empty param['formPrincipal:btnAgregarAvance']}"
                                                         >
                                            <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                            <f:selectItems value="#{proyectoController.proyectoSelected.componentes}" var="compAvance" itemLabel="#{compAvance.svopObjetivoProy}" itemValue="#{compAvance}"/>
                                            <p:ajax event="change" update=":formPrincipal:panelAvance" 
                                                    listener="#{proyectoController.cancelarAvance}" 
                                                    onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                    />                                                    
                                        </p:selectOneMenu>  
                                        <p:message for="selComponenteAvance"></p:message>


                                    </h:panelGrid>    


                                    <h:panelGrid columns="1" rendered="#{proyectoController.avanceComponenteSelected==null}">
                                        <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirEjecucion}" style="color:red"></p:outputLabel>                                        
                                        <p:commandButton id="btnAgregarAvance" value="Agregar" title="Agregar Información" icon="ui-icon-plus" 
                                                         update=":formPrincipal:pEdicionAvance"
                                                         disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                         actionListener="#{proyectoController.agregarAvance}" 
                                                         >
                                        </p:commandButton>
                                    </h:panelGrid>
                                    <h:panelGrid cellspacing="5" columns="1" rendered="#{proyectoController.avanceComponenteSelected!=null}">
                                        <p:fieldset legend="#{proyectoController.avanceComponenteSelected.id==null ? 'NUEVO INFORME DE AVANCE':'EDICION DE INFORME DE AVANCE'}">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarAvance" value="Grabar" title="Graba Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelAvance, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.registrarAvance}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 process="@this"
                                                                 update=":formPrincipal:panelAvance" 
                                                                 action="#{proyectoController.cancelarAvance}">
                                                </p:commandButton>
                                            </h:panelGrid>                                          

                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0">

                                                <p:outputLabel for="txtFechaAvance" value="Fecha (dd/mm/aaaa):" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <p:calendar id="txtFechaAvance" navigator="true" value="#{proyectoController.avanceComponenteSelected.fecha}" yearRange="2015:2030" size="10" locale="es" pattern="dd/MM/yyyy"
                                                                disabled="true">
                                                    </p:calendar>                                            
                                                    <p:message for="txtFechaAvance"></p:message>
                                                </h:panelGrid>

                                                <p:outputLabel for="txtObservacionAvance" value="Observación:" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <p:inputTextarea id="txtObservacionAvance" cols="100" rows="2"
                                                                     value="#{proyectoController.avanceComponenteSelected.observacion}"></p:inputTextarea>
                                                    <p:message for="txtObservacionAvance"></p:message>
                                                </h:panelGrid>



                                            </h:panelGrid>
                                            <h:outputLabel value="Actividades:" style="font-weight: bold"/>
                                            <p:dataTable value="#{proyectoController.avanceComponenteSelected.avanceActividadList}" var="avanceActiv"
                                                         editable="true" style="width: 100%; margin-bottom: 10px" rowIndexVar="index"  resizableColumns="true" 
                                                         emptyMessage="No se encontraron resultados">

                                                <p:column headerText="Nro." width="20" >
                                                    <h:outputText value="#{index + 1}"/>
                                                </p:column>
                                                <p:column headerText="Actividad" style="white-space:pre-line">
                                                    <h:outputText value="#{avanceActiv.actividad.svopObjetivoProy}" style="white-space: pre-line; width: 100%"/>
                                                </p:column>
                                                <p:column headerText="Fecha Inicio" width="70">
                                                    <h:outputText value="#{avanceActiv.actividad.fechaInicio}">
                                                        <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Fecha Fin" width="70">
                                                    <h:outputText value="#{avanceActiv.actividad.fechaFin}">
                                                        <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                                    </h:outputText>
                                                </p:column>                                            
                                                <p:column headerText="Resultados esperados" width="120">
                                                    <h:outputText value="#{avanceActiv.actividad.svopIndicador}"></h:outputText>
                                                </p:column>                                            
                                                <p:column headerText="Resultado" width="120" style="white-space:pre-line">
                                                    <p:inputTextarea id="txtResultadoActividadAvance" rows="1" style="width: 97%" value="#{avanceActiv.resultado}" autoResize="false" maxlength="250"
                                                                     required="#{not empty param['formPrincipal:btnGrabarAvance']}"></p:inputTextarea>  
                                                    <p:message for="txtResultadoActividadAvance"></p:message>
                                                </p:column>
                                                <p:column headerText="Avance (%)" width="60" style="white-space:pre-line; text-align: center">
                                                    <pe:inputNumber id="txtPorcentajeActividadAvance" value="#{avanceActiv.porcentajeAvance}" decimalPlaces="0" minValue="0" maxValue="100" styleClass="inputNumberPorcentaje"
                                                                    symbol=" %" symbolPosition="s"  
                                                                    required="#{not empty param['formPrincipal:btnGrabarAvance']}">
                                                    </pe:inputNumber>
                                                    <p:message for="txtPorcentajeActividadAvance"></p:message>
                                                </p:column>     
                                                <p:column headerText="Observación" width="120" style="white-space:pre-line">
                                                    <p:inputTextarea id="txtObservacionActividadAvance" rows="1" style="width: 97%" value="#{avanceActiv.observacion}" autoResize="false" maxlength="250"
                                                                     required="#{not empty param['formPrincipal:btnGrabarAvance']}"></p:inputTextarea>  
                                                    <p:message for="txtObservacionActividadAvance"></p:message>
                                                </p:column>
                                            </p:dataTable>   
                                        </p:fieldset>

                                    </h:panelGrid>
                                </h:panelGrid>
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="Listado de informes de avance:" style="font-weight: bold"/>
                                    <p:dataTable value="#{proyectoController.objetivoProyectoSelected.avanceComponenteList}" var="avanceComp" paginator="true"
                                                 style="width: 98%"
                                                 rows="10" rowIndexVar="index" resizableColumns="true"
                                                 emptyMessage="No se encontraron Resultados"> 
                                        <p:column style="width: 20px">
                                            <p:rowToggler/>
                                        </p:column>
                                        <p:column headerText="Nro." width="20">
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>

                                        <p:column headerText="Fecha" width="120" sortBy="#{avanceComp.fecha}">
                                            <h:outputText value="#{avanceComp.fecha}">
                                                <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                            </h:outputText>
                                        </p:column>

                                        <p:column headerText="Observación" sortBy="#{avanceComp.observacion}">
                                            <h:outputText value="#{avanceComp.observacion}"/>
                                        </p:column>

                                        <p:column headerText="Editar" width="35" style ="text-align: center">
                                            <p:commandButton icon="ui-icon-pencil"
                                                             title="Editar el registro" action="#{proyectoController.seleccionarEdicion()}"
                                                             disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                             update=":formPrincipal:panelAvance"
                                                             >
                                                <f:setPropertyActionListener value="#{avanceComp}" target="#{proyectoController.avanceComponenteSelected}"/>
                                            </p:commandButton>

                                        </p:column>                                         

                                        <p:column headerText="Eliminar " style="width: 50px; text-align: center" >
                                            <p:commandButton style="margin: 0" title="Eliminar el registro" icon="ui-icon-trash" 
                                                             disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                             onclick="PF('dialogDeleteAvanceComponente').show();" process="@this">
                                                <f:setPropertyActionListener value="#{avanceComp}" target="#{proyectoController.avanceComponenteSelected}" />
                                            </p:commandButton>   
                                        </p:column>



                                        <p:rowExpansion >
                                            <p:panelGrid columns="1" style="border:hidden;width:100%; "  >
                                                <p:dataTable value="#{avanceComp.avanceActividadList}" var="avanceActividad"
                                                             rendered="#{not empty avanceComp.avanceActividadList}"
                                                             rowIndexVar="index" style="width: 98%; padding-left: 30px">
                                                    <p:column headerText="Nro." width="20">
                                                        <h:outputText value="#{index + 1}" />
                                                    </p:column>
                                                    <p:column headerText="Actividad">
                                                        <h:outputText value="#{avanceActividad.actividad.svopObjetivoProy}" style="white-space: pre-line"/>
                                                    </p:column>
                                                    <p:column headerText="Fecha Inicio" width="60">
                                                        <h:outputText value="#{avanceActividad.actividad.fechaInicio}">
                                                            <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Fecha Fin" width="60">
                                                        <h:outputText value="#{avanceActividad.actividad.fechaFin}">
                                                            <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Resultados esperados" width="120">
                                                        <h:outputText value="#{avanceActividad.actividad.svopIndicador}"></h:outputText>
                                                    </p:column>                                            
                                                    <p:column headerText="Resultado" width="120" style="white-space:pre-line">
                                                        <h:outputText value="#{avanceActividad.resultado}"></h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Avance (%)" width="60" style="white-space:pre-line; text-align: center">
                                                        <h:outputText value="#{avanceActividad.porcentajeAvance}" style="white-space: pre-line"/>
                                                    </p:column>     
                                                    <p:column headerText="Observación" width="120" style="white-space:pre-line">
                                                        <h:outputText value="#{avanceActividad.observacion}" style="white-space: pre-line"/>
                                                    </p:column>

                                                </p:dataTable>
                                            </p:panelGrid>
                                        </p:rowExpansion>                                        

                                    </p:dataTable>                                  

                                </h:panelGrid>

                            </p:panel>


                            <!--tabP301: Seguimiento-->
                            <p:panel id="panelSeguimiento" rendered="#{proyectoController.selectedNodeCode=='6'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid id="pEdicionSeguimiento" columns="1" >
                                    <h:panelGrid columns="2">
                                        <p:outputLabel value="Seleccione el Componente:" for="selComponenteSeguimiento" style="font-weight: bold"/>  
                                        <p:selectOneMenu id="selComponenteSeguimiento"
                                                         value="#{proyectoController.objetivoProyectoSelected}"
                                                         converter="omnifaces.SelectItemsConverter"
                                                         >
                                            <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                            <f:selectItems value="#{proyectoController.proyectoSelected.componentes}" var="compSeguimiento" itemLabel="#{compSeguimiento.svopObjetivoProy}" itemValue="#{compSeguimiento}"/>
                                            <p:ajax event="change" update=":formPrincipal:panelSeguimiento" 
                                                    listener="#{proyectoController.cancelarAvance}" 
                                                    onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                    />                                                    
                                        </p:selectOneMenu>  
                                    </h:panelGrid>
                                </h:panelGrid>
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="Listado de informes de avance:" style="font-weight: bold"/>
                                    <p:dataTable value="#{proyectoController.objetivoProyectoSelected.avanceComponenteList}" var="avanceCompSeguimiento" paginator="true"
                                                 style="width: 96%"
                                                 rows="10" rowIndexVar="index" resizableColumns="true"
                                                 emptyMessage="No se encontraron Resultados"> 
                                        <p:column style="width: 20px">
                                            <p:rowToggler/>
                                        </p:column>
                                        <p:column headerText="Nro." width="20">
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>

                                        <p:column headerText="Fecha" width="120" sortBy="#{avanceCompSeguimiento.fecha}">
                                            <h:outputText value="#{avanceCompSeguimiento.fecha}">
                                                <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                            </h:outputText>
                                        </p:column>

                                        <p:column headerText="Observación" sortBy="#{avanceCompSeguimiento.observacion}">
                                            <h:outputText value="#{avanceCompSeguimiento.observacion}"/>
                                        </p:column>

                                        <p:rowExpansion >
                                            <p:panelGrid columns="1" style="border:hidden;width:100%; "  >
                                                <p:dataTable value="#{avanceCompSeguimiento.avanceActividadList}" var="avanceActivSeguimiento"
                                                             rendered="#{not empty avanceCompSeguimiento.avanceActividadList}"
                                                             rowIndexVar="index" style="width: 98%; padding-left: 30px">
                                                    <p:column headerText="Nro." style="width:20px">
                                                        <h:outputText value="#{index + 1}" />
                                                    </p:column>
                                                    <p:column headerText="Actividad" width="350">
                                                        <h:outputText value="#{avanceActivSeguimiento.actividad.svopObjetivoProy}" style="white-space: pre-line"/>
                                                    </p:column>
                                                    <p:column headerText="Fecha Inicio" width="70">
                                                        <h:outputText value="#{avanceActivSeguimiento.actividad.fechaInicio}">
                                                            <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Fecha Fin" width="70">
                                                        <h:outputText value="#{avanceActivSeguimiento.actividad.fechaFin}">
                                                            <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Avance(%)" style="width: 75px;white-space:pre-line; text-align: center">
                                                        <h:outputText value="#{avanceActivSeguimiento.porcentajeAvance}" style="white-space: pre-line"/>
                                                    </p:column>     
                                                    <p:column headerText="Observación" style="white-space:pre-line">
                                                        <h:outputText value="#{avanceActivSeguimiento.observacion}" style="white-space: pre-line"/>
                                                    </p:column>

                                                </p:dataTable>
                                            </p:panelGrid>
                                        </p:rowExpansion>                                        

                                    </p:dataTable>                                  

                                </h:panelGrid>                                


                            </p:panel>

                            <!--panelCompromisoParticipacion-->
                            <p:panel id="panelCompromisoParticipacion" rendered="#{proyectoController.selectedNodeCode=='4.3'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionCompromisoParticipacion" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:focus context="panelEdicionCompromisoParticipacion"/>
                                    <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirEjecucion}" style="color:red"></p:outputLabel>
                                    <h:panelGrid columns="1" rendered="#{proyectoController.compromisoParticipacionProyectoSelected==null}">
                                        <p:commandButton value="Agregar" title="Agregar Compromiso de Participación" icon="ui-icon-plus" 
                                                         update=":formPrincipal:panelEdicionCompromisoParticipacion, :formPrincipal:message1"
                                                         disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                         action="#{proyectoController.nuevoCompromisoParticipacionProyecto}" 
                                                         >
                                        </p:commandButton>
                                    </h:panelGrid>
                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%" rendered="#{proyectoController.compromisoParticipacionProyectoSelected !=null}">
                                        <p:fieldset legend="#{proyectoController.compromisoParticipacionProyectoSelected.id==null ? 'NUEVO COMPROMISO DE PARTICIPACION':'EDICION DE COMPROMISO DE PARTICIPACION'}">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarInstitucion" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelCompromisoParticipacion, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarCompromisoParticipacionProyecto}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelCompromisoParticipacion" 
                                                                 action="#{proyectoController.cancelarCompromisoParticipacionProyecto}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                            </h:panelGrid>           
                                            <h:panelGrid columns="2">
                                                <p:selectOneRadio id="selTipoCompromisoParticipacion" value="#{proyectoController.compromisoParticipacionProyectoSelected.tipoParticipacion}" 
                                                                  converter="omnifaces.SelectItemsConverter"
                                                                  style="font-weight: normal"
                                                                  >
                                                    <f:selectItems value="#{proyectoController.tipoCompromisoParticipacionList}" var="tipoCompromiso" itemLabel="#{tipoCompromiso.prdDescripcion}" itemValue="#{tipoCompromiso}"/>
                                                    <p:ajax update=":formPrincipal:panelEdicionCompromisoParticipacion" process=":formPrincipal:panelEdicionCompromisoParticipacion" 
                                                            listener="#{proyectoController.seleccionarTipoCompromisoParticipacion(true)}"
                                                            onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"/>
                                                </p:selectOneRadio>
                                            </h:panelGrid>                                            

                                            <h:panelGrid columns="3" cellpadding="0" cellspacing="0">
                                                <h:panelGrid columns="1">
                                                    <p:outputLabel value="INSTITUCION O COUMUNIDAD" style="font-size: 12px; font-weight: bold"/>
                                                    <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px">



                                                        <p:outputLabel value="* Nombre:" style="font-weight: bold"/>
                                                        <h:panelGrid columns="4" >
                                                            <p:commandButton  title="Buscar Institución" icon="ui-icon-search"
                                                                              actionListener="#{proyectoController.abrirBusquedaInstitucion}">
                                                                <p:ajax event="dialogReturn" listener="#{proyectoController.seleccionarInstitucion}" update=":formPrincipal:panelEdicionCompromisoParticipacion, :formPrincipal:message1"
                                                                        onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"/>
                                                            </p:commandButton>
                                                            <p:inputText id="txtNombreInstitucion" style="width: 240px" value="#{proyectoController.compromisoParticipacionProyectoSelected.institucion.nombre}" disabled ="true">
                                                            </p:inputText>
                                                        </h:panelGrid> 

                                                        <p:outputLabel value="* Provincia:" for="txtProvinciaInstitucion" style="font-weight: bold"/>
                                                        <h:panelGrid columns="2">
                                                            <p:inputText id="txtProvinciaInstitucion" value="#{proyectoController.compromisoParticipacionProyectoSelected.institucion.parroquia.canId.proId.proNombre}" disabled ="true" style="width: 270px" >
                                                            </p:inputText>
                                                        </h:panelGrid>

                                                        <p:outputLabel for="txtDireccionInstitucion" value="* Dirección:" style="font-weight: bold"></p:outputLabel>
                                                        <h:panelGrid columns="2">
                                                            <p:inputText id="txtDireccionInstitucion" value="#{proyectoController.compromisoParticipacionProyectoSelected.institucion.direccion}" disabled ="true" style="width: 270px"
                                                                         >
                                                            </p:inputText>
                                                            <p:message for="txtDireccionInstitucion"></p:message>
                                                        </h:panelGrid>

                                                        <p:outputLabel for="txtTelefonoInstitucion" value="* Teléfono:" style="font-weight: bold"></p:outputLabel>
                                                        <h:panelGrid columns="2">
                                                            <p:inputText id="txtTelefonoInstitucion" value="#{proyectoController.compromisoParticipacionProyectoSelected.institucion.telefono}" disabled ="true"  style="width: 100px"
                                                                         >
                                                            </p:inputText>
                                                            <p:message for="txtTelefonoInstitucion"></p:message>
                                                        </h:panelGrid>

                                                        <p:outputLabel value="* Tipo de organización:" for="selTipoOrganizacionInstitucion" style="font-weight: bold"/>
                                                        <h:panelGrid columns="2">
                                                            <p:selectOneMenu id="selTipoOrganizacionInstitucion"
                                                                             required="#{not empty param['formPrincipal:btnGrabarInstitucion']}" 
                                                                             converter="omnifaces.SelectItemsConverter"
                                                                             style="width: 260px"
                                                                             value="#{proyectoController.compromisoParticipacionProyectoSelected.tipoOrganizacion}" 
                                                                             >
                                                                <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                                <f:selectItems value="#{proyectoController.tipoOrganizacionList2}" var="tipoOrganizacion" itemLabel="#{tipoOrganizacion.prdDescripcion}" itemValue="#{tipoOrganizacion}"/>
                                                                <p:ajax update=":formPrincipal:panelEdicionCompromisoParticipacion" process=":formPrincipal:panelEdicionCompromisoParticipacion" />
                                                            </p:selectOneMenu>
                                                            <p:message for="selTipoOrganizacionInstitucion"></p:message>
                                                        </h:panelGrid>    

                                                        <p:outputLabel value="* Describa:" for="txtTipoOrganizacionInstitucionOtros" style="font-weight: bold"
                                                                       rendered="#{proyectoController.compromisoParticipacionProyectoSelected.tipoOrganizacion.prdId==315}"/>
                                                        <h:panelGrid columns="2" rendered="#{proyectoController.compromisoParticipacionProyectoSelected.tipoOrganizacion.prdId==315}">
                                                            <p:inputText id="txtTipoOrganizacionInstitucionOtros" value="#{proyectoController.compromisoParticipacionProyectoSelected.tipoOrganizacionOtrosDesc}" style="width: 270px"
                                                                         required="#{not empty param['formPrincipal:btnGrabarInstitucion']}">
                                                            </p:inputText>
                                                            <p:message for="txtTipoOrganizacionInstitucionOtros"></p:message>
                                                        </h:panelGrid>                                                        

                                                    </h:panelGrid>                                                                                                    
                                                </h:panelGrid>

                                                <p:spacer height="1" width="20"></p:spacer>   

                                                <h:panelGrid columns="1">
                                                    <p:outputLabel value="REPRESENTANTE LEGAL Y/O RESPONSABLE" style="font-size: 12px; font-weight: bold"/>
                                                    <h:panelGrid columns="2" cellpadding="4" cellspacing="0" style="margin-bottom: 10px">
                                                        <p:outputLabel for="txtNombresRepresentanteInstitucion" value="* Nombres:" style="font-weight: bold"/>
                                                        <p:inputText id="txtNombresRepresentanteInstitucion" value="#{proyectoController.compromisoParticipacionProyectoSelected.institucion.representanteNombres}" style="width: 200px" disabled="true"/>

                                                        <p:outputLabel for="txtApellidosRepresentanteInstitucion" value="* Apellidos:" style="font-weight: bold"/>
                                                        <p:inputText id="txtApellidosRepresentanteInstitucion" value="#{proyectoController.compromisoParticipacionProyectoSelected.institucion.representanteApellidos}" style="width: 200px" disabled="true"/>

                                                        <p:outputLabel for="txtCargoRepresentanteInstitucion" value="* Cargo:" style="font-weight: bold"/>
                                                        <p:inputText id="txtCargoRepresentanteInstitucion" value="#{proyectoController.compromisoParticipacionProyectoSelected.institucion.representanteCargo}" style="width: 200px" disabled="true"/>

                                                        <p:outputLabel for="txtTelefonoRepresentanteInstitucion" value="* Teléfono:" style="font-weight: bold"/>
                                                        <p:inputText id="txtTelefonoRepresentanteInstitucion" value="#{proyectoController.compromisoParticipacionProyectoSelected.institucion.representanteTelefono}" style="width: 200px" disabled="true"/>

                                                        <p:outputLabel for="txtEmailRepresentanteInstitucion" value="* Email:" style="font-weight: bold"/>
                                                        <p:inputText id="txtEmailRepresentanteInstitucion" value="#{proyectoController.compromisoParticipacionProyectoSelected.institucion.representanteEmail}" style="width: 200px" disabled="true"/>

                                                        <p:outputLabel for="txtDeclaracionRepresentanteInstitucion" value="* Declaración:" style="font-weight: bold"/>
                                                        <h:panelGrid columns="2">
                                                            <p:inputTextarea id="txtDeclaracionRepresentanteInstitucion" value="#{proyectoController.compromisoParticipacionProyectoSelected.declaracionRepresentante}" maxlength="500" rows="5" cols="60" 
                                                                             required="#{not empty param['formPrincipal:btnGrabarInstitucion']}">
                                                            </p:inputTextarea>
                                                            <p:message for="txtDeclaracionRepresentanteInstitucion"></p:message>

                                                        </h:panelGrid>
                                                    </h:panelGrid>
                                                </h:panelGrid>                                     

                                            </h:panelGrid>

                                        </p:fieldset>

                                    </h:panelGrid>

                                </h:panelGrid>
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="Listado de instituciones:" style="font-weight: bold"/>
                                    <p:dataTable id="dtCompromisoParticipacion" value="#{proyectoController.proyectoSelected.compromisoParticipacionList}" var="compromiso"
                                                 rowIndexVar="index"  resizableColumns="true" style="margin-bottom: 10px"
                                                 emptyMessage="No se encontraron resultados">
                                        <p:column headerText="Nro." width="20" >
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>
                                        <p:column headerText="Tipo" style="white-space: pre-line">
                                            <h:outputText value="#{compromiso.tipoParticipacion.prdDescripcion}"/>
                                        </p:column>
                                        <p:column headerText="Nombre" style="white-space: pre-line">
                                            <h:outputText value="#{compromiso.institucion.nombre}"/>
                                        </p:column>
                                        <p:column headerText="Provincia">
                                            <h:outputText value="#{compromiso.institucion.parroquia.canId.proId.proNombre}" style="white-space: pre-line"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Cantón">
                                            <h:outputText value="#{compromiso.institucion.parroquia.canId.canNombre}" style="white-space: pre-line"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Parroquia">
                                            <h:outputText value="#{compromiso.institucion.parroquia.prqNombre}" style="white-space: pre-line"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Dirección">
                                            <h:outputText value="#{compromiso.institucion.direccion}" style="white-space: pre-line"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Tipo Organización" style="white-space: pre-line">
                                            <h:outputText value="#{compromiso.tipoOrganizacion.prdDescripcion}"/>
                                        </p:column>
                                        <p:column headerText="Representante Legal" style="white-space: pre-line">
                                            <h:outputText value="#{compromiso.institucion.representanteNombres.concat(' ').concat(compromiso.institucion.representanteApellidos)}" style="white-space: pre-line"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Cargo Rep. Legal " style="white-space: pre-line">
                                            <h:outputText value="#{compromiso.institucion.representanteCargo}" style="white-space: pre-line"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Telf. Rep. Legal " style="white-space: pre-line">
                                            <h:outputText value="#{compromiso.institucion.representanteTelefono}" style="white-space: pre-line"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Email Rep. Legal " style="white-space: pre-line">
                                            <h:outputText value="#{compromiso.institucion.representanteEmail}" style="white-space: pre-line"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Declaración Rep. Legal " style="white-space: pre-line">
                                            <h:outputText value="#{compromiso.declaracionRepresentante}" style="white-space: pre-line"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Editar" width="35" style ="text-align: center">
                                            <p:commandButton icon="ui-icon-pencil"
                                                             title="Editar el registro"
                                                             disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                             action="#{proyectoController.seleccionarCompromisoParticipacionProyecto}" 
                                                             onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                             update="formPrincipal:panelEdicionCompromisoParticipacion, :formPrincipal:message1"
                                                             >
                                                <f:setPropertyActionListener value="#{compromiso}" target="#{proyectoController.compromisoParticipacionProyectoSelected}"/>
                                            </p:commandButton>
                                        </p:column>
                                        <p:column headerText="Eliminar " style="width: 50px; text-align: center" >
                                            <p:commandButton style="margin: 0" title="Eliminar el registro" icon="ui-icon-trash" 
                                                             disabled="#{proyectoController.proyectoSelected.estado!='APR2'}"
                                                             onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                             action="#{proyectoController.eliminarCompromisoParticipacionProyecto}"
                                                             update="formPrincipal:panelCompromisoParticipacion, :formPrincipal:message1 ">
                                                <f:setPropertyActionListener value="#{compromiso}" target="#{proyectoController.compromisoParticipacionProyectoSelected}"/>
                                                <p:confirm header="Confirmación" message="Confirma que desea eliminar la institución/comunidad seleccionada ?" icon="ui-icon-alert" />
                                            </p:commandButton>  
                                        </p:column>                                        

                                    </p:dataTable>                                               

                                </h:panelGrid>


                            </p:panel>   

                            <!--panelComisionCalificacion-->
                            <p:panel id="panelComisionCalificacion" rendered="#{proyectoController.selectedNodeCode=='2.1'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionComisionCalificacion" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%">
                                        <p:fieldset 
                                            legend="ASIGNACION DE COMISION DE EVALUACION">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton value="Editar" title="Editar" icon="ui-icon-pencil"
                                                                 action="#{proyectoController.seleccionarEdicion}"
                                                                 rendered="#{!proyectoController.modoEdicion}"
                                                                 disabled="#{proyectoController.proyectoSelected.calificacionList!=null and proyectoController.proyectoSelected.calificacionList.size()>0}"
                                                                 update=":formPrincipal:panelComisionCalificacion" >
                                                </p:commandButton>

                                                <p:commandButton id="btnGrabarComisionCalificacion" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelComisionCalificacion, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarComisionCalificacion}"
                                                                 rendered="#{proyectoController.modoEdicion}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 process="@this"
                                                                 update=":formPrincipal:panelComisionCalificacion" 
                                                                 rendered="#{proyectoController.modoEdicion}"
                                                                 action="#{proyectoController.cancelarEdicionComisionCalificacion}">
                                                </p:commandButton>
                                            </h:panelGrid>                                          
                                            <h:panelGrid columns="1" cellpadding="0" cellspacing="0" style="margin-bottom: 10px">
                                                <h:outputLabel value="No se puede cambiar la comisión de evaluación, porque ya se han registrado evaluaciones para este proyecto" 
                                                               style="color: red" rendered="#{proyectoController.proyectoSelected.calificacionList!=null and proyectoController.proyectoSelected.calificacionList.size()>0}"></h:outputLabel>

                                            </h:panelGrid>

                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0">
                                                <p:outputLabel for="selComisionCalificacion" value="Comisión de Evaluación:" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <p:selectOneMenu id="selComisionCalificacion"
                                                                     required="#{not empty param['formPrincipal:btnGrabarComisionCalificacion']}" 
                                                                     style="width:400px;" 
                                                                     converter="omnifaces.SelectItemsConverter"
                                                                     disabled="#{(proyectoController.proyectoSelected.calificacionList!=null and proyectoController.proyectoSelected.calificacionList.size()>0) or (!proyectoController.modoEdicion)}"
                                                                     value="#{proyectoController.proyectoSelected.comisionCalificacion}" 
                                                                     >
                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                        <f:selectItems value="#{proyectoController.comisionCalificacionList}" var="comisionEvaluacion" itemLabel="#{comisionEvaluacion.descripcion}" itemValue="#{comisionEvaluacion}"/>
                                                        <p:ajax event="change" 
                                                                update=":formPrincipal:panelComisionCalificacion" 
                                                                />

                                                    </p:selectOneMenu>
                                                    <p:message for="selComisionCalificacion"></p:message>
                                                </h:panelGrid>

                                            </h:panelGrid>


                                            <h:outputLabel value="Integrantes de la comisión:" style="font-weight: bold"/>
                                            <p:dataTable value="#{proyectoController.proyectoSelected.comisionCalificacion.miembroList}" var="miembroComision"
                                                         expandedRow="false" rowIndexVar="index"  
                                                         resizableColumns="true"
                                                         emptyMessage="No se encontraron Resultados"
                                                         style="margin-bottom: 20px"> 

                                                <p:column headerText="Nro." style="width:20px">
                                                    <h:outputText value="#{index + 1}"/>
                                                </p:column>
                                                <p:column headerText="Cédula" width="100" sortBy="#{miembroComision.usuario.usuCc}">
                                                    <h:outputText value="#{miembroComision.usuario.usuCc}" style="white-space: pre-line"></h:outputText>
                                                </p:column>
                                                <p:column headerText="Nombres" width="200" sortBy="#{miembroComision.usuario.usuNombres}">
                                                    <h:outputText value="#{miembroComision.usuario.usuNombres}" style="white-space: pre-line"></h:outputText>
                                                </p:column>
                                                <p:column headerText="Apellidos" sortBy="#{miembroComision.usuario.usuApellidos}">
                                                    <h:outputText value="#{miembroComision.usuario.usuApellidos}" style="white-space: pre-line"></h:outputText>
                                                </p:column>
                                                <p:column headerText="Correo Electrónico" width="200" sortBy="#{miembroComision.usuario.usuEmail}">
                                                    <h:outputText value="#{miembroComision.usuario.usuEmail}" style="white-space: pre-line"></h:outputText>
                                                </p:column>
                                            </p:dataTable>

                                        </p:fieldset>

                                    </h:panelGrid>

                                </h:panelGrid>
                            </p:panel>                   




                            <!--panelConfigParametrosEvaluacion-->
                            <p:panel id="panelConfigParametrosEvaluacion" rendered="#{proyectoController.selectedNodeCode=='2.4'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionConfigParametrosEvaluacion" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%"
                                                 >
                                        <p:fieldset 
                                            legend="ASIGNACION DE PARAMETROS DE EVALUACION">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarConfigParametrosEvaluacion" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelConfigParametrosEvaluacion, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarConfigParametrosEvaluacion}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 process="@this"
                                                                 update=":formPrincipal:panelConfigParametrosEvaluacion" 
                                                                 action="#{proyectoController.cancelarConfigParametrosEvaluacion()}">
                                                </p:commandButton>
                                            </h:panelGrid>                                          

                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px">
                                                <p:outputLabel for="selConfigParametrosEvaluacion" value="Configuración de Parámetros de Evaluación:" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <p:selectOneMenu id="selConfigParametrosEvaluacion"
                                                                     required="#{not empty param['formPrincipal:btnGrabarConfigParametrosEvaluacion']}" 
                                                                     style="width:400px;" 
                                                                     converter="omnifaces.SelectItemsConverter"
                                                                     disabled="#{proyectoController.proyectoSelected.calificacionList!=null and proyectoController.proyectoSelected.calificacionList.size()>0}"
                                                                     value="#{proyectoController.proyectoSelected.configuracionParametrosEvaluacion}" 
                                                                     >
                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                        <f:selectItems value="#{proyectoController.configuracionParametrosEvaluacionList}" var="configParamEvaluacion" itemLabel="#{configParamEvaluacion.descripcion}" itemValue="#{configParamEvaluacion}"/>
                                                        <p:ajax event="change" 
                                                                update=":formPrincipal:panelConfigParametrosEvaluacion" 
                                                                />

                                                    </p:selectOneMenu>
                                                    <p:message for="selConfigParametrosEvaluacion"></p:message>
                                                </h:panelGrid>
                                            </h:panelGrid>
                                            <h:panelGrid columns="1">
                                                <h:outputLabel value="No se puede cambiar la configuración de parámetros de evaluación, porque ya se han registrado evaluaciones para este proyecto" 
                                                               style="color: red" rendered="#{proyectoController.proyectoSelected.calificacionList!=null and proyectoController.proyectoSelected.calificacionList.size()>0}"></h:outputLabel>
                                            </h:panelGrid>
                                            <h:panelGrid columns="2" rendered="#{proyectoController.proyectoSelected.configuracionParametrosEvaluacion!=null}" style="margin-bottom: 10px">

                                                <p:outputLabel value="Fecha creación:" style="font-weight: bold"></p:outputLabel>
                                                <p:outputLabel value="#{proyectoController.proyectoSelected.configuracionParametrosEvaluacion.fechaConfiguracion}">
                                                    <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                                </p:outputLabel>

                                                <p:outputLabel value="Descripción:" style="font-weight: bold"></p:outputLabel>
                                                <p:outputLabel value="#{proyectoController.proyectoSelected.configuracionParametrosEvaluacion.descripcion}" ></p:outputLabel>

                                                <p:outputLabel value="Puntaje mínimo requerido:" style="font-weight: bold"></p:outputLabel>
                                                <p:outputLabel value="#{proyectoController.proyectoSelected.configuracionParametrosEvaluacion.puntajeMinimoRequerido}" ></p:outputLabel>

                                            </h:panelGrid>                                            

                                            <h:outputLabel value="Parámetros de evaluación:" style="font-weight: bold"/>
                                            <p:dataTable id="dtConfigParametrosEvaluacion" value="#{proyectoController.proyectoSelected.configuracionParametrosEvaluacion.parametroEvaluacionList}" var="configParametrosEvaluacion"
                                                         expandedRow="true" editable="true" rowIndexVar="index"  resizableColumns="true" style="margin-bottom: 10px"
                                                         emptyMessage="No se encontraron resultados">
                                                <p:column width="20">
                                                    <p:rowToggler/>
                                                </p:column>
                                                <p:column headerText="Nro." width="20" >
                                                    <h:outputText value="#{index + 1}"/>
                                                </p:column>
                                                <p:column headerText="Descripción" >
                                                    <h:outputText value="#{configParametrosEvaluacion.descripcion}" style="white-space: pre-line"></h:outputText>
                                                </p:column>

                                                <p:rowExpansion >
                                                    <p:panel style="border:hidden;width:98%; padding-left: 30px"  >
                                                        <h:outputLabel value="Opciones de respuesta:" style="font-weight: bold"/>
                                                        <p:dataTable value="#{configParametrosEvaluacion.valoracionList}" var="configValoracionParam"
                                                                     rendered="#{not empty configParametrosEvaluacion.valoracionList}"
                                                                     rowIndexVar="index" style="width: 50%; ">
                                                            <p:column headerText="Nro." width="20" >
                                                                <h:outputText value="#{index + 1}"/>
                                                            </p:column>

                                                            <p:column headerText="Descripción">
                                                                <h:outputText value="#{configValoracionParam.descripcion}" style="white-space: pre-line"></h:outputText>
                                                            </p:column>
                                                            <p:column headerText="Puntaje" width="50" style="text-align: center">
                                                                <h:outputText value="#{configValoracionParam.puntaje}" style="white-space: pre-line"></h:outputText>
                                                            </p:column>


                                                        </p:dataTable>
                                                    </p:panel>                                            
                                                </p:rowExpansion>                                                      

                                            </p:dataTable>                                                     

                                        </p:fieldset>
                                    </h:panelGrid>
                                </h:panelGrid>
                            </p:panel>                                   




                            <!--panelCalificacion-->
                            <p:panel id="panelCalificacion" rendered="#{proyectoController.selectedNodeCode=='2.2'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionCalificacion" columns="1" style="width: 98%; margin-bottom: 10px">
                                    <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirCalificacionComisionVinculacion}" style="color:red"></p:outputLabel>
                                    <h:panelGrid columns="1" rendered="#{proyectoController.calificacionProyectoSelected==null}">
                                        <h:panelGrid columns="2">
                                            <p:commandButton id="btnAgregarCalificacion" value="Agregar" title="Agregar Calificación" icon="ui-icon-plus" 
                                                             update=":formPrincipal:panelEdicionCalificacion, :formPrincipal:message1"
                                                             onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                             disabled="#{proyectoController.proyectoSelected.estado!='CEP' || (proyectoController.proyectoSelected.calificacionActualXUsuario!=null and proyectoController.proyectoSelected.calificacionActualXUsuario.estadoFinalizado!=null and proyectoController.proyectoSelected.calificacionActualXUsuario.estadoFinalizado=='S')}"
                                                             actionListener="#{proyectoController.nuevoCalificacion}" 
                                                             >
                                            </p:commandButton>
                                            <p:commandButton value="Finalizar" title="Finalizar calificación" icon="ui-icon-check" 
                                                             disabled="#{proyectoController.proyectoSelected.estado!='CEP' || proyectoController.proyectoSelected.calificacionActualXUsuario==null  || (proyectoController.proyectoSelected.calificacionActualXUsuario!=null and proyectoController.proyectoSelected.calificacionActualXUsuario.estadoFinalizado!=null and proyectoController.proyectoSelected.calificacionActualXUsuario.estadoFinalizado=='S')}"
                                                             update=":formPrincipal:panelCalificacion, :formPrincipal:panelTitulo,  :formPrincipal:message1"
                                                             action ="#{proyectoController.finalizarCalificacion}"
                                                             onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                <p:confirm header="Confirmación" message="Confirma que desea finalizar la calificación del proyecto ?" icon="ui-icon-alert" />
                                            </p:commandButton>

                                        </h:panelGrid>


                                        <p:message for="btnAgregarCalificacion"></p:message>
                                    </h:panelGrid>
                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%"
                                                 rendered="#{proyectoController.calificacionProyectoSelected !=null}">
                                        <p:fieldset 
                                            legend="#{proyectoController.calificacionProyectoSelected.id==null ? 'NUEVA CALIFICACION':'EDICION DE CALIFICACION'}">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarCalificacion" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelCalificacion, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarCalificacion}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 process="@this"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                                 update=":formPrincipal:panelCalificacion" 
                                                                 action="#{proyectoController.cancelarEdicionCalificacion(true)}">
                                                </p:commandButton>
                                            </h:panelGrid>                                          

                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px">
                                                <p:outputLabel for="txtFechaCalificacion" value="* Fecha:" style="font-weight: bold"></p:outputLabel>
                                                <p:inputText id="txtFechaCalificacion" value="#{proyectoController.calificacionProyectoSelected.fecha}"
                                                             style="width: 100px" disabled="true">
                                                    <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                                </p:inputText>

                                                <p:outputLabel for="txtObservacionesCalificacion" value="* Observaciones:" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <p:inputTextarea id="txtObservacionesCalificacion" value="#{proyectoController.calificacionProyectoSelected.observaciones}"
                                                                     cols="150" rows="3" maxlength="1000"
                                                                     required="#{not empty param['formPrincipal:btnGrabarCalificacion']}">
                                                    </p:inputTextarea>
                                                    <p:message for="txtObservacionesCalificacion"></p:message>
                                                </h:panelGrid>
                                            </h:panelGrid>
                                            <p:dataTable id="dtCalificaciones" value="#{proyectoController.calificacionProyectoSelected.detalleCalificacionList}" var="detalleCalificacion"
                                                         editable="true" rowIndexVar="index"  resizableColumns="true" style="margin-bottom: 10px"
                                                         emptyMessage="No se encontraron resultados">

                                                <p:column headerText="Nro." width="20" >
                                                    <h:outputText value="#{index + 1}"/>
                                                </p:column>
                                                <p:column headerText="Parámetro" style="white-space:pre-line">
                                                    <h:outputText value="#{detalleCalificacion.parametroEvaluacion.descripcion}" style="white-space: pre-line;"/>
                                                </p:column>
                                                <p:column headerText="Información" width="60" style="white-space:pre-line; text-align: center">
                                                    <p:commandButton title="Verificar Información" icon="ui-icon-info" 
                                                                     action="#{proyectoController.abrirReportePorSegmento(detalleCalificacion.parametroEvaluacion.opcionMenu)}" 
                                                                     onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">

                                                    </p:commandButton>                                                

                                                </p:column>

                                                <p:column headerText="Valoración" width="170">
                                                    <table>
                                                        <tr>
                                                            <td style="padding: 0px; border: hidden">
                                                                <p:selectOneMenu id="selOpcionValoracion"
                                                                                 required="#{not empty param['formPrincipal:btnGrabarCalificacion']}" 
                                                                                 converter="omnifaces.SelectItemsConverter"
                                                                                 value="#{detalleCalificacion.valoracionParametroEvaluacion}" 
                                                                                 style="width: 140px"
                                                                                 >
                                                                    <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                                    <f:selectItems value="#{detalleCalificacion.parametroEvaluacion.valoracionList}" var="valorCalificacion" itemLabel="#{valorCalificacion.descripcion}" itemValue="#{valorCalificacion}"/>
                                                                    <p:ajax event="change" update=":formPrincipal:dtCalificaciones"
                                                                            />
                                                                </p:selectOneMenu>

                                                            </td>

                                                        </tr>
                                                        <tr>
                                                            <td style="padding: 0px; border: hidden">
                                                                <p:message for="selOpcionValoracion"></p:message>
                                                            </td>

                                                        </tr>

                                                    </table>
                                                </p:column>
                                                <p:column headerText="Puntaje" width="75" style="text-align: center">
                                                    <h:outputText value="#{detalleCalificacion.valoracionParametroEvaluacion.puntaje}"/>
                                                </p:column>
                                                <p:columnGroup type="footer">
                                                    <p:row>
                                                        <p:column colspan="4" style="text-align:right" footerText="Total:" />
                                                        <p:column footerText="#{proyectoController.calificacionProyectoSelected.totalPuntaje}" style="text-align: center" >
                                                        </p:column>
                                                    </p:row>
                                                    <p:row>
                                                        <p:column colspan="4" style="text-align:right" footerText="Mínimo requerido:" />
                                                        <p:column footerText="#{proyectoController.proyectoSelected.configuracionParametrosEvaluacion.puntajeMinimoRequerido}" style="text-align: center" >
                                                        </p:column>
                                                    </p:row>
                                                    <p:row>
                                                        <p:column colspan="4" style="text-align:right" footerText="Resultado:" />
                                                        <p:column footerText="#{proyectoController.calificacionProyectoSelected.resultado}" style="text-align: center" >
                                                        </p:column>
                                                    </p:row>

                                                </p:columnGroup>                                                 
                                            </p:dataTable>                                               
                                        </p:fieldset>

                                    </h:panelGrid>

                                </h:panelGrid>
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="Calificación actual:" style="font-weight: bold"
                                                   rendered="#{proyectoController.proyectoSelected.calificacionActualXUsuario==null or proyectoController.proyectoSelected.calificacionActualXUsuario.estadoFinalizado==null or proyectoController.proyectoSelected.calificacionActualXUsuario.estadoFinalizado!='S'}"/>
                                    <h:outputLabel value="Calificación actual (FINALIZADO):" style="font-weight: bold"
                                                   rendered="#{proyectoController.proyectoSelected.calificacionActualXUsuario!=null and proyectoController.proyectoSelected.calificacionActualXUsuario.estadoFinalizado!=null and proyectoController.proyectoSelected.calificacionActualXUsuario.estadoFinalizado=='S'}"/>
                                    <p:dataTable value="#{proyectoController.proyectoSelected.calificacionUltimaList}" var="calificacionProy"
                                                 expandedRow="true" rowIndexVar="index"  
                                                 resizableColumns="true"
                                                 style="width: 98%"
                                                 emptyMessage="No se encontraron Resultados"> 
                                        <!--<p:ajax event="rowToggle" listener="#{proyectoController.onRowToggle}"/>-->
                                        <p:column width="40">
                                            <p:rowToggler/>
                                        </p:column>
                                        <p:column rendered="false" headerText="Nro." style="width:20px">
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>
                                        <p:column headerText="Fecha" width="70">
                                            <h:outputText value="#{calificacionProy.fecha}">
                                                <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Observaciones">
                                            <h:outputText value="#{calificacionProy.observaciones}" style="white-space: pre-line"></h:outputText>
                                        </p:column>
                                        <p:rowExpansion >
                                            <p:panel style="border:hidden;width:98%; padding-left: 30px"  >
                                                <h:outputLabel value="Detalle de calificación:" style="font-weight: bold"/>
                                                <p:dataTable value="#{calificacionProy.detalleCalificacionList}" var="detalleCalificacion"
                                                             rendered="#{not empty calificacionProy.detalleCalificacionList}"
                                                             rowIndexVar="index">
                                                    <p:column headerText="Nro." style="width:20px">
                                                        <h:outputText value="#{index + 1}"/>
                                                    </p:column>
                                                    <p:column headerText="Parámetro">
                                                        <h:outputText value="#{detalleCalificacion.parametroEvaluacion.descripcion}" style="white-space: pre-line"></h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Respuesta" width="120">
                                                        <h:outputText value="#{detalleCalificacion.valoracionParametroEvaluacion.descripcion}" style="white-space: pre-line"></h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Puntaje" width="70" style="text-align: center">
                                                        <h:outputText value="#{detalleCalificacion.valoracionParametroEvaluacion.puntaje}" style="white-space: pre-line"></h:outputText>
                                                    </p:column>
                                                    <p:columnGroup type="footer">
                                                        <p:row>
                                                            <p:column colspan="3" style="text-align:right" footerText="Total:" />
                                                            <p:column footerText="#{calificacionProy.totalPuntaje}" style="text-align: center" >
                                                            </p:column>
                                                        </p:row>
                                                        <p:row>
                                                            <p:column colspan="3" style="text-align:right" footerText="Mínimo requerido:" />
                                                            <p:column footerText="#{proyectoController.proyectoSelected.configuracionParametrosEvaluacion.puntajeMinimoRequerido}" style="text-align: center" >
                                                            </p:column>
                                                        </p:row>
                                                        <p:row>
                                                            <p:column colspan="3" style="text-align:right" footerText="Resultado:" />
                                                            <p:column footerText="#{calificacionProy.resultado}" style="text-align: center" >
                                                            </p:column>
                                                        </p:row>

                                                    </p:columnGroup>                                        

                                                </p:dataTable>
                                                <h:outputLabel value="Observaciones:" style="font-weight: bold"/>
                                                <p:dataTable value="#{proyectoController.proyectoSelected.calificacionPorUsuarioList}" var="observacionCalificacion"
                                                             rendered="#{not empty proyectoController.proyectoSelected.calificacionList}"
                                                             rowIndexVar="index">
                                                    <p:column headerText="Nro." style="width:20px">
                                                        <h:outputText value="#{index + 1}"/>
                                                    </p:column>
                                                    <p:column headerText="Fecha" width="70">
                                                        <h:outputText value="#{observacionCalificacion.fecha}">
                                                            <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Observaciones">
                                                        <h:outputText value="#{observacionCalificacion.observaciones}" style="white-space: pre-line"></h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Puntaje" width="70" style="text-align: center">
                                                        <h:outputText value="#{observacionCalificacion.totalPuntaje}" ></h:outputText>
                                                    </p:column>

                                                </p:dataTable>

                                            </p:panel>                                            
                                        </p:rowExpansion>                                        

                                    </p:dataTable>                                  

                                </h:panelGrid>                              


                            </p:panel>        


                            <!--panelAnexo-->
                            <p:panel id="panelAnexo" rendered="#{proyectoController.selectedNodeCode=='8'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionAnexo" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:focus context="panelEdicionAnexo"/>
                                    <h:panelGrid columns="2" rendered="#{proyectoController.anexoProyectoSelected==null}">
                                        <p:commandButton value="Agregar" title="Agregar Anexo" icon="ui-icon-plus" 
                                                         update=":formPrincipal:panelEdicionAnexo, :formPrincipal:message1"
                                                         action="#{proyectoController.nuevoAnexo}" 
                                                         >
                                        </p:commandButton>
                                    </h:panelGrid>
                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%" rendered="#{proyectoController.anexoProyectoSelected !=null}">
                                        <p:fieldset legend="NUEVO ANEXO">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarAnexo" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelAnexo, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarAnexo}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelAnexo" 
                                                                 action="#{proyectoController.cancelarAnexo}">
                                                </p:commandButton>
                                            </h:panelGrid>                                          

                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px">
                                                <p:outputLabel for="txtFechaAnexo" value="* Fecha subida:" style="font-weight: bold"></p:outputLabel>
                                                <p:inputText id="txtFechaAnexo" value="#{proyectoController.anexoProyectoSelected.fechaSubida}"
                                                             style="width: 100px" disabled="true">
                                                    <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                                </p:inputText>

                                                <p:outputLabel value="* Tipo Anexo:" for="selTipoAnexo" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <p:selectOneMenu id="selTipoAnexo"
                                                                     required="#{not empty param['formPrincipal:btnGrabarAnexo']}" 
                                                                     style="width:160px;" 
                                                                     value="#{proyectoController.anexoProyectoSelected.tipo}" 
                                                                     >
                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                        <f:selectItem itemLabel="Acta de Reunión" itemValue="1"/>
                                                        <f:selectItem itemLabel="Fotografia o Video" itemValue="2"/>
                                                        <f:selectItem itemLabel="Registro de Beneficiarios" itemValue="3"/>
                                                        <f:selectItem itemLabel="Otros" itemValue="4"/>
                                                    </p:selectOneMenu>
                                                    <p:message for="selTipoAnexo"></p:message>
                                                </h:panelGrid>


                                                <p:outputLabel value="* Documento adjunto:" for="hidNombreAnexo"  style="font-weight: bold"/>
                                                <h:panelGrid columns="3">
                                                    <h:panelGrid columns="1" cellpadding="0" cellspacing="0">
                                                        <p:outputLabel id="lblNombreAnexo" value="#{proyectoController.anexoProyectoSelected.archivoNombre}"/>
                                                        <p:fileUpload id="fileAnexo" fileUploadListener="#{proyectoController.subirAnexo}" 
                                                                      required="#{not empty param['formPrincipal:btnGrabarAnexo']}" 
                                                                      mode="advanced" 
                                                                      label="Seleccionar"
                                                                      invalidFileMessage="Tipo de archivo incorrecto: "
                                                                      invalidSizeMessage="Tamaño del archivo seleccionado excede el límite permitido (10MB): "
                                                                      update=":formPrincipal:lblNombreAnexo, :formPrincipal:hidNombreAnexo, :formPrincipal:message1" auto="true" sizeLimit="10240000"/>

                                                    </h:panelGrid>
                                                    <h:inputHidden id="hidNombreAnexo" value="#{proyectoController.anexoProyectoSelected.archivoNombre}"
                                                                   required="#{not empty param['formPrincipal:btnGrabarAnexo']}"></h:inputHidden>                                                    
                                                    <p:message for="hidNombreAnexo"></p:message>
                                                </h:panelGrid>                                                

                                            </h:panelGrid>

                                        </p:fieldset>

                                    </h:panelGrid>

                                </h:panelGrid>
                                <h:outputLabel value="Listado de anexos:" style="font-weight: bold"/>
                                <p:dataTable id="dtAnexos" value="#{proyectoController.proyectoSelected.anexoDocumentoProyectoList}" var="anexo"
                                             rowIndexVar="index"  resizableColumns="true" style="margin-bottom: 10px"
                                             emptyMessage="No se encontraron resultados">
                                    <p:column headerText="Nro." width="20" >
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Fecha subida" width="80" sortBy="#{anexo.fechaSubida}">
                                        <h:outputText value="#{anexo.fechaSubida}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Usuario" width="200" sortBy="#{anexo.usuario.usuNombres.concat(' ').concat(anexo.usuario.usuApellidos)}">
                                        <h:outputText value="#{anexo.usuario.usuNombres.concat(' ').concat(anexo.usuario.usuApellidos)}" style="white-space: pre-line"></h:outputText>
                                    </p:column>
                                    <p:column headerText="Tipo Anexo" width="200" sortBy="#{anexo.tipoDesc}">
                                        <h:outputText value="#{anexo.tipoDesc}" style="white-space: pre-line"></h:outputText>
                                    </p:column>
                                    <p:column headerText="Nombre Anexo" sortBy="#{anexo.archivoNombre}">
                                        <h:outputText value="#{anexo.archivoNombre}" style="white-space: pre-line"></h:outputText>
                                    </p:column>

                                    <p:column headerText="Descargar" width="50" style="text-align: center">
                                        <p:commandButton actionListener="#{proyectoController.prepararArchivoDownload(anexo)}"
                                                         ajax="false" icon="ui-icon-arrowthick-1-s" title="Descargar anexo">
                                            <p:fileDownload value="#{proyectoController.archivoAdjunto}" />
                                        </p:commandButton>
                                    </p:column>                                    
                                    <p:column headerText="Eliminar" width="50" style="text-align: center" >
                                        <p:commandButton style="margin: 0" title="Eliminar el registro" icon="ui-icon-trash" 
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                         action="#{proyectoController.eliminarAnexo}"
                                                         update=":formPrincipal:panelAnexo, :formPrincipal:message1 ">
                                            <f:setPropertyActionListener value="#{anexo}" target="#{proyectoController.anexoProyectoSelected}" />
                                            <p:confirm header="Confirmación" message="Confirma que desea eliminar el anexo seleccionado ?" icon="ui-icon-alert" />
                                        </p:commandButton>  
                                    </p:column>

                                </p:dataTable>                                               


                            </p:panel>              


                            <!--panelAnexoDiagnosticoProblema-->
                            <p:panel id="panelAnexoDiagnosticoProblema" rendered="#{proyectoController.selectedNodeCode=='1.2.11'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionAnexoDiagnosticoProblema" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:focus context="panelEdicionAnexoDiagnosticoProblema"/>
                                    <h:panelGrid columns="2" rendered="#{proyectoController.anexoProyectoSelected==null}">
                                        <p:commandButton value="Agregar" title="Agregar Anexo" icon="ui-icon-plus" 
                                                         update=":formPrincipal:panelEdicionAnexoDiagnosticoProblema, :formPrincipal:message1"
                                                         action="#{proyectoController.nuevoAnexoDiagnosticoProblema}" 
                                                         >
                                        </p:commandButton>
                                    </h:panelGrid>
                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%" rendered="#{proyectoController.anexoProyectoSelected !=null}">
                                        <p:fieldset legend="NUEVO ANEXO">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarAnexoDiagnosticoProblema" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelAnexoDiagnosticoProblema, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarAnexo}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelAnexoDiagnosticoProblema" 
                                                                 action="#{proyectoController.cancelarAnexo}">
                                                </p:commandButton>
                                            </h:panelGrid>                                          

                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px" columnClasses="col1_anexo_diagnostico_problema">
                                                <p:outputLabel for="txtFechaAnexoDiagnosticoProblema" value="* Fecha subida:" style="font-weight: bold"></p:outputLabel>
                                                <p:inputText id="txtFechaAnexoDiagnosticoProblema" value="#{proyectoController.anexoProyectoSelected.fechaSubida}"
                                                             style="width: 100px" disabled="true">
                                                    <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                                </p:inputText>

                                                <p:outputLabel value="* Documento adjunto (jpg|jpeg|png):" for="hidNombreAnexoDiagnosticoProblema"  style="font-weight: bold"/>
                                                <h:panelGrid columns="3">
                                                    <h:panelGrid columns="1" cellpadding="0" cellspacing="0"> 
                                                        <p:outputLabel id="lblNombreAnexoDiagnosticoProblema" value="#{proyectoController.anexoProyectoSelected.archivoNombre}"/>
                                                        <p:fileUpload id="fileAnexoDiagnosticoProblema" fileUploadListener="#{proyectoController.subirAnexoDiagnosticoProblema}" 
                                                                      required="#{not empty param['formPrincipal:btnGrabarAnexoDiagnosticoProblema']}" 
                                                                      mode="advanced" 
                                                                      label="Seleccionar"
                                                                      invalidFileMessage="Tipo de archivo incorrecto: "
                                                                      invalidSizeMessage="Tamaño del archivo seleccionado excede el límite permitido (10MB): "
                                                                      allowTypes="/(\.|\/)(jpg|jpeg|png)$/"
                                                                      update=":formPrincipal:lblNombreAnexoDiagnosticoProblema, :formPrincipal:hidNombreAnexoDiagnosticoProblema, :formPrincipal:message1" auto="true" sizeLimit="10240000"/>

                                                    </h:panelGrid>
                                                    <h:inputHidden id="hidNombreAnexoDiagnosticoProblema" value="#{proyectoController.anexoProyectoSelected.archivoNombre}"
                                                                   required="#{not empty param['formPrincipal:btnGrabarAnexoDiagnosticoProblema']}"></h:inputHidden>                                                    
                                                    <p:message for="hidNombreAnexoDiagnosticoProblema"></p:message> 
                                                </h:panelGrid>                                                

                                            </h:panelGrid>

                                        </p:fieldset>

                                    </h:panelGrid>

                                </h:panelGrid>
                                <h:outputLabel value="Listado de imágenes de Diagnóstico y Problema:" style="font-weight: bold"/>
                                <p:dataTable id="dtAnexosDiagnosticoProblema" value="#{proyectoController.proyectoSelected.anexoDiagnosticoProblemaList}" var="anexoDiagnosticoProblema"
                                             rowIndexVar="index"  resizableColumns="true" style="margin-bottom: 10px"
                                             emptyMessage="No se encontraron resultados">
                                    <p:column headerText="Nro." width="20" >
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Fecha subida" width="80" sortBy="#{anexoDiagnosticoProblema.fechaSubida}">
                                        <h:outputText value="#{anexoDiagnosticoProblema.fechaSubida}">
                                            <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                        </h:outputText>
                                    </p:column>
                                    <p:column headerText="Nombre Anexo" sortBy="#{anexoDiagnosticoProblema.archivoNombre}">
                                        <h:outputText value="#{anexoDiagnosticoProblema.archivoNombre}" style="white-space: pre-line"></h:outputText>
                                    </p:column>

                                    <p:column headerText="Descargar" width="50" style="text-align: center">
                                        <p:commandButton actionListener="#{proyectoController.prepararArchivoDownload(anexoDiagnosticoProblema)}"
                                                         ajax="false" icon="ui-icon-arrowthick-1-s" title="Descargar anexo">
                                            <p:fileDownload value="#{proyectoController.archivoAdjunto}" />
                                        </p:commandButton>
                                    </p:column>                                    
                                    <p:column headerText="Eliminar" width="50" style="text-align: center" >
                                        <p:commandButton style="margin: 0" title="Eliminar el registro" icon="ui-icon-trash" 
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                         action="#{proyectoController.eliminarAnexo}"
                                                         update=":formPrincipal:panelAnexoDiagnosticoProblema, :formPrincipal:message1 ">
                                            <f:setPropertyActionListener value="#{anexoDiagnosticoProblema}" target="#{proyectoController.anexoProyectoSelected}" />
                                            <p:confirm header="Confirmación" message="Confirma que desea eliminar el anexo seleccionado ?" icon="ui-icon-alert" />
                                        </p:commandButton>  
                                    </p:column>

                                </p:dataTable>                                               


                            </p:panel>              



                            <!--panelEvaluadorFinal-->
                            <p:panel id="panelEvaluadorFinal" rendered="#{proyectoController.selectedNodeCode=='9.1'}" style="border: hidden; padding-left: 20px;">
                                <h:panelGrid id="panelEdicionEvaluadorFinal" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirEvaluacionFinal}" style="color:red"></p:outputLabel>
                                    <h:panelGrid columns="2" rendered="#{!proyectoController.modoEdicion}">
                                        <p:commandButton value="Editar" title="Editar" icon="ui-icon-plus" 
                                                         update=":formPrincipal:panelEdicionEvaluadorFinal"
                                                         disabled="#{proyectoController.proyectoSelected.mensajePermitirEvaluacionFinal!=''}"
                                                         actionListener="#{proyectoController.seleccionarEdicion}" 
                                                         >
                                        </p:commandButton>
                                    </h:panelGrid>


                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%">
                                        <p:fieldset legend="EVALUADOR FINAL DEL PROYECTO">
                                            <h:panelGrid columns="2" cellpadding="0" rendered="#{proyectoController.modoEdicion}" cellspacing="5" style="margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarEvaluadorFinal" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelEvaluadorFinal, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarEvaluadorFinal()}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelEvaluadorFinal" 
                                                                 action="#{proyectoController.cancelarEvaluadorFinal}">
                                                </p:commandButton>
                                            </h:panelGrid>     
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-top: 10px; margin-bottom: 10px" columnClasses="col1_evaluador_final">
                                                <p:outputLabel value="* Cédula:" style="font-weight: bold"/>
                                                <h:panelGrid columns="4" >
                                                    <p:commandButton  title="Buscar Docente" icon="ui-icon-search"
                                                                      disabled="#{!proyectoController.modoEdicion}"
                                                                      actionListener="#{proyectoController.abrirBusquedaDocente}">
                                                        <p:ajax event="dialogReturn" listener="#{proyectoController.seleccionarEvaluadorFinal}" update=":formPrincipal:panelEdicionEvaluadorFinal, :formPrincipal:message1"
                                                                onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"/>
                                                    </p:commandButton>
                                                    <p:inputText id="txtCedulaEvaluadorFinal" style="width: 100px" value="#{proyectoController.docenteSelected.usuCc}" disabled ="true">
                                                    </p:inputText>
                                                </h:panelGrid> 

                                                <p:outputLabel value="* Nombres:" for="txtNombresEvaluadorFinal" style="font-weight: bold"/>
                                                <p:inputText id="txtNombresEvaluadorFinal" style="width: 250px"
                                                             value="#{proyectoController.docenteSelected.usuNombres}"
                                                             disabled ="true">
                                                </p:inputText>

                                                <p:outputLabel value="* Apellidos:" for="txtApellidosEvaluadorFinal" style="font-weight: bold"/>
                                                <p:inputText id="txtApellidosEvaluadorFinal" style="width: 250px; margin-bottom: 10px;"
                                                             value="#{proyectoController.docenteSelected.usuApellidos}"
                                                             disabled ="true">
                                                </p:inputText>

                                            </h:panelGrid>                                            
                                        </p:fieldset>


                                    </h:panelGrid>

                                </h:panelGrid>

                            </p:panel>


                            <!--panelEvaluacionFinal-->
                            <p:panel id="panelEvaluacionFinal" rendered="#{proyectoController.selectedNodeCode=='9.2'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionEvaluacionFinal" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <h:panelGrid columns="1" rendered="#{!proyectoController.modoEdicion}">
                                        <p:commandButton id="btnEditarEvaluacionFinal" value="Editar" title="Editar Evaluación" icon="ui-icon-plus" 
                                                         disabled="#{proyectoController.proyectoSelected.mensajePermitirEvaluacionFinal!='' or proyectoController.proyectoSelected.estado=='EVA'}" 
                                                         action ="#{proyectoController.nuevoEvaluacionFinal}"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                         update=":formPrincipal:panelEvaluacionFinal"
                                                         >
                                        </p:commandButton>
                                        <p:message for="btnEditarEvaluacionFinal"></p:message>
                                    </h:panelGrid>
                                    <h:panelGrid cellspacing="5" columns="1" style="width: 98%"
                                                 >
                                        <p:fieldset 
                                            legend="EVALUACION FINAL DE PROYECTO">
                                            <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirEvaluacionFinal}" style="color:red"></p:outputLabel>                                    
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px"
                                                         rendered="#{proyectoController.modoEdicion}">
                                                <p:commandButton id="btnGrabarEvaluacionFinal" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelEdicionEvaluacionFinal, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarEvaluacionFinal}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelEvaluacionFinal" 
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                                 action="#{proyectoController.cancelarEvaluacionFinal}">
                                                </p:commandButton>
                                            </h:panelGrid>                                          

                                            <h:panelGrid columns="1" cellpadding="0" cellspacing="0" style="margin-bottom: 10px; margin-top: 10px">
                                                <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px; margin-top: 10px">
                                                    <p:outputLabel for="txtFechaEvaluacionFinal" value="* Fecha:" style="font-weight: bold"></p:outputLabel>
                                                    <p:inputText id="txtFechaEvaluacionFinal" value="#{proyectoController.fechaEvaluacionFinal}"
                                                                 style="width: 100px" disabled="true">
                                                        <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                                    </p:inputText>

                                                    <p:outputLabel for="txtObservacionesEvaluacionFinal" value="* Observaciones:" style="font-weight: bold"></p:outputLabel>
                                                    <h:panelGrid columns="2">
                                                        <p:inputTextarea id="txtObservacionesEvaluacionFinal" value="#{proyectoController.observacionesEvaluacionFinal}"
                                                                         cols="100" rows="3" maxlength="1000"
                                                                         required="#{not empty param['formPrincipal:btnGrabarEvaluacionFinal']}"
                                                                         disabled="#{!proyectoController.modoEdicion}">
                                                        </p:inputTextarea>
                                                        <p:message for="txtObservacionesEvaluacionFinal"></p:message>
                                                    </h:panelGrid>

                                                </h:panelGrid>
                                                <h:panelGrid id="panelTotalEvaluacion" columns="3" cellpadding="0" cellspacing="0" style="margin-bottom: 10px; margin-top: 10px">
                                                    <p:outputLabel value="PUNTAJE TOTAL ALCANZADO:" style="font-weight: bold"/>
                                                    <p:spacer height="1" width="20"></p:spacer>
                                                    <p:outputLabel value="#{proyectoController.configuracionParametrosEvaluacionActual.puntajeTotalEvaluacionFinal.toString().concat(' / ').concat(proyectoController.configuracionParametrosEvaluacionActual.puntajeMaximoEvaluacionFinal)}" style="font-weight: bold"/>

                                                    <p:outputLabel value="PORCENTAJE DE CUMPLIMIENTO:" style="font-weight: bold"/>
                                                    <p:spacer height="1" width="20"></p:spacer>
                                                    <p:outputLabel value="#{proyectoController.configuracionParametrosEvaluacionActual.porcentajeCumplimientoEvaluacionFinalStr.concat(' %')}" style="font-weight: bold"/>
                                                </h:panelGrid>
                                            </h:panelGrid>


                                            <p:tabView id="tabView1" activeIndex="#{proyectoController.activeIndexTabEvaluacion}">
                                                <p:tab title="Análisis de Pertinencia">
                                                    <p:dataTable id="dtEvaluacionFinalPertinencia" value="#{proyectoController.configuracionParametrosEvaluacionActual.parametroEvaluacionFinalCabeceraPertinenciaList}" var="cabEvaluacionFinalPertinencia"
                                                                 editable="true" rowIndexVar="index"  resizableColumns="true" style="margin-bottom: 10px" expandedRow="true"
                                                                 emptyMessage="No se encontraron resultados" styleClass="hide-column-names">
                                                        <p:column headerText="" style="white-space:pre-line">
                                                            <h:outputText value="#{cabEvaluacionFinalPertinencia.nombre}" style="white-space: pre-line;"/>
                                                        </p:column>
                                                        <p:column headerText="" style="text-align: center; width: 70px">
                                                            <h:outputText id="puntaje" value="#{cabEvaluacionFinalPertinencia.puntajeTotal.toString().concat(' / ').concat(cabEvaluacionFinalPertinencia.puntajeMaximo)}"/>
                                                        </p:column>
                                                        <p:rowExpansion >
                                                            <p:panel style="border:hidden;width:98%; padding-left: 30px"  >
                                                                <h:panelGrid columns="1">
                                                                    <h:outputLabel value="#{cabEvaluacionFinalPertinencia.descripcion1}" />
                                                                    <h:outputLabel value="#{cabEvaluacionFinalPertinencia.descripcion2}" style="white-space:pre-line"/>
                                                                </h:panelGrid>
                                                                <h:outputLabel value="ASPECTOS DE EVALUACIÓN:" style="font-weight: bold"/>
                                                                <p:dataTable value="#{cabEvaluacionFinalPertinencia.parametroEvaluacionList}" var="paramEvaluacionFinalPertinencia"
                                                                             rendered="#{not empty cabEvaluacionFinalPertinencia.parametroEvaluacionList}"
                                                                             rowIndexVar="index">
                                                                    <p:column headerText="Nro." style="width:20px">
                                                                        <h:outputText value="#{index + 1}"/>
                                                                    </p:column>
                                                                    <p:column headerText="Parámetro" style="white-space:pre-line">
                                                                        <h:outputText value="#{paramEvaluacionFinalPertinencia.descripcion2}" style="white-space: pre-line;"/>
                                                                        <h:outputText value="#{paramEvaluacionFinalPertinencia.descripcion3}" style="white-space: pre-line;"
                                                                                      rendered="#{paramEvaluacionFinalPertinencia.idAspectoEvaluacion!=null and paramEvaluacionFinalPertinencia.idAspectoEvaluacion=='4'}"/>
                                                                        <h:panelGrid columns="2" rendered="#{paramEvaluacionFinalPertinencia.idAspectoEvaluacion!=null}">
                                                                            <h:outputLabel value="#{paramEvaluacionFinalPertinencia.descValor1}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalPertinencia.valor1}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalPertinencia.descValor2}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalPertinencia.valor2}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalPertinencia.descValor3}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalPertinencia.valor3}"></h:outputLabel>
                                                                        </h:panelGrid> 
                                                                        <h:panelGrid columns="2" rendered="#{paramEvaluacionFinalPertinencia.solicitarInfoAdicional!=null and paramEvaluacionFinalPertinencia.solicitarInfoAdicional=='S'}">
                                                                            <h:outputLabel value="#{paramEvaluacionFinalPertinencia.preguntaInfoAdicional}"></h:outputLabel>
                                                                        </h:panelGrid>

                                                                    </p:column>
                                                                    <p:column headerText="Valoración" style="width:170px">
                                                                        <table>
                                                                            <tr>
                                                                                <td style="padding: 0px; border: hidden">
                                                                                    <p:selectOneMenu id="selOpcionValoracionFinalPertinencia"
                                                                                                     required="#{not empty param['formPrincipal:btnGrabarEvaluacionFinal']}" 
                                                                                                     converter="omnifaces.SelectItemsConverter"
                                                                                                     disabled="#{(!proyectoController.modoEdicion or paramEvaluacionFinalPertinencia.idAspectoEvaluacion!=null) and (!cabEvaluacionFinalPertinencia.expanded)}"
                                                                                                     value="#{paramEvaluacionFinalPertinencia.valoracionParametroEvaluacion}"
                                                                                                     style="width: 140px"
                                                                                                     >
                                                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                                                        <f:selectItems value="#{paramEvaluacionFinalPertinencia.valoracionList}" var="pPertinencia" itemLabel="#{pPertinencia.descripcion}" itemValue="#{pPertinencia}"/>
                                                                                        <p:ajax event="change" update=":formPrincipal:tabView1:dtEvaluacionFinalPertinencia, :formPrincipal:panelTotalEvaluacion"></p:ajax>
                                                                                    </p:selectOneMenu>

                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td style="padding: 0px; border: hidden">
                                                                                    <p:message for="selOpcionValoracionFinalPertinencia"></p:message>
                                                                                </td>

                                                                            </tr>
                                                                            <tr>
                                                                                <td style="padding: 0px; border: hidden">
                                                                                    <p:inputTextarea id="txtRespInfoAdiValoracionFinalPertinencia"
                                                                                                     value="#{paramEvaluacionFinalPertinencia.respuestaInfoAdicional}"
                                                                                                     rendered="#{paramEvaluacionFinalPertinencia.solicitarInfoAdicional!=null and paramEvaluacionFinalPertinencia.solicitarInfoAdicional=='S'}"
                                                                                                     disabled="#{!proyectoController.modoEdicion}"
                                                                                                     cols="22" rows="3" maxlength="500"
                                                                                                     >
                                                                                    </p:inputTextarea>
                                                                                </td>

                                                                            </tr>
                                                                            <tr>
                                                                                <td style="padding: 0px; border: hidden">
                                                                                    <p:message for="txtRespInfoAdiValoracionFinalPertinencia" rendered="#{paramEvaluacionFinalPertinencia.solicitarInfoAdicional!=null and paramEvaluacionFinalPertinencia.solicitarInfoAdicional=='S'}"></p:message>
                                                                                </td>

                                                                            </tr>


                                                                        </table>
                                                                    </p:column>
                                                                    <p:column headerText="Puntaje" style="text-align: center; width:70px">
                                                                        <h:outputText id="puntaje" value="#{paramEvaluacionFinalPertinencia.valoracionParametroEvaluacion.puntaje}"/>
                                                                    </p:column>                     
                                                                </p:dataTable>
                                                            </p:panel>
                                                        </p:rowExpansion>
                                                    </p:dataTable> 
                                                </p:tab>
                                                <p:tab title="Análisis de Eficacia">
                                                    <p:dataTable id="dtEvaluacionFinalEficacia" value="#{proyectoController.configuracionParametrosEvaluacionActual.parametroEvaluacionFinalCabeceraEficaciaList}" var="cabEvaluacionFinalEficacia"
                                                                 editable="true" rowIndexVar="index"  resizableColumns="true" style="margin-bottom: 10px" expandedRow="true"
                                                                 emptyMessage="No se encontraron resultados" styleClass="hide-column-names">
                                                        <p:column headerText="" style="white-space:pre-line">
                                                            <h:outputText value="#{cabEvaluacionFinalEficacia.nombre}" style="white-space: pre-line;"/>
                                                        </p:column>
                                                        <p:column headerText="" style="text-align: center; width: 70px">
                                                            <h:outputText id="puntaje" value="#{cabEvaluacionFinalEficacia.puntajeTotal.toString().concat(' / ').concat(cabEvaluacionFinalEficacia.puntajeMaximo)}"/>
                                                        </p:column>
                                                        <p:rowExpansion >
                                                            <p:panel style="border:hidden;width:98%; padding-left: 30px"  >
                                                                <h:panelGrid columns="1">
                                                                    <h:outputLabel value="#{cabEvaluacionFinalEficacia.descripcion1}" />
                                                                    <h:outputLabel value="#{cabEvaluacionFinalEficacia.descripcion2}" style="white-space:pre-line"/>
                                                                </h:panelGrid>
                                                                <h:outputLabel value="ASPECTOS DE EVALUACIÓN:" style="font-weight: bold"/>

                                                                <p:dataTable value="#{cabEvaluacionFinalEficacia.parametroEvaluacionList}" var="paramEvaluacionFinalEficacia"
                                                                             rendered="#{not empty cabEvaluacionFinalEficacia.parametroEvaluacionList}"
                                                                             rowIndexVar="index">
                                                                    <p:column headerText="Nro." style="width:20px">
                                                                        <h:outputText value="#{index + 1}"/>
                                                                    </p:column>
                                                                    <p:column headerText="Parámetro" style="white-space:pre-line">
                                                                        <h:outputText value="#{paramEvaluacionFinalEficacia.descripcion2}" style="white-space: pre-line;"/>
                                                                        <h:outputText value="#{paramEvaluacionFinalEficacia.descripcion3}" style="white-space: pre-line;"
                                                                                      rendered="#{paramEvaluacionFinalEficacia.idAspectoEvaluacion!=null and paramEvaluacionFinalEficacia.idAspectoEvaluacion=='4'}"/>
                                                                        <h:panelGrid columns="2" rendered="#{paramEvaluacionFinalEficacia.idAspectoEvaluacion!=null}">
                                                                            <h:outputLabel value="#{paramEvaluacionFinalEficacia.descValor1}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalEficacia.valor1}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalEficacia.descValor2}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalEficacia.valor2}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalEficacia.descValor3}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalEficacia.valor3}"></h:outputLabel>
                                                                        </h:panelGrid> 
                                                                        <h:panelGrid columns="2" rendered="#{paramEvaluacionFinalEficacia.solicitarInfoAdicional!=null and paramEvaluacionFinalEficacia.solicitarInfoAdicional=='S'}">
                                                                            <h:outputLabel value="#{paramEvaluacionFinalEficacia.preguntaInfoAdicional}"></h:outputLabel>
                                                                        </h:panelGrid>

                                                                    </p:column>
                                                                    <p:column headerText="Valoración" style="width:170px">
                                                                        <table>
                                                                            <tr>
                                                                                <td style="padding: 0px; border: hidden">
                                                                                    <p:selectOneMenu id="selOpcionValoracionFinalEficacia"
                                                                                                     required="#{not empty param['formPrincipal:btnGrabarEvaluacionFinal']}" 
                                                                                                     converter="omnifaces.SelectItemsConverter"
                                                                                                     disabled="#{(!proyectoController.modoEdicion or paramEvaluacionFinalEficacia.idAspectoEvaluacion!=null) and (!cabEvaluacionFinalEficacia.expanded)}"
                                                                                                     value="#{paramEvaluacionFinalEficacia.valoracionParametroEvaluacion}"
                                                                                                     style="width: 140px"
                                                                                                     >
                                                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                                                        <f:selectItems value="#{paramEvaluacionFinalEficacia.valoracionList}" var="pEficacia" itemLabel="#{pEficacia.descripcion}" itemValue="#{pEficacia}"/>
                                                                                        <p:ajax event="change" update=":formPrincipal:tabView1:dtEvaluacionFinalEficacia, :formPrincipal:panelTotalEvaluacion"></p:ajax>
                                                                                    </p:selectOneMenu>

                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td style="padding: 0px; border: hidden">
                                                                                    <p:message for="selOpcionValoracionFinalEficacia"></p:message>
                                                                                </td>

                                                                            </tr>
                                                                            <tr>
                                                                                <td style="padding: 0px; border: hidden">
                                                                                    <p:inputTextarea id="txtRespInfoAdiValoracionFinalEficacia"
                                                                                                     value="#{paramEvaluacionFinalEficacia.respuestaInfoAdicional}"
                                                                                                     rendered="#{paramEvaluacionFinalEficacia.solicitarInfoAdicional!=null and paramEvaluacionFinalEficacia.solicitarInfoAdicional=='S'}"
                                                                                                     disabled="#{!proyectoController.modoEdicion}"
                                                                                                     cols="22" rows="3" maxlength="500"
                                                                                                     >
                                                                                    </p:inputTextarea>
                                                                                </td>

                                                                            </tr>
                                                                            <tr>
                                                                                <td style="padding: 0px; border: hidden">
                                                                                    <p:message for="txtRespInfoAdiValoracionFinalEficacia" rendered="#{paramEvaluacionFinalEficacia.solicitarInfoAdicional!=null and paramEvaluacionFinalEficacia.solicitarInfoAdicional=='S'}"></p:message>
                                                                                </td>

                                                                            </tr>


                                                                        </table>
                                                                    </p:column>
                                                                    <p:column headerText="Puntaje" style="text-align: center; width:70px">
                                                                        <h:outputText id="puntaje" value="#{paramEvaluacionFinalEficacia.valoracionParametroEvaluacion.puntaje}"/>
                                                                    </p:column>                     
                                                                </p:dataTable>
                                                            </p:panel>
                                                        </p:rowExpansion>
                                                    </p:dataTable>    
                                                </p:tab>
                                                <p:tab title="Análisis de Eficiencia">
                                                    <p:dataTable id="dtEvaluacionFinalEficiencia" value="#{proyectoController.configuracionParametrosEvaluacionActual.parametroEvaluacionFinalCabeceraEficienciaList}" var="cabEvaluacionFinalEficiencia"
                                                                 editable="true" rowIndexVar="index"  resizableColumns="true" style="margin-bottom: 10px" expandedRow="true"
                                                                 emptyMessage="No se encontraron resultados" styleClass="hide-column-names">
                                                        <p:column headerText="" style="white-space:pre-line">
                                                            <h:outputText value="#{cabEvaluacionFinalEficiencia.nombre}" style="white-space: pre-line;"/>
                                                        </p:column>
                                                        <p:column headerText="" style="text-align: center; width: 70px">
                                                            <h:outputText id="puntaje" value="#{cabEvaluacionFinalEficiencia.puntajeTotal.toString().concat(' / ').concat(cabEvaluacionFinalEficiencia.puntajeMaximo)}"/>
                                                        </p:column>
                                                        <p:rowExpansion >
                                                            <p:panel style="border:hidden;width:98%; padding-left: 30px"  >
                                                                <h:panelGrid columns="1">
                                                                    <h:outputLabel value="#{cabEvaluacionFinalEficiencia.descripcion1}" />
                                                                    <h:outputLabel value="#{cabEvaluacionFinalEficiencia.descripcion2}" style="white-space:pre-line"/>
                                                                </h:panelGrid>
                                                                <h:outputLabel value="ASPECTOS DE EVALUACIÓN:" style="font-weight: bold"/>
                                                                <p:dataTable value="#{cabEvaluacionFinalEficiencia.parametroEvaluacionList}" var="paramEvaluacionFinalEficiencia"
                                                                             rendered="#{not empty cabEvaluacionFinalEficiencia.parametroEvaluacionList}"
                                                                             rowIndexVar="index">
                                                                    <p:column headerText="Nro." style="width:20px">
                                                                        <h:outputText value="#{index + 1}"/>
                                                                    </p:column>
                                                                    <p:column headerText="Parámetro" style="white-space:pre-line">
                                                                        <h:outputText value="#{paramEvaluacionFinalEficiencia.descripcion2}" style="white-space: pre-line;"/>
                                                                        <h:outputText value="#{paramEvaluacionFinalEficiencia.descripcion3}" style="white-space: pre-line;"
                                                                                      rendered="#{paramEvaluacionFinalEficiencia.idAspectoEvaluacion!=null and paramEvaluacionFinalEficiencia.idAspectoEvaluacion=='4'}"/>
                                                                        <h:panelGrid columns="2" rendered="#{paramEvaluacionFinalEficiencia.idAspectoEvaluacion!=null}">
                                                                            <h:outputLabel value="#{paramEvaluacionFinalEficiencia.descValor1}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalEficiencia.valor1}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalEficiencia.descValor2}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalEficiencia.valor2}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalEficiencia.descValor3}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalEficiencia.valor3}"></h:outputLabel>
                                                                        </h:panelGrid> 
                                                                        <h:panelGrid columns="2" rendered="#{paramEvaluacionFinalEficiencia.solicitarInfoAdicional!=null and paramEvaluacionFinalEficiencia.solicitarInfoAdicional=='S'}">
                                                                            <h:outputLabel value="#{paramEvaluacionFinalEficiencia.preguntaInfoAdicional}"></h:outputLabel>
                                                                        </h:panelGrid>

                                                                    </p:column>
                                                                    <p:column headerText="Valoración" style="width:170px">
                                                                        <table>
                                                                            <tr>
                                                                                <td style="padding: 0px; border: hidden">
                                                                                    <p:selectOneMenu id="selOpcionValoracionFinalEficiencia"
                                                                                                     required="#{not empty param['formPrincipal:btnGrabarEvaluacionFinal']}" 
                                                                                                     converter="omnifaces.SelectItemsConverter"
                                                                                                     disabled="#{(!proyectoController.modoEdicion or paramEvaluacionFinalEficiencia.idAspectoEvaluacion!=null) and (!cabEvaluacionFinalEficiencia.expanded)}"
                                                                                                     value="#{paramEvaluacionFinalEficiencia.valoracionParametroEvaluacion}"
                                                                                                     style="width: 140px"
                                                                                                     >
                                                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                                                        <f:selectItems value="#{paramEvaluacionFinalEficiencia.valoracionList}" var="pEficiencia" itemLabel="#{pEficiencia.descripcion}" itemValue="#{pEficiencia}"/>
                                                                                        <p:ajax event="change" update=":formPrincipal:tabView1:dtEvaluacionFinalEficiencia, :formPrincipal:panelTotalEvaluacion"></p:ajax>
                                                                                    </p:selectOneMenu>

                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td style="padding: 0px; border: hidden">
                                                                                    <p:message for="selOpcionValoracionFinalEficiencia"></p:message>
                                                                                </td>

                                                                            </tr>
                                                                            <tr>
                                                                                <td style="padding: 0px; border: hidden">
                                                                                    <p:inputTextarea id="txtRespInfoAdiValoracionFinalEficiencia"
                                                                                                     value="#{paramEvaluacionFinalEficiencia.respuestaInfoAdicional}"
                                                                                                     rendered="#{paramEvaluacionFinalEficiencia.solicitarInfoAdicional!=null and paramEvaluacionFinalEficiencia.solicitarInfoAdicional=='S'}"
                                                                                                     disabled="#{!proyectoController.modoEdicion}"
                                                                                                     cols="22" rows="3" maxlength="500"
                                                                                                     >
                                                                                    </p:inputTextarea>
                                                                                </td>

                                                                            </tr>
                                                                            <tr>
                                                                                <td style="padding: 0px; border: hidden">
                                                                                    <p:message for="txtRespInfoAdiValoracionFinalEficiencia" rendered="#{paramEvaluacionFinalEficiencia.solicitarInfoAdicional!=null and paramEvaluacionFinalEficiencia.solicitarInfoAdicional=='S'}"></p:message>
                                                                                </td>

                                                                            </tr>


                                                                        </table>
                                                                    </p:column>
                                                                    <p:column headerText="Puntaje" style="text-align: center; width:70px">
                                                                        <h:outputText id="puntaje" value="#{paramEvaluacionFinalEficiencia.valoracionParametroEvaluacion.puntaje}"/>
                                                                    </p:column>                     
                                                                </p:dataTable>
                                                            </p:panel>
                                                        </p:rowExpansion>
                                                    </p:dataTable>    
                                                </p:tab>

                                                <p:tab title="Análisis de Sostenibilidad">
                                                    <p:dataTable id="dtEvaluacionFinalSostenibilidad" value="#{proyectoController.configuracionParametrosEvaluacionActual.parametroEvaluacionFinalCabeceraSostenibilidadList}" var="cabEvaluacionFinalSostenibilidad"
                                                                 editable="true" rowIndexVar="index"  resizableColumns="true" style="margin-bottom: 10px" expandedRow="true"
                                                                 emptyMessage="No se encontraron resultados" styleClass="hide-column-names">
                                                        <p:column headerText="" style="white-space:pre-line">
                                                            <h:outputText value="#{cabEvaluacionFinalSostenibilidad.nombre}" style="white-space: pre-line;"/>
                                                        </p:column>
                                                        <p:column headerText="" style="text-align: center; width: 70px">
                                                            <h:outputText id="puntaje" value="#{cabEvaluacionFinalSostenibilidad.puntajeTotal.toString().concat(' / ').concat(cabEvaluacionFinalSostenibilidad.puntajeMaximo)}"/>
                                                        </p:column>
                                                        <p:rowExpansion >
                                                            <p:panel style="border:hidden;width:98%; padding-left: 30px"  >
                                                                <h:panelGrid columns="1">
                                                                    <h:outputLabel value="#{cabEvaluacionFinalSostenibilidad.descripcion1}" />
                                                                    <h:outputLabel value="#{cabEvaluacionFinalSostenibilidad.descripcion2}" style="white-space:pre-line"/>
                                                                </h:panelGrid>
                                                                <h:outputLabel value="ASPECTOS DE EVALUACIÓN:" style="font-weight: bold"/>
                                                                <p:dataTable value="#{cabEvaluacionFinalSostenibilidad.parametroEvaluacionList}" var="paramEvaluacionFinalSostenibilidad"
                                                                             rendered="#{not empty cabEvaluacionFinalSostenibilidad.parametroEvaluacionList}"
                                                                             rowIndexVar="index">
                                                                    <p:column headerText="Nro." style="width:20px">
                                                                        <h:outputText value="#{index + 1}"/>
                                                                    </p:column>
                                                                    <p:column headerText="Parámetro" style="white-space:pre-line">
                                                                        <h:outputText value="#{paramEvaluacionFinalSostenibilidad.descripcion2}" style="white-space: pre-line;"/>
                                                                        <h:outputText value="#{paramEvaluacionFinalSostenibilidad.descripcion3}" style="white-space: pre-line;"
                                                                                      rendered="#{paramEvaluacionFinalSostenibilidad.idAspectoEvaluacion!=null and paramEvaluacionFinalSostenibilidad.idAspectoEvaluacion=='4'}"/>
                                                                        <h:panelGrid columns="2" rendered="#{paramEvaluacionFinalSostenibilidad.idAspectoEvaluacion!=null}">
                                                                            <h:outputLabel value="#{paramEvaluacionFinalSostenibilidad.descValor1}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalSostenibilidad.valor1}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalSostenibilidad.descValor2}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalSostenibilidad.valor2}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalSostenibilidad.descValor3}"></h:outputLabel>
                                                                            <h:outputLabel value="#{paramEvaluacionFinalSostenibilidad.valor3}"></h:outputLabel>
                                                                        </h:panelGrid> 
                                                                        <h:panelGrid columns="2" rendered="#{paramEvaluacionFinalSostenibilidad.solicitarInfoAdicional!=null and paramEvaluacionFinalSostenibilidad.solicitarInfoAdicional=='S'}">
                                                                            <h:outputLabel value="#{paramEvaluacionFinalSostenibilidad.preguntaInfoAdicional}"></h:outputLabel>
                                                                        </h:panelGrid>

                                                                    </p:column>
                                                                    <p:column headerText="Valoración" style="width:170px">
                                                                        <table>
                                                                            <tr>
                                                                                <td style="padding: 0px; border: hidden">
                                                                                    <p:selectOneMenu id="selOpcionValoracionFinalSostenibilidad"
                                                                                                     required="#{not empty param['formPrincipal:btnGrabarEvaluacionFinal']}" 
                                                                                                     converter="omnifaces.SelectItemsConverter"
                                                                                                     disabled="#{(!proyectoController.modoEdicion or paramEvaluacionFinalSostenibilidad.idAspectoEvaluacion!=null) and (!paramEvaluacionFinalSostenibilidad.expanded)}"
                                                                                                     value="#{paramEvaluacionFinalSostenibilidad.valoracionParametroEvaluacion}"
                                                                                                     style="width: 140px"
                                                                                                     >
                                                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                                                        <f:selectItems value="#{paramEvaluacionFinalSostenibilidad.valoracionList}" var="pSostenibilidad" itemLabel="#{pSostenibilidad.descripcion}" itemValue="#{pSostenibilidad}"/>
                                                                                        <p:ajax event="change" update=":formPrincipal:tabView1:dtEvaluacionFinalSostenibilidad, :formPrincipal:panelTotalEvaluacion"></p:ajax>
                                                                                    </p:selectOneMenu>

                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td style="padding: 0px; border: hidden">
                                                                                    <p:message for="selOpcionValoracionFinalSostenibilidad"></p:message>
                                                                                </td>

                                                                            </tr>
                                                                            <tr>
                                                                                <td style="padding: 0px; border: hidden">
                                                                                    <p:inputTextarea id="txtRespInfoAdiValoracionFinalSostenibilidad"
                                                                                                     value="#{paramEvaluacionFinalSostenibilidad.respuestaInfoAdicional}"
                                                                                                     rendered="#{paramEvaluacionFinalSostenibilidad.solicitarInfoAdicional!=null and paramEvaluacionFinalSostenibilidad.solicitarInfoAdicional=='S'}"
                                                                                                     disabled="#{!proyectoController.modoEdicion}"
                                                                                                     cols="22" rows="3" maxlength="500"
                                                                                                     >
                                                                                        <p:ajax event="change" process=":formPrincipal:tabView1:dtEvaluacionFinalSostenibilidad"/>
                                                                                    </p:inputTextarea>
                                                                                </td>

                                                                            </tr>
                                                                            <tr>
                                                                                <td style="padding: 0px; border: hidden">
                                                                                    <p:message for="txtRespInfoAdiValoracionFinalSostenibilidad" rendered="#{paramEvaluacionFinalSostenibilidad.solicitarInfoAdicional!=null and paramEvaluacionFinalSostenibilidad.solicitarInfoAdicional=='S'}"></p:message>
                                                                                </td>

                                                                            </tr>


                                                                        </table>
                                                                    </p:column>
                                                                    <p:column headerText="Puntaje" style="text-align: center; width:70px">
                                                                        <h:outputText id="puntaje" value="#{paramEvaluacionFinalSostenibilidad.valoracionParametroEvaluacion.puntaje}"/>
                                                                    </p:column>                     
                                                                </p:dataTable>
                                                            </p:panel>
                                                        </p:rowExpansion>
                                                    </p:dataTable>           
                                                </p:tab>

                                            </p:tabView>

                                        </p:fieldset>

                                    </h:panelGrid>

                                </h:panelGrid>


                            </p:panel>        


                            <!--panelFinalizarEvaluacionFinal-->
                            <p:panel id="panelFinalizarEvaluacionFinal" rendered="#{proyectoController.selectedNodeCode=='9.3'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionFinalizarEvaluacionFinal" cellspacing="5" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:fieldset 
                                        legend="FINALIZAR PROCESO DE EVALUACION FINAL">
                                        <h:panelGrid columns="1" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                            <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirFinalizarEvaluacionFinal}" style="color:red"></p:outputLabel>
                                            <p:outputLabel rendered="#{proyectoController.proyectoSelected.mensajePermitirFinalizarEvaluacionFinal=='' and proyectoController.proyectoSelected.estado!='EVA'}" value="Una vez finalizado el proceso, no se podrá modificar la información del proyecto..." style="font-weight: bold"></p:outputLabel>
                                            <p:outputLabel rendered="#{proyectoController.proyectoSelected.estado=='EVA'}" value="Proceso de evaluación Finalizado" style="font-weight: bold"></p:outputLabel>
                                            <p:spacer height="20"></p:spacer>

                                            <h:panelGrid columns="2">
                                                <p:outputLabel for="txtFechaEvaluacion" value="* Fecha Evaluación:" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <p:calendar id="txtFechaEvaluacion" navigator="true" value="#{proyectoController.proyectoSelected.fechaEvaluacionFinal}" yearRange="2015:2030" size="10" locale="es" pattern="dd/MM/yyyy"
                                                                disabled="#{proyectoController.proyectoSelected.mensajePermitirFinalizarEvaluacionFinal!='' or proyectoController.proyectoSelected.estado=='EVA'}"
                                                                required="#{not empty param['formPrincipal:btnFinalizarEvaluacionFinal']}">
                                                    </p:calendar>
                                                    <p:message for="txtFechaEvaluacion"></p:message>
                                                </h:panelGrid>
                                            </h:panelGrid>


                                            <p:commandButton id="btnFinalizarEvaluacionFinal" value="Finalizar" title="Grabar Información" icon="ui-icon-check" 
                                                             disabled="#{proyectoController.proyectoSelected.mensajePermitirFinalizarEvaluacionFinal!='' or proyectoController.proyectoSelected.estado=='EVA'}"
                                                             update=":formPrincipal:panelFinalizarEvaluacionFinal,  :formPrincipal:panelTitulo,  :formPrincipal:message1"
                                                             action ="#{proyectoController.finalizarEvaluacionFinal}"
                                                             onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                <p:confirm header="Confirmación" message="Confirma que desea finalizar el proceso de evaluación del proyecto ?" icon="ui-icon-alert" />
                                            </p:commandButton>
                                        </h:panelGrid>                                          

                                    </p:fieldset>
                                </h:panelGrid>
                            </p:panel>  

                            <!--panelConsolidacionCalificacion-->
                            <p:panel id="panelConsolidacionCalificacion" rendered="#{proyectoController.selectedNodeCode=='2.3'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionConsolidacionCalificacion" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirConsolidacionCalificacion}" style="color:red"></p:outputLabel>

                                    <h:panelGrid columns="3" rendered="#{proyectoController.consolidacionCalificacionProyectoSelected==null}">
                                        <p:commandButton value="Agregar" title="Agregar Consolidación de Calificaciones" icon="ui-icon-plus" 
                                                         update=":formPrincipal:panelEdicionConsolidacionCalificacion, :formPrincipal:message1"
                                                         disabled="#{proyectoController.proyectoSelected.estado!='CEC'}"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                         actionListener="#{proyectoController.nuevoConsolidacionCalificacion}" 
                                                         >
                                        </p:commandButton>
                                        <p:commandButton value="Enviar a revisión" title="Enviar a revisión" icon="ui-icon-arrowreturnthick-1-w" 
                                                         update=":formPrincipal:panelMenu, :formPrincipal:panelCentral,  :formPrincipal:panelTitulo, :formPrincipal:message1"
                                                         disabled="#{proyectoController.proyectoSelected.calificacionList==null or proyectoController.proyectoSelected.calificacionList.size()==0 or proyectoController.proyectoSelected.estado!='CEC' or proyectoController.pendienteConsolidar}"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                         actionListener="#{proyectoController.enviarRevisionConsolidacionCalificacion}" 
                                                         >
                                            <p:confirm header="Confirmación" message="Confirma el evío a revisión del perfil del proyecto ?" icon="ui-icon-alert" ></p:confirm>
                                        </p:commandButton>
                                        <p:commandButton value="Finalizar" title="Finalizar proceso de consolidación" icon="ui-icon-check" 
                                                         update=":formPrincipal:panelMenu, :formPrincipal:panelCentral, :formPrincipal:panelTitulo,  :formPrincipal:message1"
                                                         disabled="#{proyectoController.proyectoSelected.calificacionList==null or proyectoController.proyectoSelected.calificacionList.size()==0 or proyectoController.proyectoSelected.estado!='CEC' or proyectoController.pendienteConsolidar}"
                                                         onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                         actionListener="#{proyectoController.finalizarConsolidacionCalificacion}" 
                                                         >
                                            <p:confirm header="Confirmación" message="Confirma la finalización del proceso de consolidación de calificación con el puntaje actual ?" icon="ui-icon-alert" ></p:confirm>
                                        </p:commandButton>

                                    </h:panelGrid>

                                    <h:panelGrid cellspacing="5" columns="1" style="width: 98%"
                                                 rendered="#{proyectoController.consolidacionCalificacionProyectoSelected !=null}">
                                        <p:fieldset 
                                            legend="#{proyectoController.consolidacionCalificacionProyectoSelected.id==null ? 'NUEVA CONSOLIDACION DE CALIFICACIONES':'EDICION DE CONSOLIDACION DE CALIFICACIONES'}">
                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarConsolidacionCalificacion" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelConsolidacionCalificacion, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarConsolidacionCalificacion}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 update=":formPrincipal:panelConsolidacionCalificacion" 
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()"
                                                                 action="#{proyectoController.cancelarEdicionConsolidacionCalificacion(true)}">
                                                </p:commandButton>
                                            </h:panelGrid>                                          

                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px">
                                                <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-right: 50px">
                                                    <p:outputLabel for="txtFechaConsolidacionCalificacion" value="* Fecha:" style="font-weight: bold"></p:outputLabel>
                                                    <p:inputText id="txtFechaConsolidacionCalificacion" value="#{proyectoController.consolidacionCalificacionProyectoSelected.fechaConsolidacion}"
                                                                 style="width: 100px" disabled="true">
                                                        <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                                    </p:inputText>

                                                    <p:outputLabel for="txtObservConsolidCalificacion" value="* Observaciones:" style="font-weight: bold"></p:outputLabel>
                                                    <h:panelGrid columns="2">
                                                        <p:inputTextarea id="txtObservConsolidCalificacion" value="#{proyectoController.consolidacionCalificacionProyectoSelected.observaciones}"
                                                                         cols="60" rows="5" maxlength="1000"
                                                                         required="#{not empty param['formPrincipal:btnGrabarConsolidacionCalificacion']}">
                                                        </p:inputTextarea>
                                                        <p:message for="txtObservConsolidCalificacion"></p:message>
                                                    </h:panelGrid>

                                                </h:panelGrid>
                                                <h:panelGrid columns="1">
                                                    <p:outputLabel value="DATOS PARA ENVIO DE MAIL AUTOMATICO (Opcional)" style="font-size: 12px; font-weight: bold"/>
                                                    <h:panelGrid columns="2" cellpadding="0" cellspacing="0">

                                                        <p:outputLabel for="txtEmailConsolidCalificacion" value="Mail Director del Proyecto:" style="font-weight: bold"></p:outputLabel>
                                                        <h:panelGrid columns="2">
                                                            <p:inputText id="txtEmailConsolidCalificacion" value="#{proyectoController.consolidacionCalificacionProyectoSelected.direccionCorreo}"
                                                                         maxlength="50" style="width: 320px">
                                                            </p:inputText>
                                                            <p:message for="txtEmailConsolidCalificacion"></p:message>
                                                        </h:panelGrid>

                                                        <p:outputLabel for="txtAsuntoConsolidCalificacion" value="Asunto:" style="font-weight: bold"></p:outputLabel>
                                                        <h:panelGrid columns="2">
                                                            <p:inputText id="txtAsuntoConsolidCalificacion" value="#{proyectoController.consolidacionCalificacionProyectoSelected.asuntoCorreo}"
                                                                         maxlength="100" style="width: 320px">
                                                            </p:inputText>
                                                            <p:message for="txtAsuntoConsolidCalificacion"></p:message>
                                                        </h:panelGrid>


                                                        <p:outputLabel for="txtMensajeConsolidCalificacion" value="Mensaje a enviarse:" style="font-weight: bold"></p:outputLabel>
                                                        <h:panelGrid columns="2">
                                                            <p:inputTextarea id="txtMensajeConsolidCalificacion" value="#{proyectoController.consolidacionCalificacionProyectoSelected.mensajeCorreo}"
                                                                             cols="60" rows="5" maxlength="1000">
                                                            </p:inputTextarea>
                                                            <p:message for="txtMensajeConsolidCalificacion"></p:message>
                                                        </h:panelGrid>

                                                    </h:panelGrid>                                                

                                                </h:panelGrid>
                                            </h:panelGrid>

                                            <p:dataTable id="dtCalificacionConsolidado" value="#{proyectoController.consolidacionCalificacionProyectoSelected.detalleCalificacionProyectoConsolidado}" var="detalleConsolidacionCalificacion"
                                                         expandedRow="false" editable="true" rowIndexVar="index"  resizableColumns="true" style="margin-bottom: 10px"
                                                         emptyMessage="No se encontraron resultados">
                                                <p:column width="40">
                                                    <p:rowToggler/>
                                                </p:column>
                                                <p:column headerText="Nro." width="20" >
                                                    <h:outputText value="#{index + 1}"/>
                                                </p:column>
                                                <p:column headerText="Parámetro" style="white-space:pre-line">
                                                    <h:outputText value="#{detalleConsolidacionCalificacion.parametroEvaluacion.descripcion}" style="white-space: pre-line;"/>
                                                </p:column>
                                                <p:column headerText="Respuesta (promedio)" width="120">
                                                    <h:outputText value="#{detalleConsolidacionCalificacion.valoracionParametroPromedio.descripcion}" style="white-space: pre-line"></h:outputText>
                                                </p:column>
                                                <p:column headerText="Puntaje (promedio)" width="120" style="text-align: center">
                                                    <h:outputText value="#{detalleConsolidacionCalificacion.valoracionParametroPromedio.puntaje}"/>
                                                </p:column>

                                                <p:rowExpansion >
                                                    <p:panel style="border:hidden;width:98%; padding-left: 30px"  >
                                                        <h:outputLabel value="Detalle de calificación:" style="font-weight: bold"/>
                                                        <p:dataTable value="#{detalleConsolidacionCalificacion.detalleCalificacionList}" var="detCalificacion2"
                                                                     rendered="#{not empty detalleConsolidacionCalificacion.detalleCalificacionList}"
                                                                     rowIndexVar="index" style="width: 80%">
                                                            <p:column headerText="Nro." style="width:20px">
                                                                <h:outputText value="#{index + 1}"/>
                                                            </p:column>
                                                            <p:column headerText="Nombres">
                                                                <h:outputText value="#{detCalificacion2.calificacionProyecto.miembroComisionCalificacion.usuario.usuNombres}" style="white-space: pre-line"></h:outputText>
                                                            </p:column>
                                                            <p:column headerText="Apellidos">
                                                                <h:outputText value="#{detCalificacion2.calificacionProyecto.miembroComisionCalificacion.usuario.usuApellidos}" style="white-space: pre-line"></h:outputText>
                                                            </p:column>
                                                            <p:column headerText="Respuesta" width="120">
                                                                <h:outputText value="#{detCalificacion2.valoracionParametroEvaluacion.descripcion}" style="white-space: pre-line"></h:outputText>
                                                            </p:column>
                                                            <p:column headerText="Puntaje" width="70" style="text-align: center">
                                                                <h:outputText value="#{detCalificacion2.valoracionParametroEvaluacion.puntaje}" style="white-space: pre-line"></h:outputText>
                                                            </p:column>
                                                        </p:dataTable>
                                                    </p:panel>                                            
                                                </p:rowExpansion>                      
                                                <p:columnGroup type="footer">
                                                    <p:row>
                                                        <p:column colspan="4" style="text-align:right" footerText="Total:" />
                                                        <p:column footerText="#{proyectoController.consolidacionCalificacionProyectoSelected.totalPuntaje}" style="text-align: center" >
                                                        </p:column>
                                                    </p:row>
                                                    <p:row>
                                                        <p:column colspan="4" style="text-align:right" footerText="Mínimo requerido:" />
                                                        <p:column footerText="#{proyectoController.proyectoSelected.configuracionParametrosEvaluacion.puntajeMinimoRequerido}" style="text-align: center" >
                                                        </p:column>
                                                    </p:row>
                                                    <p:row>
                                                        <p:column colspan="4" style="text-align:right" footerText="Resultado:" />
                                                        <p:column footerText="#{proyectoController.consolidacionCalificacionProyectoSelected.resultado}" style="text-align: center" >
                                                        </p:column>
                                                    </p:row>

                                                </p:columnGroup>                                                 
                                            </p:dataTable>                                               
                                        </p:fieldset>

                                    </h:panelGrid>

                                </h:panelGrid>
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="Consolidación actual de calificaciones:" style="font-weight: bold"/>
                                    <p:dataTable value="#{proyectoController.proyectoSelected.consolidacionCalificacionUltimaList}" var="ultConsolidacion"
                                                 expandedRow="true" rowIndexVar="index"  
                                                 resizableColumns="true"
                                                 style="width: 98%"
                                                 emptyMessage="No se encontraron Resultados"> 
                                        <!--<p:ajax event="rowToggle" listener="#{proyectoController.onRowToggle}"/>-->
                                        <p:column width="40">
                                            <p:rowToggler/>
                                        </p:column>
                                        <p:column rendered="false" headerText="Nro." style="width:20px">
                                            <h:outputText value="#{index + 1}"/>
                                        </p:column>
                                        <p:column headerText="Fecha" width="70">
                                            <h:outputText value="#{ultConsolidacion.fechaConsolidacion}">
                                                <f:convertDateTime pattern="dd/MM/yyyy"/> 
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Observaciones">
                                            <h:outputText value="#{ultConsolidacion.observaciones}" style="white-space: pre-line"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Asunto correo" width="170">
                                            <h:outputText value="#{ultConsolidacion.asuntoCorreo}" style="white-space: pre-line"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Mensaje correo" width="200">
                                            <h:outputText value="#{ultConsolidacion.mensajeCorreo}" style="white-space: pre-line"></h:outputText>
                                        </p:column>
                                        <p:column headerText="Correo electrónico" width="170">
                                            <h:outputText value="#{ultConsolidacion.direccionCorreo}" style="white-space: pre-line"></h:outputText>
                                        </p:column>
                                        <p:rowExpansion >
                                            <p:panel style="border:hidden;width:98%; padding-left: 30px"  >
                                                <h:outputLabel value="Detalle de calificación:" style="font-weight: bold"/>
                                                <p:dataTable value="#{ultConsolidacion.detalleCalificacionProyectoConsolidado}" var="detalleUltConsolidacion"
                                                             rendered="#{not empty ultConsolidacion.detalleCalificacionProyectoConsolidado}"
                                                             rowIndexVar="index">
                                                    <p:column width="40">
                                                        <p:rowToggler/>
                                                    </p:column>

                                                    <p:column headerText="Nro." style="width:20px">
                                                        <h:outputText value="#{index + 1}"/>
                                                    </p:column>
                                                    <p:column headerText="Parámetro" style="white-space:pre-line">
                                                        <h:outputText value="#{detalleUltConsolidacion.parametroEvaluacion.descripcion}" style="white-space: pre-line;"/>
                                                    </p:column>
                                                    <p:column headerText="Respuesta" width="120">
                                                        <h:outputText value="#{detalleUltConsolidacion.valoracionParametroPromedio.descripcion}" style="white-space: pre-line"></h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Puntaje" width="70" style="text-align: center">
                                                        <h:outputText value="#{detalleUltConsolidacion.valoracionParametroPromedio.puntaje}"/>
                                                    </p:column>

                                                    <p:rowExpansion >
                                                        <p:panel style="border:hidden;width:98%; padding-left: 30px"  >
                                                            <h:outputLabel value="Detalle de calificación:" style="font-weight: bold"/>
                                                            <p:dataTable value="#{detalleUltConsolidacion.detalleCalificacionList}" var="detalleUltConsolidacion2"
                                                                         rendered="#{not empty detalleUltConsolidacion.detalleCalificacionList}"
                                                                         rowIndexVar="index" style="width: 80%">
                                                                <p:column headerText="Nro." style="width:20px">
                                                                    <h:outputText value="#{index + 1}"/>
                                                                </p:column>
                                                                <p:column headerText="Nombres">
                                                                    <h:outputText value="#{detalleUltConsolidacion2.calificacionProyecto.miembroComisionCalificacion.usuario.usuNombres}" style="white-space: pre-line"></h:outputText>
                                                                </p:column>
                                                                <p:column headerText="Apellidos">
                                                                    <h:outputText value="#{detalleUltConsolidacion2.calificacionProyecto.miembroComisionCalificacion.usuario.usuApellidos}" style="white-space: pre-line"></h:outputText>
                                                                </p:column>
                                                                <p:column headerText="Respuesta" width="120">
                                                                    <h:outputText value="#{detalleUltConsolidacion2.valoracionParametroEvaluacion.descripcion}" style="white-space: pre-line"></h:outputText>
                                                                </p:column>
                                                                <p:column headerText="Puntaje" width="70" style="text-align: center">
                                                                    <h:outputText value="#{detalleUltConsolidacion2.valoracionParametroEvaluacion.puntaje}" style="white-space: pre-line"></h:outputText>
                                                                </p:column>
                                                            </p:dataTable>
                                                        </p:panel>                                            
                                                    </p:rowExpansion>                                                                          
                                                    <p:columnGroup type="footer">
                                                        <p:row>
                                                            <p:column colspan="4" style="text-align:right" footerText="Total:" />
                                                            <p:column footerText="#{ultConsolidacion.totalPuntaje}" style="text-align: center" >
                                                            </p:column>
                                                        </p:row>
                                                        <p:row>
                                                            <p:column colspan="4" style="text-align:right" footerText="Mínimo requerido:" />
                                                            <p:column footerText="#{proyectoController.proyectoSelected.configuracionParametrosEvaluacion.puntajeMinimoRequerido}" style="text-align: center" >
                                                            </p:column>
                                                        </p:row>
                                                        <p:row>
                                                            <p:column colspan="4" style="text-align:right" footerText="Resultado:" />
                                                            <p:column footerText="#{ultConsolidacion.resultado}" style="text-align: center" >
                                                            </p:column>
                                                        </p:row>

                                                    </p:columnGroup>                                                 

                                                </p:dataTable>
                                            </p:panel>                                            
                                        </p:rowExpansion>                                        

                                    </p:dataTable>                                  

                                </h:panelGrid>                              


                            </p:panel>                                   





                            <!--panelAprobacionVicerrectorado-->
                            <p:panel id="panelAprobacionVicerrectorado" rendered="#{proyectoController.selectedNodeCode=='31'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionAprobacionVicerrectorado" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <h:panelGrid columns="1" rendered="#{!proyectoController.modoEdicion}">
                                        <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirAprobacionVicerrectorado}" style="color:red"></p:outputLabel>                                        
                                        <p:commandButton value="Editar" title="Editar información" icon="ui-icon-plus" 
                                                         update=":formPrincipal:panelEdicionAprobacionVicerrectorado, :formPrincipal:message1"
                                                         disabled="#{proyectoController.proyectoSelected.estado!='APR0'}"
                                                         actionListener="#{proyectoController.editarAprobacionVicerrectorado}" 
                                                         >
                                        </p:commandButton>
                                    </h:panelGrid>

                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%"
                                                 >
                                        <p:fieldset 
                                            legend="APROBACION DE VICERRECTORADO">
                                            <h:panelGrid rendered="#{proyectoController.modoEdicion}" columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarAprobacionVicerrectorado" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelMenu, :formPrincipal:panelCentral,  :formPrincipal:panelTitulo, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarAprobacionVicerrectorado}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 process="@this"
                                                                 update=":formPrincipal:panelEdicionAprobacionVicerrectorado" 
                                                                 action="#{proyectoController.cancelarAprobacionVicerrectorado}">
                                                </p:commandButton>
                                            </h:panelGrid>                                          

                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px; margin-top: 10px; margin-right: 25px">
                                                <p:outputLabel for="txtFechaAprobacionVicerrectorado" value="* Fecha:" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <p:calendar id="txtFechaAprobacionVicerrectorado" navigator="true" value="#{proyectoController.proyectoSelected.fechaAprobacionVicerrectorado}" yearRange="2015:2030" size="10" locale="es" pattern="dd/MM/yyyy"
                                                                disabled="#{!proyectoController.modoEdicion}"
                                                                required="#{not empty param['formPrincipal:btnGrabarAprobacionVicerrectorado']}">
                                                    </p:calendar>
                                                    <p:message for="txtFechaAprobacionVicerrectorado"></p:message>
                                                </h:panelGrid>

                                                <p:outputLabel value="* Resolución Vicerrectorado:" for="selEstadoAprobVicerrectorado" style="font-weight: bold"/>
                                                <h:panelGrid columns="2">
                                                    <p:selectOneMenu id="selEstadoAprobVicerrectorado"
                                                                     required="#{not empty param['formPrincipal:btnGrabarAprobacionVicerrectorado']}" 
                                                                     disabled="#{!proyectoController.modoEdicion}"
                                                                     style="width:120px;" 
                                                                     converter="omnifaces.SelectItemsConverter"
                                                                     value="#{proyectoController.estadoProyecto}" 
                                                                     >
                                                        <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                        <f:selectItem itemLabel="APROBADO" itemValue="APR1"/>
                                                        <f:selectItem itemLabel="NO APROBADO" itemValue="REC1"/>
                                                    </p:selectOneMenu>
                                                    <p:message for="selEstadoAprobVicerrectorado"></p:message>
                                                </h:panelGrid>


                                                <p:outputLabel for="txtObservAprobVicerrectorado" value="* Observaciones:" style="font-weight: bold"></p:outputLabel>
                                                <h:panelGrid columns="2">
                                                    <p:inputTextarea id="txtObservAprobVicerrectorado" value="#{proyectoController.proyectoSelected.observacionAprobacionVicerrectorado}"
                                                                     cols="60" rows="3" maxlength="250" disabled="#{!proyectoController.modoEdicion}"
                                                                     required="#{not empty param['formPrincipal:btnGrabarAprobacionVicerrectorado']}">
                                                    </p:inputTextarea>
                                                    <p:message for="txtObservAprobVicerrectorado"></p:message>
                                                </h:panelGrid>
                                            </h:panelGrid>


                                        </p:fieldset>

                                    </h:panelGrid>

                                </h:panelGrid>


                            </p:panel>                                               



                            <!--panelAprobacionConsejoAcademico-->
                            <p:panel id="panelAprobacionConsejoAcademico" rendered="#{proyectoController.selectedNodeCode=='3'}" style="border: hidden; margin-left: 20px;">
                                <h:panelGrid id="panelEdicionAprobacionConsejoAcademico" columns="1" style="width: 100%; margin-bottom: 10px">
                                    <h:panelGrid columns="1" rendered="#{!proyectoController.modoEdicion}">
                                        <p:outputLabel value="#{proyectoController.proyectoSelected.mensajePermitirAprobacionConsejoAcademico}" style="color:red"></p:outputLabel>                                        
                                        <p:commandButton value="Editar" title="Editar información" icon="ui-icon-plus" 
                                                         update=":formPrincipal:panelEdicionAprobacionConsejoAcademico, :formPrincipal:message1"
                                                         disabled="#{proyectoController.proyectoSelected.estado!='APR1'}"
                                                         actionListener="#{proyectoController.editarAprobacionConsejoAcademico}" 
                                                         >
                                        </p:commandButton>
                                    </h:panelGrid>

                                    <h:panelGrid cellspacing="5" columns="1" style="width: 100%"
                                                 >
                                        <p:fieldset 
                                            legend="APROBACION DE CONSEJO ACADEMICO">
                                            <h:panelGrid rendered="#{proyectoController.modoEdicion}" columns="2" cellpadding="0" cellspacing="5" style="margin-top: 10px; margin-bottom: 10px">
                                                <p:commandButton id="btnGrabarAprobacionConsejoAcademico" value="Grabar" title="Grabar Información" icon="ui-icon-locked" 
                                                                 update=":formPrincipal:panelMenu, :formPrincipal:panelCentral,  :formPrincipal:panelTitulo, :formPrincipal:message1" 
                                                                 action ="#{proyectoController.grabarAprobacionConsejoAcademico}"
                                                                 onstart="PF('blockUIWidget').block()" oncomplete="PF('blockUIWidget').unblock()">
                                                </p:commandButton>
                                                <p:commandButton value="Cancelar" title="Cancela Información" icon="ui-icon-arrowreturnthick-1-w" 
                                                                 process="@this"
                                                                 update=":formPrincipal:panelEdicionAprobacionConsejoAcademico" 
                                                                 action="#{proyectoController.cancelarAprobacionConsejoAcademico}">
                                                </p:commandButton>
                                            </h:panelGrid>                                          

                                            <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px; margin-top: 10px">
                                                <h:panelGrid columns="2" cellpadding="0" cellspacing="0" style="margin-bottom: 10px; margin-top: 10px; margin-right: 25px">
                                                    <p:outputLabel for="txtFechaAprobacionConsejoAcademico" value="* Fecha:" style="font-weight: bold"></p:outputLabel>
                                                    <h:panelGrid columns="2">
                                                        <p:calendar id="txtFechaAprobacionConsejoAcademico" navigator="true" value="#{proyectoController.proyectoSelected.fechaAprobacionConsejoAcademico}" yearRange="2015:2030" size="10" locale="es" pattern="dd/MM/yyyy"
                                                                    disabled="#{!proyectoController.modoEdicion}"
                                                                    required="#{not empty param['formPrincipal:btnGrabarAprobacionConsejoAcademico']}">
                                                        </p:calendar>
                                                        <p:message for="txtFechaAprobacionConsejoAcademico"></p:message>
                                                    </h:panelGrid>

                                                    <p:outputLabel value="* Resolución Consejo Académico:" for="selEstadoCalifConsejoAcademico" style="font-weight: bold"/>
                                                    <h:panelGrid columns="2">
                                                        <p:selectOneMenu id="selEstadoCalifConsejoAcademico"
                                                                         required="#{not empty param['formPrincipal:btnGrabarAprobacionConsejoAcademico']}" 
                                                                         disabled="#{!proyectoController.modoEdicion}"
                                                                         style="width:120px;" 
                                                                         converter="omnifaces.SelectItemsConverter"
                                                                         value="#{proyectoController.estadoProyecto}" 
                                                                         >
                                                            <f:selectItem itemLabel="[[-Seleccione un item-]]" noSelectionOption="true"/>
                                                            <f:selectItem itemLabel="APROBADO" itemValue="APR2"/>
                                                            <f:selectItem itemLabel="NO APROBADO" itemValue="REC2"/>
                                                        </p:selectOneMenu>
                                                        <p:message for="selEstadoCalifConsejoAcademico"></p:message>
                                                    </h:panelGrid>


                                                    <p:outputLabel for="txtObservCalifConsejoAcademico" value="* Observaciones:" style="font-weight: bold"></p:outputLabel>
                                                    <h:panelGrid columns="2">
                                                        <p:inputTextarea id="txtObservCalifConsejoAcademico" value="#{proyectoController.proyectoSelected.observacionAprobacionConsejoAcademico}"
                                                                         cols="60" rows="3" maxlength="250" disabled="#{!proyectoController.modoEdicion}"
                                                                         required="#{not empty param['formPrincipal:btnGrabarAprobacionConsejoAcademico']}">
                                                        </p:inputTextarea>
                                                        <p:message for="txtObservCalifConsejoAcademico"></p:message>
                                                    </h:panelGrid>
                                                </h:panelGrid>
                                                <h:panelGrid columns="1">
                                                    <p:outputLabel value="DATOS PARA ENVIO DE MAIL AUTOMATICO (Opcional)" style="font-size: 12px; font-weight: bold"/>
                                                    <h:panelGrid columns="2" cellpadding="0" cellspacing="0">

                                                        <p:outputLabel for="txtEmailEvaluacionConsejoAcademico" value="Mail Director del Proyecto:" style="font-weight: bold"></p:outputLabel>
                                                        <h:panelGrid columns="2">
                                                            <p:inputText id="txtEmailEvaluacionConsejoAcademico" value="#{proyectoController.proyectoSelected.direccionCorreo}"
                                                                         disabled="#{!proyectoController.modoEdicion}" maxlength="50" style="width: 320px">
                                                            </p:inputText>
                                                            <p:message for="txtEmailEvaluacionConsejoAcademico"></p:message>
                                                        </h:panelGrid>

                                                        <p:outputLabel for="txtAsuntoEvaluacionConsejoAcademico" value="Asunto:" style="font-weight: bold"></p:outputLabel>
                                                        <h:panelGrid columns="2">
                                                            <p:inputText id="txtAsuntoEvaluacionConsejoAcademico" value="#{proyectoController.proyectoSelected.asuntoCorreo}"
                                                                         disabled="#{!proyectoController.modoEdicion}" maxlength="500" style="width: 320px">
                                                            </p:inputText>
                                                            <p:message for="txtAsuntoEvaluacionConsejoAcademico"></p:message>
                                                        </h:panelGrid>


                                                        <p:outputLabel for="txtMensajeEvaluacionConsejoAcademico" value="Mensaje a enviarse:" style="font-weight: bold"></p:outputLabel>
                                                        <h:panelGrid columns="2">
                                                            <p:inputTextarea id="txtMensajeEvaluacionConsejoAcademico" value="#{proyectoController.proyectoSelected.mensajeCorreo}"
                                                                             disabled="#{!proyectoController.modoEdicion}" cols="50" rows="5" maxlength="1000">
                                                            </p:inputTextarea>
                                                            <p:message for="txtMensajeEvaluacionConsejoAcademico"></p:message>
                                                        </h:panelGrid>
                                                    </h:panelGrid>

                                                    <h:panelGrid columns="2">

                                                        <p:outputLabel for="selAdjuntarActaEvaluacionConsejoAcademico" value="Adjuntar Acta de Aprobación:" style="font-weight: bold"></p:outputLabel>
                                                        <h:panelGrid columns="2">
                                                            <p:selectBooleanCheckbox id="selAdjuntarActaEvaluacionConsejoAcademico" value="#{proyectoController.adjuntarActaAprobacionConsejoAcademico}"
                                                                                     disabled="#{!proyectoController.modoEdicion}" >
                                                            </p:selectBooleanCheckbox>
                                                            <p:message for="selAdjuntarActaEvaluacionConsejoAcademico"></p:message>
                                                        </h:panelGrid>                                                
                                                        <p:outputLabel for="selAdjuntarMemoEvaluacionConsejoAcademico" value="Adjuntar Memorando de Notificación de Aprobación:" style="font-weight: bold"></p:outputLabel>
                                                        <h:panelGrid columns="2">
                                                            <p:selectBooleanCheckbox id="selAdjuntarMemoEvaluacionConsejoAcademico" value="#{proyectoController.adjuntarMemoNotificacionConsejoAcademico}"
                                                                                     disabled="#{!proyectoController.modoEdicion}" >
                                                            </p:selectBooleanCheckbox>
                                                            <p:message for="selAdjuntarMemoEvaluacionConsejoAcademico"></p:message>
                                                        </h:panelGrid>                                                


                                                    </h:panelGrid>                                                

                                                </h:panelGrid>                                                

                                            </h:panelGrid>




                                            <p:tabView id="tabViewAprobacionConsejoAcademico" activeIndex="#{proyectoController.activeIndexTabAprobacionConsejoAcademico}" >
                                                <p:tab id="tabActaAprobacion" title="Acta de aprobación">
                                                    <h:panelGrid columns="2" cellpadding="0" cellspacing="0">
                                                        <p:outputLabel value="Acta de aprobación (.pdf):" style="font-weight: bold"/>
                                                        <h:panelGrid columns="2">
                                                            <h:panelGrid columns="1" cellpadding="0" cellspacing="0">
                                                                <p:outputLabel id="lblNomActaCalifConsejoAcademico" value="#{proyectoController.proyectoSelected.pdfActaAprobacionConsejoAcademicoNombre}"/>
                                                                <p:fileUpload id="fileActaCalifConsejoAcademico" fileUploadListener="#{proyectoController.subirDocActaAprobacionConsejoAcademico}" 
                                                                              disabled="#{!proyectoController.modoEdicion}"
                                                                              mode="advanced"
                                                                              label="Seleccionar"
                                                                              invalidFileMessage="Tipo de archivo incorrecto: "
                                                                              invalidSizeMessage="Tamaño del archivo seleccionado excede el límite permitido (10MB): "
                                                                              update=":formPrincipal:tabViewAprobacionConsejoAcademico:lblNomActaCalifConsejoAcademico, :formPrincipal:tabViewAprobacionConsejoAcademico:docvActaCalifConsejoAcademico, :formPrincipal:message1" auto="true" sizeLimit="10240000" allowTypes="/(\.|\/)(pdf)$/" />

                                                            </h:panelGrid>
                                                            <p:message for="fileActaCalifConsejoAcademico"></p:message>
                                                        </h:panelGrid>
                                                    </h:panelGrid>
                                                    <pe:documentViewer id="docvActaCalifConsejoAcademico" height="500" url="#{proyectoController.proyectoSelected.urlFinalPdfAprobacionConsejoAcademico}"
                                                                       style="width: 100%"/>                               


                                                </p:tab>
                                                <p:tab id="tabMemorandoNotificacion" title="Memorando de notificación">
                                                    <h:panelGrid columns="2" cellpadding="0" cellspacing="0">
                                                        <p:outputLabel value="Memorando de notificación de aprobación (.pdf):" style="font-weight: bold"/>
                                                        <h:panelGrid columns="2">
                                                            <h:panelGrid columns="1" cellpadding="0" cellspacing="0">
                                                                <p:outputLabel id="lblNomMemoNotifConsejoAcademico" value="#{proyectoController.proyectoSelected.pdfMemorandoAprobacionConsejoAcademicoNombre}"/>
                                                                <p:fileUpload id="fileMemoNotifConsejoAcademico" fileUploadListener="#{proyectoController.subirDocMemorandoAprobacionConsejoAcademico}" 
                                                                              disabled="#{!proyectoController.modoEdicion}"
                                                                              mode="advanced"
                                                                              label="Seleccionar"
                                                                              invalidFileMessage="Tipo de archivo incorrecto: "
                                                                              invalidSizeMessage="Tamaño del archivo seleccionado excede el límite permitido (10MB): "
                                                                              update=":formPrincipal:tabViewAprobacionConsejoAcademico:lblNomMemoNotifConsejoAcademico, :formPrincipal:tabViewAprobacionConsejoAcademico:docvMemoNotifConsejoAcademico, :formPrincipal:message1" auto="true" sizeLimit="10240000" allowTypes="/(\.|\/)(pdf)$/" />

                                                            </h:panelGrid>
                                                            <p:message for="fileMemoNotifConsejoAcademico"></p:message>
                                                        </h:panelGrid>
                                                    </h:panelGrid>
                                                    <pe:documentViewer id="docvMemoNotifConsejoAcademico" height="500" url="#{proyectoController.proyectoSelected.urlFinalPdfMemorandoNotificacionConsejoAcademico}"
                                                                       style="width: 100%"/>     

                                                </p:tab>


                                            </p:tabView>

                                        </p:fieldset>

                                    </h:panelGrid>

                                </h:panelGrid>


                            </p:panel>                                               

                        </p:panel>


                    </h:panelGrid>

                </p:panel>

                <p:dialog id="dialogDeleteObjetivoPrograma" header="Confirmación" widgetVar="dialogDeleteObjetivoPrograma" resizable="false" width="400" modal="true" closeOnEscape="true" style=" text-align: left; font-weight: bold" appendTo="@(body)">
                    <h:form>
                        <p:outputPanel>
                            <center>
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="¿Está seguro que desea eliminar el objetivo del proyecto seleccionado?" style=" text-align: center"/>
                                </h:panelGrid>
                            </center>
                            <p:spacer height="10"></p:spacer>
                            <center>
                                <p:commandButton value="Aceptar" style="margin:0" onclick="PF('dialogDeleteObjetivoPrograma').hide();">
                                    <p:ajax listener ="#{proyectoController.eliminarP15()}"
                                            update=":formPrincipal:dataTObjetivos, :formPrincipal:p15, :formPrincipal:message1" 
                                            />
                                </p:commandButton>
                                <p:spacer width="10" ></p:spacer>
                                <p:commandButton value="Cancelar" style="margin:0" onclick="PF('dialogDeleteObjetivoPrograma').hide();"></p:commandButton>
                            </center>
                        </p:outputPanel>
                    </h:form>
                </p:dialog>

                <p:dialog id="dialogDeleteDocenteProyecto" header="Confirmación" widgetVar="dialogDeleteDocenteProyecto" resizable="false" width="400" modal="true" closeOnEscape="true" style=" text-align: left; font-weight: bold" appendTo="@(body)">
                    <h:form>
                        <p:outputPanel>
                            <center>
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="¿Está seguro que desea eliminar el objetivo del proyecto seleccionado?" style=" text-align: center"/>
                                </h:panelGrid>
                            </center>
                            <p:spacer height="10"></p:spacer>
                            <center>
                                <p:commandButton value="Aceptar" style="margin:0" onclick="PF('dialogDeleteDocenteProyecto').hide();">
                                    <p:ajax listener ="#{proyectoController.eliminarP5()}"
                                            update=":formPrincipal:dataTDocentesParticipantes, :formPrincipal:p5,:formPrincipal:h5, :formPrincipal:message1" 
                                            />
                                </p:commandButton>
                                <p:spacer width="10" ></p:spacer>
                                <p:commandButton value="Cancelar" style="margin:0" onclick="PF('dialogDeleteDocenteProyecto').hide();"></p:commandButton>
                            </center>
                        </p:outputPanel>
                    </h:form>
                </p:dialog>

                <p:dialog id="dialogDeleteEstudianteProyecto" header="Confirmación" widgetVar="dialogDeleteEstudianteProyecto" resizable="false" width="400" modal="true" closeOnEscape="true" style=" text-align: left; font-weight: bold" appendTo="@(body)">
                    <h:form>
                        <p:outputPanel>
                            <center>
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="¿Está seguro que desea eliminar la carrera seleccionada?" style=" text-align: center"/>
                                </h:panelGrid>
                            </center>
                            <p:spacer height="10"></p:spacer>
                            <center>
                                <p:commandButton value="Aceptar" style="margin:0" onclick="PF('dialogDeleteEstudianteProyecto').hide();">
                                    <p:ajax listener ="#{proyectoController.eliminarP6()}"
                                            update=":formPrincipal:dataTEstudiantesParticipantes, :formPrincipal:p6,:formPrincipal:h6, :formPrincipal:message1" 
                                            />
                                </p:commandButton>
                                <p:spacer width="10" ></p:spacer>
                                <p:commandButton value="Cancelar" style="margin:0" onclick="PF('dialogDeleteEstudianteProyecto').hide();"></p:commandButton>
                            </center>
                        </p:outputPanel>
                    </h:form>
                </p:dialog>



                <p:dialog id="dialogDeleteObjetivosPlanBVivir" header="Confirmación" widgetVar="dialogDeleteObjetivosPlanBVivir" resizable="false" width="400" modal="true" closeOnEscape="true" style=" text-align: left; font-weight: bold" appendTo="@(body)">
                    <h:form>
                        <p:outputPanel>
                            <center>
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="¿Está seguro que desea eliminar el objetivo seleccionado?" style=" text-align: center"/>
                                </h:panelGrid>
                            </center>
                            <p:spacer height="10"></p:spacer>
                            <center>
                                <p:commandButton value="Aceptar" style="margin:0" onclick="PF('dialogDeleteObjetivosPlanBVivir').hi
                                        de();">
                                    <p:ajax update="formPrincipal:panel16, :formPrincipal:message1 " listener ="#{proyectoController.eliminarP16()}" />
                                </p:commandButton>
                                <p:spacer width="10" ></p:spacer>
                                <p:commandButton value="Cancelar" style="margin:0" onclick="PF('dialogDeleteObjetivosPlanBVivir').hide();"></p:commandButton>
                            </center>
                        </p:outputPanel>
                    </h:form>
                </p:dialog>

                <p:dialog id="detalleHitoProyectoDlg" header="Hito del Proyecto" widgetVar="detalleHitoProyectoWdgt"  
                          appendTo="@(body)" width="500"
                          resizable="false" modal="true" closable="false"
                          style="font-weight: bold"
                          showEffect="clip" hideEffect="clip">  
                    <h:form id="form1" >
                        <p:growl id="message2" widgetVar="message1" showDetail="true" life="3000"></p:growl>
                        <h:panelGrid id="panel1" columns="2">  
                            <p:outputLabel value="Descripción:" for="txtNombre"/>
                            <h:panelGrid columns="2">
                                <p:inputText id="txtNombre"
                                             style="width: 260px"
                                             value="#{proyectoController.event.data.descripcion}"
                                             rendered="#{not empty proyectoController.event}"
                                             required="#{not empty param['formPrincipal:form1:btnGrabarHito']}"
                                             />  
                                <p:message for="txtNombre"></p:message>
                            </h:panelGrid>


                            <p:outputLabel value="Fecha:" for="calFechaHito" />  
                            <h:panelGrid columns="2">
                                <p:calendar id="calFechaHito" navigator="true" 
                                            value="#{proyectoController.event.startDate}" 
                                            required="#{not empty param['formPrincipal:form1:btnGrabarHito']}"
                                            yearRange="2015:2030" size="10" locale="es" pattern="dd/MM/yyyy"
                                            rendered="#{not empty proyectoController.event}"  
                                            >
                                </p:calendar>
                                <p:message for="calFechaHito"></p:message>
                            </h:panelGrid>

                            <p:outputLabel value="Resultados esperados:" for="txtLogros"/>
                            <h:panelGrid columns="2">
                                <p:inputTextarea id="txtLogros" cols="50" rows="7" value="#{proyectoController.event.data.logro}" 
                                                 rendered="#{not empty proyectoController.event}"  
                                                 required="#{not empty param['formPrincipal:form1:btnGrabarHito']}"
                                                 >
                                </p:inputTextarea> 
                                <p:message for="txtLogros"></p:message>
                            </h:panelGrid>


                        </h:panelGrid>  
                        <center>

                            <p:commandButton id="btnGrabarHito" value="Aceptar" 
                                             action="#{proyectoController.registraHitoProyecto}"  
                                             update="panel1"
                                             process="form1"
                                             oncomplete="if(!args.validationFailed){PF('detalleHitoProyectoWdgt').hide();}"/>  
                            <p:commandButton id="btnCancelarHito" value="Cancelar" 
                                             action="#{proyectoController.cancelarRegistroHitoProyecto}"
                                             update="formPrincipal:timelineHitos"
                                             process="form1"
                                             oncomplete="if(!args.validationFailed){PF('detalleHitoProyectoWdgt').hide();}"/>
                        </center>
                    </h:form>
                </p:dialog>   


                <p:dialog id="detalleActividadProyectoDlg" header="Actividad del Proyecto" widgetVar="detalleActividadProyectoWdgt"  
                          appendTo="@(body)" width="500"
                          resizable="false" modal="true" closable="true" closeOnEscape="true"
                          style="font-weight: bold"
                          focus="formPrincipal:form2:btnGrabarActividad"
                          showEffect="clip" hideEffect="clip">  
                    <h:form id="form2" >
                        <p:growl id="message2" widgetVar="message1" showDetail="true" life="3000"></p:growl>
                        <h:panelGrid id="panel1" columns="2">  
                            <p:outputLabel value="Descripción:"/>
                            <p:outputLabel value="#{proyectoController.event.data.svopObjetivoProy}" style="font-weight: normal"/>

                            <p:outputLabel value="Fecha Inicio:" for="calFechaInicioAct"/>  
                            <h:panelGrid columns="2">
                                <p:calendar id="calFechaInicioAct" 
                                            value="#{proyectoController.event.startDate}" 
                                            yearRange="2015:2030" size="10" locale="es" pattern="dd/MM/yyyy"
                                            rendered="#{not empty proyectoController.event}"  
                                            >
                                </p:calendar>
                                <p:message for="calFechaInicioAct"></p:message>
                            </h:panelGrid>

                            <p:outputLabel value="Fecha Fin:" for="calFechaFinAct"/>  
                            <h:panelGrid columns="2">
                                <p:calendar id="calFechaFinAct" navigator="true" 
                                            value="#{proyectoController.event.endDate}" 
                                            required="#{not empty param['formPrincipal:form2:btnGrabarActividad']}"
                                            yearRange="2015:2030" size="10" locale="es" pattern="dd/MM/yyyy"
                                            rendered="#{not empty proyectoController.event}"  
                                            >
                                </p:calendar>
                                <p:message for="calFechaFinAct"></p:message>
                            </h:panelGrid>




                        </h:panelGrid>  
                        <center>

                            <p:commandButton id="btnGrabarActividad" value="Aceptar" 
                                             action="#{proyectoController.registraActividadProyecto}"  
                                             update="panel1, formPrincipal:timelineActividades"
                                             process="form2"
                                             oncomplete="if(!args.validationFailed){PF('detalleActividadProyectoWdgt').hide();}"/>  
                            <p:commandButton id="btnCancelarActividad" value="Cancelar" 
                                             action="#{proyectoController.cancelarRegistroHitoProyecto}"
                                             update="formPrincipal:timelineHitos"
                                             process="form2"
                                             oncomplete="if(!args.validationFailed){PF('detalleActividadProyectoWdgt').hide();}"/>
                        </center>
                    </h:form>
                </p:dialog>

                <p:dialog id="dialogDeleteAvanceComponente" header="Confirmación" widgetVar="dialogDeleteAvanceComponente" resizable="false" width="400" modal="true" closeOnEscape="true" style=" text-align: left; font-weight: bold" appendTo="@(body)">
                    <h:form>
                        <p:outputPanel>
                            <center>
                                <h:panelGrid columns="1">
                                    <h:outputLabel value="¿Está seguro que desea eliminar el registro de seguimiento seleccionado?" style=" text-align: center"/>
                                </h:panelGrid>
                            </center>
                            <p:spacer height="10"></p:spacer>
                            <center>
                                <p:commandButton value="Aceptar" style="margin:0" onclick="PF('dialogDeleteAvanceComponente').hide
                                                ();">
                                    <p:ajax update="formPrincipal:panelAvance, :formPrincipal:message1 " listener ="#{proyectoController.eliminarAvance()}" />
                                </p:commandButton>
                                <p:spacer width="10" ></p:spacer>
                                <p:commandButton value="Cancelar" style="margin:0" onclick="PF('dialogDeleteAvanceComponente').hide();"></p:commandButton>
                            </center>
                        </p:outputPanel>
                    </h:form>
                </p:dialog>                

                <p:dialog modal="true"
                          closeOnEscape="true"
                          widgetVar="dlgPartidaPresupuestaria"
                          header="Partidas Presupuestarias"
                          width="720" 
                          height="420"
                          id="dlgPartidaPresupuestaria"
                          appendTo="@(body)">

                    <h:form id="formModal">

                        <h:panelGrid columns="1"
                                     style="width: 90%">
                            <p:fieldset style="width: 650px;" 
                                        legend="Selección de Partida Presupuestaria">

                                <p:dataTable id="dtPartidaPresupuestaria" value="#{proyectoController.presupuestoProyectoSelected.tipoGasto=='C'?proyectoController.partidaPresupuestariaGastoCorrienteList:proyectoController.partidaPresupuestariaGastoInversionList}" var="partida"
                                             rows="10" rowIndexVar="index" resizableColumns="true"
                                             emptyMessage="No se encontraron Resultados">
                                    <p:column headerText="Nro." width="20">
                                        <h:outputText value="#{index + 1}"/>
                                    </p:column>
                                    <p:column headerText="Grupo" sortBy="#{partida.clasificadorPresupuesto.scpPadre.scpPadre.scpPadre.scpId.toString().concat('. ').concat(partida.clasificadorPresupuesto.scpPadre.scpPadre.scpPadre.scpNombre)}" width="100">
                                        <h:outputText value="#{partida.clasificadorPresupuesto.scpPadre.scpPadre.scpPadre.scpId.toString().concat('. ').concat(partida.clasificadorPresupuesto.scpPadre.scpPadre.scpPadre.scpNombre)}" style="white-space: pre-line"/>
                                    </p:column>
                                    <p:column headerText="SubGrupo1" sortBy="#{partida.clasificadorPresupuesto.scpPadre.scpPadre.scpId.toString().concat(' ').concat(partida.clasificadorPresupuesto.scpPadre.scpPadre.scpNombre)}" width="100">
                                        <h:outputText value="#{partida.clasificadorPresupuesto.scpPadre.scpPadre.scpId.toString().concat('. ').concat(partida.clasificadorPresupuesto.scpPadre.scpPadre.scpNombre)}" style="white-space: pre-line"/>                                    
                                    </p:column>
                                    <p:column headerText="SubGrupo2" sortBy="#{partida.clasificadorPresupuesto.scpPadre.scpId.toString().concat('. ').concat(partida.clasificadorPresupuesto.scpPadre.scpNombre)}" width="100">
                                        <h:outputText value="#{partida.clasificadorPresupuesto.scpPadre.scpId.toString().concat('. ').concat(partida.clasificadorPresupuesto.scpPadre.scpNombre)}" style="white-space: pre-line"/>                                    
                                    </p:column>
                                    <p:column headerText="Partida Presupuestaria" sortBy="#{partida.clasificadorPresupuesto.scpId.toString().concat('. ').concat(partida.clasificadorPresupuesto.scpNombre)}">
                                        <h:outputText value="#{partida.clasificadorPresupuesto.scpId.toString().concat('. ').concat(partida.clasificadorPresupuesto.scpNombre)}" style="white-space: pre-line"/>                                    
                                    </p:column>
                                    <p:column headerText="Seleccionar" width="50" style="text-align: center">
                                        <p:commandButton icon="ui-icon-check" update=":formPrincipal:txtBienServicioPresupuestoDetallado" 
                                                         onclick="PF('dlgPartidaPresupuestaria').hide();" process="@this">
                                            <f:setPropertyActionListener value="#{partida}" target="#{proyectoController.presupuestoProyectoSelected.partidaPresupuestaria}"/>
                                        </p:commandButton>
                                    </p:column>
                                </p:dataTable>
                            </p:fieldset>

                        </h:panelGrid>
                    </h:form>
                </p:dialog>                                      

            </ui:define>
        </ui:composition>






        // This script should be included after the Timeline component, e.g. close at the body tag  
        <h:outputScript id="timelineJS" target="body">  
            /* <![CDATA[ */      
            $(function() {  
            onrangechange1();  // to set the range equal initially on page load  
            });  
            /* ]]> */  
        </h:outputScript>  
    </h:body>
</html>

